<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.2">
<meta name="author" content="Alejandro Such">
<title>AngularJS</title>
<style>/*! normalize.css v2.1.2 | MIT License | git.io/normalize */
/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video { display: inline-block; }

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) { display: none; height: 0; }

/** Address `[hidden]` styling not present in IE 8/9. Hide the `template` element in IE, Safari, and Firefox < 22. */
[hidden], template { display: none; }

script { display: none !important; }

/* ========================================================================== Base ========================================================================== */
/** 1. Set default font family to sans-serif. 2. Prevent iOS text size adjust after orientation change, without disabling user zoom. */
html { font-family: sans-serif; /* 1 */ -ms-text-size-adjust: 100%; /* 2 */ -webkit-text-size-adjust: 100%; /* 2 */ }

/** Remove default margin. */
body { margin: 0; }

/* ========================================================================== Links ========================================================================== */
/** Remove the gray background color from active links in IE 10. */
a { background: transparent; }

/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus { outline: thin dotted; }

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover { outline: 0; }

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 { font-size: 2em; margin: 0.67em 0; }

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] { border-bottom: 1px dotted; }

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong { font-weight: bold; }

/** Address styling not present in Safari 5 and Chrome. */
dfn { font-style: italic; }

/** Address differences between Firefox and other browsers. */
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }

/** Address styling not present in IE 8/9. */
mark { background: #ff0; color: #000; }

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }

/** Improve readability of pre-formatted text in all browsers. */
pre { white-space: pre-wrap; }

/** Set consistent quote types. */
q { quotes: "\201C" "\201D" "\2018" "\2019"; }

/** Address inconsistent and variable font size in all browsers. */
small { font-size: 80%; }

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }

sup { top: -0.5em; }

sub { bottom: -0.25em; }

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img { border: 0; }

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) { overflow: hidden; }

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure { margin: 0; }

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend { border: 0; /* 1 */ padding: 0; /* 2 */ }

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea { font-family: inherit; /* 1 */ font-size: 100%; /* 2 */ margin: 0; /* 3 */ }

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input { line-height: normal; }

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select { text-transform: none; }

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; /* 2 */ cursor: pointer; /* 3 */ }

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] { cursor: default; }

/** 1. Address box sizing set to `content-box` in IE 8/9. 2. Remove excess padding in IE 8/9. */
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ }

/** 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome. 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome (include `-moz` to future-proof). */
input[type="search"] { -webkit-appearance: textfield; /* 1 */ -moz-box-sizing: content-box; -webkit-box-sizing: content-box; /* 2 */ box-sizing: content-box; }

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea { overflow: auto; /* 1 */ vertical-align: top; /* 2 */ }

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table { border-collapse: collapse; border-spacing: 0; }

meta.foundation-mq-small { font-family: "only screen and (min-width: 768px)"; width: 768px; }

meta.foundation-mq-medium { font-family: "only screen and (min-width:1280px)"; width: 1280px; }

meta.foundation-mq-large { font-family: "only screen and (min-width:1440px)"; width: 1440px; }

*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }

html, body { font-size: 97%; }

body { background: white; color: #222222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }

a:hover { cursor: pointer; }

img, object, embed { max-width: 100%; height: auto; }

object, embed { height: 100%; }

img { -ms-interpolation-mode: bicubic; }

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }

.left { float: left !important; }

.right { float: right !important; }

.text-left { text-align: left !important; }

.text-right { text-align: right !important; }

.text-center { text-align: center !important; }

.text-justify { text-align: justify !important; }

.hide { display: none; }

.antialiased, body { -webkit-font-smoothing: antialiased; }

img { display: inline-block; vertical-align: middle; }

textarea { height: auto; min-height: 50px; }

select { width: 100%; }

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }

.subheader, .admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { line-height: 1.4; color: #6f6f6f; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }

/* Default Link Styles */
a { color: #1164be; text-decoration: none; line-height: inherit; }
a img { border: none; }

/* Default paragraph styles */
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.4; margin-bottom: 1em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }

/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: bold; font-style: normal; color: #1c355e; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #6f6f6f; line-height: 0; }

h1 { font-size: 2.125em; }

h2 { font-size: 1.6875em; }

h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }

h4 { font-size: 1.125em; }

h5 { font-size: 1.125em; }

h6 { font-size: 1em; }

hr { border: solid #dddddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }

/* Helpful Typography Defaults */
em, i { font-style: italic; line-height: inherit; }

strong, b { font-weight: bold; line-height: inherit; }

small { font-size: 60%; line-height: inherit; }

code { font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: bold; }

/* Lists */
ul, ol, dl { font-size: 1em; line-height: 1.4; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }

ul, ol { margin-left: 2.5em; }
ul.no-bullet, ol.no-bullet { margin-left: 1.5em; }

/* Unordered Lists */
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; /* Override nested font-size change */ }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }

/* Ordered Lists */
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }

/* Definition Lists */
dl dt { margin-bottom: 0.3125em; font-weight: bold; }
dl dd { margin-bottom: 1.25em; }

/* Abbreviations */
abbr, acronym { text-transform: uppercase; font-size: 90%; color: #222222; border-bottom: 1px dotted #dddddd; cursor: help; }

abbr { text-transform: none; }

/* Blockquotes */
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: 0.8125em; color: #555555; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #555555; }

blockquote, blockquote p { line-height: 1.6; color: #6f6f6f; }

/* Microformats */
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }

.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }

/*@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }*/
/* Tables */
table { background: white; margin-bottom: 1.25em; border: solid 1px #dddddd; }
table thead, table tfoot { background: whitesmoke; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: #222222; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: #222222; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f9f9f9; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.4; }

h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; border-bottom: 1px solid #dddddd }

.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }

*:not(pre) > code { font-size: inherit; font-style: normal !important; letter-spacing: 0; padding: 3px 2px 1px 2px; background-color: #eeeeee; border: 1px solid #dddddd; -webkit-border-radius: 0; border-radius: 0; line-height: inherit; font-weight: normal; }

pre, pre > code { line-height: 1.4; color: black; font-family: monospace, serif; font-weight: normal; }

.keyseq { color: #555555; }

kbd { display: inline-block; color: #222222; font-size: 0.75em; line-height: 1.4; background-color: #f7f7f7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; margin: -0.15em 0.15em 0 0.15em; padding: 0.2em 0.6em 0.2em 0.5em; vertical-align: middle; white-space: nowrap; }

.keyseq kbd:first-child { margin-left: 0; }

.keyseq kbd:last-child { margin-right: 0; }

.menuseq, .menu { color: #090909; }

b.button:before, b.button:after { position: relative; top: -1px; font-weight: normal; }

b.button:before { content: "["; padding: 0 3px 0 2px; }

b.button:after { content: "]"; padding: 0 2px 0 3px; }

#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }

#content { margin-top: 1.25em; }

#content:before { content: none; }

#header > h1:first-child { color: black; margin-top: 2.25rem; margin-bottom: 0; }
#header > h1:first-child + #toc { margin-top: 8px; border-top: 1px solid #dddddd; }
#header > h1:only-child, body.toc2 #header > h1:nth-last-child(2) { border-bottom: 1px solid #dddddd; padding-bottom: 8px; }
#header .details { border-bottom: 1px solid #dddddd; line-height: 1.45; padding-top: 0.25em; padding-bottom: 0.25em; padding-left: 0.25em; color: #555555; display: -ms-flexbox; display: -webkit-flex; display: flex; -ms-flex-flow: row wrap; -webkit-flex-flow: row wrap; flex-flow: row wrap; }
#header .details span:first-child { margin-left: -0.125em; }
#header .details span.email a { color: #6f6f6f; }
#header .details br { display: none; }
#header .details br + span:before { content: "\00a0\2013\00a0"; }
#header .details br + span.author:before { content: "\00a0\22c5\00a0"; color: #6f6f6f; }
#header .details br + span#revremark:before { content: "\00a0|\00a0"; }
#header #revnumber { text-transform: capitalize; }
#header #revnumber:after { content: "\00a0"; }

#content > h1:first-child:not([class]) { color: black; border-bottom: 1px solid #dddddd; padding-bottom: 8px; margin-top: 0; padding-top: 1rem; margin-bottom: 1.25rem; }

#floating {
  position: fixed;
  z-index: 1000;
  padding: 0.5em;
  right: 0;
  top: 0;
  background: white;
  box-shadow: 0 0 1em #777777;
  -webkit-box-shadow: 0 0 1em #777777;
  -moz-box-shadow: 0 0 1em #777777;
  -webkit-border-bottom-left-radius: 5px;
  -moz-border-radius-bottomleft: 5px;
  max-height: 80%;
  overflow: auto;
}

#floating #full { display: none; } /* Hide the full TOC by default */

#floating:hover #full{
  display: block; /* Show it on hover */
}


#toc { border-bottom: 1px solid #dddddd; padding-bottom: 0.5em; }
#toc > ul { margin-left: 0.125em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin: 0.5em 0; }
#toc ul { font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; list-style-type: none; }
#toc a { text-decoration: none; }
#toc a:active { text-decoration: underline; }

#toctitle { color: #6f6f6f; font-size: 1.2em; }

@media only screen and (min-width: 768px) { #toctitle { font-size: 1.375em; }
  body.toc2 { padding-left: 15em; padding-right: 0; }
  #toc.toc2 { margin-top: 0 !important; background-color: #f2f2f2; position: fixed; width: 15em; left: 0; top: 0; border-right: 1px solid #dddddd; border-top-width: 0 !important; border-bottom-width: 0 !important; z-index: 1000; padding: 1.25em 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; font-size: 1.2em; }
  #toc.toc2 > ul { font-size: 0.9em; margin-bottom: 0; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 15em; }
  body.toc2.toc-right #toc.toc2 { border-right-width: 0; border-left: 1px solid #dddddd; left: auto; right: 0; } }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; padding-right: 0; }
  #toc.toc2 { width: 20em; }
  #toc.toc2 #toctitle { font-size: 1.375em; }
  #toc.toc2 > ul { font-size: 0.95em; }
  #toc.toc2 ul ul { padding-left: 1.25em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; -webkit-border-radius: 0; border-radius: 0; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }

#footer { max-width: 100%; background-color: #222222; padding: 1.25em; }

#footer-text { color: #dddddd; line-height: 1.44; }

.sect1 { padding-bottom: 0.625em; }

@media only screen and (min-width: 768px) { .sect1 { padding-bottom: 1.25em; } }
.sect1 + .sect1 { border-top: 1px solid #dddddd; }

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; z-index: 1001; width: 1.5ex; margin-left: -1.5ex; display: block; text-decoration: none !important; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: "\00A7"; font-size: 0.85em; display: block; padding-top: 0.1em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #222222; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #151515; }

.audioblock, .imageblock, .literalblock, .listingblock, .stemblock, .videoblock { margin-bottom: 1.25em; }

.admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-rendering: optimizeLegibility; text-align: left; }

table.tableblock > caption.title { white-space: nowrap; overflow: visible; max-width: 0; }

.paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { color: black; }

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }

.admonitionblock > table { border-collapse: separate; border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #dddddd; color: #555555; }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }

.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 0; border-radius: 0; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }

.sidebarblock { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; -webkit-border-radius: 0; border-radius: 0; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock > .content > .title { color: #6f6f6f; margin-top: 0; }

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }

.literalblock pre, .listingblock pre:not(.highlight), .listingblock pre[class="highlight"], .listingblock pre[class^="highlight "], .listingblock pre.CodeRay, .listingblock pre.prettyprint { background: #eeeeee; }
.sidebarblock .literalblock pre, .sidebarblock .listingblock pre:not(.highlight), .sidebarblock .listingblock pre[class="highlight"], .sidebarblock .listingblock pre[class^="highlight "], .sidebarblock .listingblock pre.CodeRay, .sidebarblock .listingblock pre.prettyprint { background: #f2f1f1; }

.literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { border: 1px solid #cccccc; -webkit-border-radius: 0; border-radius: 0; word-wrap: break-word; padding: 0.8em 0.8em 0.65em 0.8em; font-size: 0.8125em; }
.literalblock pre.nowrap, .literalblock pre[class].nowrap, .listingblock pre.nowrap, .listingblock pre[class].nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
@media only screen and (min-width: 768px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 0.90625em; } }
@media only screen and (min-width: 1280px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 1em; } }

.literalblock.output pre { color: #eeeeee; background-color: black; }

.listingblock pre.highlightjs { padding: 0; }
.listingblock pre.highlightjs > code { padding: 0.8em 0.8em 0.65em 0.8em; -webkit-border-radius: 0; border-radius: 0; }

.listingblock > .content { position: relative; }

.listingblock code[data-lang]:before { display: none; content: attr(data-lang); position: absolute; font-size: 0.75em; top: 0.425rem; right: 0.5rem; line-height: 1; text-transform: uppercase; color: #999; }

.listingblock:hover code[data-lang]:before { display: block; }

.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }

.listingblock.terminal pre .command:not([data-prompt]):before { content: "$"; }

table.pyhltable { border-collapse: separate; border: 0; margin-bottom: 0; background: none; }

table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; }

table.pyhltable td.code { padding-left: .75em; padding-right: 0; }

pre.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #dddddd; }

pre.pygments .lineno { display: inline-block; margin-right: .25em; }

table.pyhltable .linenodiv { background: none !important; padding-right: 0 !important; }

.quoteblock { margin: 0 1em 1.25em 1.5em; display: table; }
.quoteblock > .title { margin-left: -1.5em; margin-bottom: 0.75em; }
.quoteblock blockquote, .quoteblock blockquote p { color: #6f6f6f; font-size: 1.15rem; line-height: 1.75; word-spacing: 0.1em; letter-spacing: 0; font-style: italic; text-align: justify; }
.quoteblock blockquote { margin: 0; padding: 0; border: 0; }
.quoteblock blockquote:before { content: "\201c"; float: left; font-size: 2.75em; font-weight: bold; line-height: 0.6em; margin-left: -0.6em; color: #6f6f6f; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: 0.5em; margin-right: 0.5ex; text-align: right; }
.quoteblock .quoteblock { margin-left: 0; margin-right: 0; padding: 0.5em 0; border-left: 3px solid #555555; }
.quoteblock .quoteblock blockquote { padding: 0 0 0 0.75em; }
.quoteblock .quoteblock blockquote:before { display: none; }

.verseblock { margin: 0 1em 1.25em 1em; }
.verseblock pre { font-family: "Open Sans", "DejaVu Sans", sans; font-size: 1.15rem; color: #6f6f6f; font-weight: 300; text-rendering: optimizeLegibility; }
.verseblock pre strong { font-weight: 400; }
.verseblock .attribution { margin-top: 1.25rem; margin-left: 0.5ex; }

.quoteblock .attribution, .verseblock .attribution { font-size: 0.8125em; line-height: 1.45; font-style: italic; }
.quoteblock .attribution br, .verseblock .attribution br { display: none; }
.quoteblock .attribution cite, .verseblock .attribution cite { display: block; letter-spacing: -0.05em; color: #555555; }

.quoteblock.abstract { margin: 0 0 1.25em 0; display: block; }
.quoteblock.abstract blockquote, .quoteblock.abstract blockquote p { text-align: left; word-spacing: 0; }
.quoteblock.abstract blockquote:before, .quoteblock.abstract blockquote p:first-of-type:before { display: none; }

table.tableblock { max-width: 100%; border-collapse: separate; }
table.tableblock td > .paragraph:last-child p > p:last-child, table.tableblock th > p:last-child, table.tableblock td > p:last-child { margin-bottom: 0; }

table.spread { width: 100%; }

table.tableblock, th.tableblock, td.tableblock { border: 0 solid #dddddd; }

table.grid-all th.tableblock, table.grid-all td.tableblock { border-width: 0 1px 1px 0; }

table.grid-all tfoot > tr > th.tableblock, table.grid-all tfoot > tr > td.tableblock { border-width: 1px 1px 0 0; }

table.grid-cols th.tableblock, table.grid-cols td.tableblock { border-width: 0 1px 0 0; }

table.grid-all * > tr > .tableblock:last-child, table.grid-cols * > tr > .tableblock:last-child { border-right-width: 0; }

table.grid-rows th.tableblock, table.grid-rows td.tableblock { border-width: 0 0 1px 0; }

table.grid-all tbody > tr:last-child > th.tableblock, table.grid-all tbody > tr:last-child > td.tableblock, table.grid-all thead:last-child > tr > th.tableblock, table.grid-rows tbody > tr:last-child > th.tableblock, table.grid-rows tbody > tr:last-child > td.tableblock, table.grid-rows thead:last-child > tr > th.tableblock { border-bottom-width: 0; }

table.grid-rows tfoot > tr > th.tableblock, table.grid-rows tfoot > tr > td.tableblock { border-width: 1px 0 0 0; }

table.frame-all { border-width: 1px; }

table.frame-sides { border-width: 0 1px; }

table.frame-topbot { border-width: 1px 0; }

th.halign-left, td.halign-left { text-align: left; }

th.halign-right, td.halign-right { text-align: right; }

th.halign-center, td.halign-center { text-align: center; }

th.valign-top, td.valign-top { vertical-align: top; }

th.valign-bottom, td.valign-bottom { vertical-align: bottom; }

th.valign-middle, td.valign-middle { vertical-align: middle; }

table thead th, table tfoot th { font-weight: bold; }

tbody tr th { display: table-cell; line-height: 1.4; background: whitesmoke; }

tbody tr th, tbody tr th p, tfoot tr th, tfoot tr th p { color: #222222; font-weight: bold; }

p.tableblock > code:only-child { background: none; padding: 0; }

p.tableblock { font-size: 1em; }

td > div.verse { white-space: pre; }

ol { margin-left: 2.5em; }

ul li ol { margin-left: 1.5em; }

dl dd { margin-left: 1.125em; }

dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }

ul.unstyled, ol.unnumbered, ul.checklist, ul.none { list-style-type: none; }

ul.unstyled, ol.unnumbered, ul.checklist { margin-left: 0.625em; }

ul.checklist li > p:first-child > .fa-check-square-o:first-child, ul.checklist li > p:first-child > input[type="checkbox"]:first-child { margin-right: 0.25em; }

ul.checklist li > p:first-child > input[type="checkbox"]:first-child { position: relative; top: 1px; }

ul.inline { margin: 0 auto 0.625em auto; margin-left: -1.375em; margin-right: 0; padding: 0; list-style: none; overflow: hidden; }
ul.inline > li { list-style: none; float: left; margin-left: 1.375em; display: block; }
ul.inline > li > * { display: block; }

.unstyled dl dt { font-weight: normal; font-style: normal; }

ol.arabic { list-style-type: decimal; }

ol.decimal { list-style-type: decimal-leading-zero; }

ol.loweralpha { list-style-type: lower-alpha; }

ol.upperalpha { list-style-type: upper-alpha; }

ol.lowerroman { list-style-type: lower-roman; }

ol.upperroman { list-style-type: upper-roman; }

ol.lowergreek { list-style-type: lower-greek; }

.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }

td.hdlist1 { padding-right: .75em; font-weight: bold; }

td.hdlist1, td.hdlist2 { vertical-align: top; }

.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }

.colist > table tr > td:first-of-type { padding: 0 0.75em; line-height: 1; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }

.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }

.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }

.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }

a.image { text-decoration: none; }

span.footnote, span.footnoteref { vertical-align: super; font-size: 0.875em; }
span.footnote a, span.footnoteref a { text-decoration: none; }
span.footnote a:active, span.footnoteref a:active { text-decoration: underline; }

#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -.25em 0 .75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em; line-height: 1.3; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.2em; margin-bottom: .2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }

#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }

.gist .file-data > table { border: 0; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }

div.unbreakable { page-break-inside: avoid; }

.big { font-size: larger; }

.small { font-size: smaller; }

.underline { text-decoration: underline; }

.overline { text-decoration: overline; }

.line-through { text-decoration: line-through; }

.aqua { color: #00bfbf; }

.aqua-background { background-color: #00fafa; }

.black { color: black; }

.black-background { background-color: black; }

.blue { color: #0000bf; }

.blue-background { background-color: #0000fa; }

.fuchsia { color: #bf00bf; }

.fuchsia-background { background-color: #fa00fa; }

.gray { color: #606060; }

.gray-background { background-color: #7d7d7d; }

.green { color: #006000; }

.green-background { background-color: #007d00; }

.lime { color: #00bf00; }

.lime-background { background-color: #00fa00; }

.maroon { color: #600000; }

.maroon-background { background-color: #7d0000; }

.navy { color: #000060; }

.navy-background { background-color: #00007d; }

.olive { color: #606000; }

.olive-background { background-color: #7d7d00; }

.purple { color: #600060; }

.purple-background { background-color: #7d007d; }

.red { color: #bf0000; }

.red-background { background-color: #fa0000; }

.silver { color: #909090; }

.silver-background { background-color: #bcbcbc; }

.teal { color: #006060; }

.teal-background { background-color: #007d7d; }

.white { color: #bfbfbf; }

.white-background { background-color: #fafafa; }

.yellow { color: #bfbf00; }

.yellow-background { background-color: #fafa00; }

span.icon > .fa { cursor: default; }

.admonitionblock td.icon [class^="fa icon-"] { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #207c98; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }

.conum[data-value] { display: inline-block; color: #fff !important; background-color: #222222; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; font-size: 0.75em; width: 1.67em; height: 1.67em; line-height: 1.67em; font-family: "Open Sans", "DejaVu Sans", sans-serif; font-style: normal; font-weight: bold; }
.conum[data-value] * { color: #fff !important; }
.conum[data-value] + b { display: none; }
.conum[data-value]:after { content: attr(data-value); }
pre .conum[data-value] { position: relative; top: -0.125em; }

b.conum * { color: inherit !important; }

.conum:not([data-value]):empty { display: none; }

.literalblock pre, .listingblock pre { background: #eeeeee; }

</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css">
<style>.listingblock .pygments .hll { background-color: #ffffcc }
.listingblock .pygments  { background: #f8f8f8; }
.listingblock .pygments .tok-c { color: #408080; font-style: italic } /* Comment */
.listingblock .pygments .tok-err { border: 1px solid #FF0000 } /* Error */
.listingblock .pygments .tok-k { color: #008000; font-weight: bold } /* Keyword */
.listingblock .pygments .tok-o { color: #666666 } /* Operator */
.listingblock .pygments .tok-cm { color: #408080; font-style: italic } /* Comment.Multiline */
.listingblock .pygments .tok-cp { color: #BC7A00 } /* Comment.Preproc */
.listingblock .pygments .tok-c1 { color: #408080; font-style: italic } /* Comment.Single */
.listingblock .pygments .tok-cs { color: #408080; font-style: italic } /* Comment.Special */
.listingblock .pygments .tok-gd { color: #A00000 } /* Generic.Deleted */
.listingblock .pygments .tok-ge { font-style: italic } /* Generic.Emph */
.listingblock .pygments .tok-gr { color: #FF0000 } /* Generic.Error */
.listingblock .pygments .tok-gh { color: #000080; font-weight: bold } /* Generic.Heading */
.listingblock .pygments .tok-gi { color: #00A000 } /* Generic.Inserted */
.listingblock .pygments .tok-go { color: #888888 } /* Generic.Output */
.listingblock .pygments .tok-gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.listingblock .pygments .tok-gs { font-weight: bold } /* Generic.Strong */
.listingblock .pygments .tok-gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.listingblock .pygments .tok-gt { color: #0044DD } /* Generic.Traceback */
.listingblock .pygments .tok-kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.listingblock .pygments .tok-kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.listingblock .pygments .tok-kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.listingblock .pygments .tok-kp { color: #008000 } /* Keyword.Pseudo */
.listingblock .pygments .tok-kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.listingblock .pygments .tok-kt { color: #B00040 } /* Keyword.Type */
.listingblock .pygments .tok-m { color: #666666 } /* Literal.Number */
.listingblock .pygments .tok-s { color: #BA2121 } /* Literal.String */
.listingblock .pygments .tok-na { color: #7D9029 } /* Name.Attribute */
.listingblock .pygments .tok-nb { color: #008000 } /* Name.Builtin */
.listingblock .pygments .tok-nc { color: #0000FF; font-weight: bold } /* Name.Class */
.listingblock .pygments .tok-no { color: #880000 } /* Name.Constant */
.listingblock .pygments .tok-nd { color: #AA22FF } /* Name.Decorator */
.listingblock .pygments .tok-ni { color: #999999; font-weight: bold } /* Name.Entity */
.listingblock .pygments .tok-ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.listingblock .pygments .tok-nf { color: #0000FF } /* Name.Function */
.listingblock .pygments .tok-nl { color: #A0A000 } /* Name.Label */
.listingblock .pygments .tok-nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.listingblock .pygments .tok-nt { color: #008000; font-weight: bold } /* Name.Tag */
.listingblock .pygments .tok-nv { color: #19177C } /* Name.Variable */
.listingblock .pygments .tok-ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.listingblock .pygments .tok-w { color: #bbbbbb } /* Text.Whitespace */
.listingblock .pygments .tok-mb { color: #666666 } /* Literal.Number.Bin */
.listingblock .pygments .tok-mf { color: #666666 } /* Literal.Number.Float */
.listingblock .pygments .tok-mh { color: #666666 } /* Literal.Number.Hex */
.listingblock .pygments .tok-mi { color: #666666 } /* Literal.Number.Integer */
.listingblock .pygments .tok-mo { color: #666666 } /* Literal.Number.Oct */
.listingblock .pygments .tok-sb { color: #BA2121 } /* Literal.String.Backtick */
.listingblock .pygments .tok-sc { color: #BA2121 } /* Literal.String.Char */
.listingblock .pygments .tok-sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.listingblock .pygments .tok-s2 { color: #BA2121 } /* Literal.String.Double */
.listingblock .pygments .tok-se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.listingblock .pygments .tok-sh { color: #BA2121 } /* Literal.String.Heredoc */
.listingblock .pygments .tok-si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.listingblock .pygments .tok-sx { color: #008000 } /* Literal.String.Other */
.listingblock .pygments .tok-sr { color: #BB6688 } /* Literal.String.Regex */
.listingblock .pygments .tok-s1 { color: #BA2121 } /* Literal.String.Single */
.listingblock .pygments .tok-ss { color: #19177C } /* Literal.String.Symbol */
.listingblock .pygments .tok-bp { color: #008000 } /* Name.Builtin.Pseudo */
.listingblock .pygments .tok-vc { color: #19177C } /* Name.Variable.Class */
.listingblock .pygments .tok-vg { color: #19177C } /* Name.Variable.Global */
.listingblock .pygments .tok-vi { color: #19177C } /* Name.Variable.Instance */
.listingblock .pygments .tok-il { color: #666666 } /* Literal.Number.Integer.Long */
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>AngularJS</h1>
<div class="details">
<span id="author" class="author">Alejandro Such</span><br>
<span id="email" class="email"><a href="mailto:alejandro.such@ua.es">alejandro.such@ua.es</a></span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Índice de contenidos</div>
<ul class="sectlevel1">
<li><a href="#sesion03">3. Scopes</a>
<ul class="sectlevel2">
<li><a href="#_hola_mundo_otra_vez">3.1. Hola mundo (otra vez)</a></li>
<li><a href="#_el_objeto_scope">3.2. El objeto Scope</a>
<ul class="sectlevel3">
<li><a href="#_jerarqu%C3%ADa_y_herencia_de_scopes">3.2.1. Jerarquía y herencia de scopes</a></li>
<li><a href="#_propagaci%C3%B3n_de_eventos">3.2.2. Propagación de eventos</a></li>
<li><a href="#_el_ciclo_de_vida_del_scope">3.2.3. El ciclo de vida del scope</a></li>
</ul>
</li>
<li><a href="#_la_notaci%C3%B3n_controller_as">3.3. La notación controller-as</a>
<ul class="sectlevel3">
<li><a href="#_controladores_como_clases">3.3.1. Controladores como clases</a></li>
<li><a href="#_controladores_anidados">3.3.2. Controladores anidados</a></li>
</ul>
</li>
<li><a href="#_ejercicios">3.4. Ejercicios</a>
<ul class="sectlevel3">
<li><a href="#_calculadora_0_66_puntos">3.4.1. Calculadora (0,66 puntos)</a></li>
<li><a href="#_carrito_de_la_compra_0_67_puntos">3.4.2. Carrito de la compra (0,67 puntos)</a></li>
<li><a href="#_ping_pong_0_67_puntos">3.4.3. Ping-pong (0,67 puntos)</a></li>
<li><a href="#_carrito_de_la_compra_ii_0_66_puntos">3.4.4. Carrito de la compra II (0,66 puntos)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="sesion03">3. Scopes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>La mayoría de las aplicaciones web están basadas en el patrón MVC (Model-View-Controller).
Sin embargo, MVC no es un patrón muy preciso, sino un patrón arquitectural de alto nivel.
Además, existen muchas variaciones del patrón original, siendo los más conocidos MVP y MVVM.
Para añadir un poco más de confusión, muchos frameworks y desarrolladores interpretan estos patrones de manera diferente.
Esto da como resultado que el nombre MVC se use para describir diferentes arquitecturas y aproximaciones.</p>
</div>
<div class="paragraph">
<p>El equipo de AngularJS ha sido más pragmático con su aproximación, definiendo el framework como basado en el patrón MVW (Model-View-Whatever).</p>
</div>
<div class="sect2">
<h3 id="_hola_mundo_otra_vez">3.1. Hola mundo (otra vez)</h3>
<div class="paragraph">
<p>Veamos nuevamente un típico ejemplo de <em>Hola mundo</em> para desgranar todos los elementos que intervienen:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</div></td><td class="code"><span class="tok-cp">&lt;!DOCTYPE html&gt;</span>
<span class="tok-nt">&lt;html&gt;</span>
  <span class="tok-nt">&lt;head&gt;</span>
    <span class="tok-nt">&lt;title&gt;</span>Hola mundo<span class="tok-nt">&lt;/title&gt;</span>
    <span class="tok-nt">&lt;meta</span> <span class="tok-na">charset=</span><span class="tok-s">&quot;UTF-8&quot;</span><span class="tok-nt">&gt;</span>
    <span class="tok-nt">&lt;meta</span> <span class="tok-na">name=</span><span class="tok-s">&quot;viewport&quot;</span> <span class="tok-na">content=</span><span class="tok-s">&quot;width=device-width, initial-scale=1.0&quot;</span><span class="tok-nt">&gt;</span>
  <span class="tok-nt">&lt;/head&gt;</span>
  <span class="tok-nt">&lt;body</span> <span class="tok-na">ng-app=</span><span class="tok-s">&quot;holaMundo&quot;</span><span class="tok-nt">&gt;</span>
    <span class="tok-nt">&lt;div</span> <span class="tok-na">ng-controller=</span><span class="tok-s">&quot;SaludaCtrl&quot;</span><span class="tok-nt">&gt;</span>
      Saluda a: <span class="tok-nt">&lt;input</span> <span class="tok-na">type=</span><span class="tok-s">&quot;text&quot;</span> <span class="tok-na">ng-model=</span><span class="tok-s">&quot;nombre&quot;</span> <span class="tok-nt">/&gt;&lt;br/&gt;&lt;br/&gt;</span>
      <span class="tok-nt">&lt;h1&gt;</span>¡Hola, {{ nombre }}!<span class="tok-nt">&lt;/h1&gt;</span>
    <span class="tok-nt">&lt;/div&gt;</span>

    <span class="tok-nt">&lt;script </span><span class="tok-na">src=</span><span class="tok-s">&quot;/angular.js/angular.js&quot;</span> <span class="tok-na">type=</span><span class="tok-s">&quot;text/javascript&quot;</span><span class="tok-nt">&gt;&lt;/script&gt;</span>
    <span class="tok-nt">&lt;script&gt;</span>
      <span class="tok-nx">angular</span>
        <span class="tok-p">.</span><span class="tok-nx">module</span><span class="tok-p">(</span><span class="tok-s1">&#39;holaMundo&#39;</span><span class="tok-p">,</span> <span class="tok-p">[])</span>
        <span class="tok-p">.</span><span class="tok-nx">controller</span><span class="tok-p">(</span><span class="tok-s1">&#39;SaludaCtrl&#39;</span><span class="tok-p">,</span> <span class="tok-kd">function</span><span class="tok-p">(</span><span class="tok-nx">$scope</span><span class="tok-p">){</span>
          <span class="tok-nx">$scope</span><span class="tok-p">.</span><span class="tok-nx">nombre</span> <span class="tok-o">=</span> <span class="tok-s1">&#39;mundo&#39;</span><span class="tok-p">;</span>
        <span class="tok-p">});</span>
    <span class="tok-nt">&lt;/script&gt;</span>
  <span class="tok-nt">&lt;/body&gt;</span>
<span class="tok-nt">&lt;/html&gt;</span>
</td></tr></table></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_el_objeto_scope">3.2. El objeto Scope</h3>
<div class="paragraph">
<p>Siempre que queramos exponer un modelo a la vista (plantilla), haremos uso del objeto <code>$scope</code>.
Para ello, simplemente deberemos asignar nuevas propiedades a una instancia de este objeto.
Al hacerlo, ya estarán los valores disponibles en la plantilla.</p>
</div>
<div class="paragraph">
<p>Además, podemos también exponer funcionalidades a la vista, asociando funciones como propiedades de un <code>$scope</code>.
Por ejemplo, podríamos crear un <em>getter</em> para la variable <code>nombre</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</div></td><td class="code"><span class="tok-cp">&lt;!DOCTYPE html&gt;</span>
<span class="tok-nt">&lt;html&gt;</span>
  <span class="tok-nt">&lt;head&gt;</span>
    <span class="tok-nt">&lt;title&gt;</span>Hola mundo<span class="tok-nt">&lt;/title&gt;</span>
    <span class="tok-nt">&lt;meta</span> <span class="tok-na">charset=</span><span class="tok-s">&quot;UTF-8&quot;</span><span class="tok-nt">&gt;</span>
    <span class="tok-nt">&lt;meta</span> <span class="tok-na">name=</span><span class="tok-s">&quot;viewport&quot;</span> <span class="tok-na">content=</span><span class="tok-s">&quot;width=device-width, initial-scale=1.0&quot;</span><span class="tok-nt">&gt;</span>
  <span class="tok-nt">&lt;/head&gt;</span>
  <span class="tok-nt">&lt;body</span> <span class="tok-na">ng-app=</span><span class="tok-s">&quot;holaMundo&quot;</span><span class="tok-nt">&gt;</span>
    <span class="tok-nt">&lt;div</span> <span class="tok-na">ng-controller=</span><span class="tok-s">&quot;SaludaCtrl&quot;</span><span class="tok-nt">&gt;</span>
      Saluda a: <span class="tok-nt">&lt;input</span> <span class="tok-na">type=</span><span class="tok-s">&quot;text&quot;</span> <span class="tok-na">ng-model=</span><span class="tok-s">&quot;nombre&quot;</span> <span class="tok-nt">/&gt;&lt;br/&gt;&lt;br/&gt;</span>
      <span class="tok-nt">&lt;h1&gt;</span>¡Hola, {{ getNombre() }}!<span class="tok-nt">&lt;/h1&gt;</span>
    <span class="tok-nt">&lt;/div&gt;</span>

    <span class="tok-nt">&lt;script </span><span class="tok-na">src=</span><span class="tok-s">&quot;/angular.js/angular.js&quot;</span> <span class="tok-na">type=</span><span class="tok-s">&quot;text/javascript&quot;</span><span class="tok-nt">&gt;&lt;/script&gt;</span>
    <span class="tok-nt">&lt;script&gt;</span>
      <span class="tok-nx">angular</span>
        <span class="tok-p">.</span><span class="tok-nx">module</span><span class="tok-p">(</span><span class="tok-s1">&#39;holaMundo&#39;</span><span class="tok-p">,</span> <span class="tok-p">[])</span>
        <span class="tok-p">.</span><span class="tok-nx">controller</span><span class="tok-p">(</span><span class="tok-s1">&#39;SaludaCtrl&#39;</span><span class="tok-p">,</span> <span class="tok-kd">function</span><span class="tok-p">(</span><span class="tok-nx">$scope</span><span class="tok-p">){</span>
          <span class="tok-nx">$scope</span><span class="tok-p">.</span><span class="tok-nx">nombre</span> <span class="tok-o">=</span> <span class="tok-s1">&#39;mundo&#39;</span><span class="tok-p">;</span>

          <span class="tok-nx">$scope</span><span class="tok-p">.</span><span class="tok-nx">getNombre</span> <span class="tok-o">=</span> <span class="tok-kd">function</span><span class="tok-p">()</span> <span class="tok-p">{</span>
            <span class="tok-k">return</span> <span class="tok-nx">$scope</span><span class="tok-p">.</span><span class="tok-nx">nombre</span><span class="tok-p">.</span><span class="tok-nx">toUpperCase</span><span class="tok-p">();</span>
          <span class="tok-p">};</span>
        <span class="tok-p">});</span>
    <span class="tok-nt">&lt;/script&gt;</span>
  <span class="tok-nt">&lt;/body&gt;</span>
<span class="tok-nt">&lt;/html&gt;</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>De esta forma, podemos controlar precisamente qué parte del modelo y qué operaciones queremos exponer a la capa de presentación.
Conceptualmente, un $scope tiene un comportamiento muy similar al de un <em>ViewModel</em> en el patrón MVVM.</p>
</div>
<div class="sect3">
<h4 id="_jerarquía_y_herencia_de_scopes">3.2.1. Jerarquía y herencia de scopes</h4>
<div class="paragraph">
<p>Cuando iniciamos una aplicación con AngularJS, se genera un scope a nivel de aplicación, llamado $rootScope.
Desde ese momento, todo nuevo scope será hijo del $rootScope.</p>
</div>
<div class="paragraph">
<p>Podemos instanciar un nuevo $scope en cualquier momento a través del método $new(). Cuando lo instanciamos, un $scope hereda las propiedades de su padre, como vemos en este ejemplo:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="javascript"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</div></td><td class="code">  <span class="tok-kd">var</span> <span class="tok-nx">padre</span> <span class="tok-o">=</span> <span class="tok-nx">$rootScope</span><span class="tok-p">;</span>
  <span class="tok-kd">var</span> <span class="tok-nx">hijo</span> <span class="tok-o">=</span> <span class="tok-nx">padre</span><span class="tok-p">.</span><span class="tok-nx">$new</span><span class="tok-p">();</span>

  <span class="tok-nx">padre</span><span class="tok-p">.</span><span class="tok-nx">saludo</span> <span class="tok-o">=</span> <span class="tok-s2">&quot;Hola&quot;</span><span class="tok-p">;</span>
  <span class="tok-nx">hijo</span><span class="tok-p">.</span><span class="tok-nx">nombre</span> <span class="tok-o">=</span> <span class="tok-s2">&quot;Mundo&quot;</span><span class="tok-p">;</span>

  <span class="tok-nx">console</span><span class="tok-p">.</span><span class="tok-nx">log</span><span class="tok-p">(</span><span class="tok-nx">hijo</span><span class="tok-p">.</span><span class="tok-nx">saludo</span><span class="tok-p">);</span> <span class="tok-c1">// --&gt; &#39;Hola&#39;</span>

  <span class="tok-nx">hijo</span><span class="tok-p">.</span><span class="tok-nx">saludo</span> <span class="tok-o">=</span> <span class="tok-s2">&quot;Bienvenido&quot;</span><span class="tok-p">;</span>

  <span class="tok-nx">console</span><span class="tok-p">.</span><span class="tok-nx">log</span><span class="tok-p">(</span><span class="tok-nx">hijo</span><span class="tok-p">.</span><span class="tok-nx">saludo</span><span class="tok-p">);</span> <span class="tok-c1">// --&gt; &#39;Bienvenido&#39;</span>
  <span class="tok-nx">console</span><span class="tok-p">.</span><span class="tok-nx">log</span><span class="tok-p">(</span><span class="tok-nx">padre</span><span class="tok-p">.</span><span class="tok-nx">saludo</span><span class="tok-p">);</span> <span class="tok-c1">// --&gt; &#39;Hola&#39;</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Como hemos visto, podemos instanciar un nuevo scope en cualquier momento, lo normal es que AngularJS lo haga por nosotros cuando lo necesitemos.
Por ejemplo, la directiva ngController instancia un nuevo scope, que será el que inyecte en el controlador.
En este caso, el scope será hijo del $rootScope.</p>
</div>
<div class="paragraph">
<p>A las directivas que crean nuevos <em>scopes</em> se las conoce como <em>scope creating directives</em>, y como hemos dicho será el propio AngularJS el encargado de crear los scopes por nosotros cuando se encuentre con una de estas directivas en el árbol del DOM.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Los scopes forman una estructura de árbol, cuya raíz siempre será el <code>$rootScope</code>. Como la creación de scopes, está dirigida por el árbol del DOM, no debería resultar extraño que el árbol de scopes imite de alguna manera el árbol del DOM.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Ahora que sabemos que algunas directivas crean nuevos scopes hijos, quizá nos preguntemos por qué tanta complejidad.
Para entenderlo, echemos un ojo a este ejemplo que utiliza la directiva <code>ng-repeat</code>:</p>
</div>
<div class="paragraph">
<p>El controlador sería:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="javascript"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv">1
2
3
4
5
6
7</div></td><td class="code"><span class="tok-kd">var</span> <span class="tok-nx">peopleCtrl</span> <span class="tok-o">=</span> <span class="tok-kd">function</span><span class="tok-p">(</span><span class="tok-nx">$scope</span><span class="tok-p">){</span>
  <span class="tok-nx">$scope</span><span class="tok-p">.</span><span class="tok-nx">people</span> <span class="tok-o">=</span> <span class="tok-p">[</span>
    <span class="tok-p">{</span> <span class="tok-nx">name</span><span class="tok-o">:</span><span class="tok-s1">&#39;Alex&#39;</span><span class="tok-p">,</span> <span class="tok-nx">subject</span><span class="tok-o">:</span> <span class="tok-s1">&#39;Angular&#39;</span><span class="tok-p">,</span> <span class="tok-nx">hours</span><span class="tok-o">:</span> <span class="tok-mi">20</span><span class="tok-p">},</span>
    <span class="tok-p">{</span> <span class="tok-nx">name</span><span class="tok-o">:</span><span class="tok-s1">&#39;Otto&#39;</span><span class="tok-p">,</span> <span class="tok-nx">subject</span><span class="tok-o">:</span> <span class="tok-s1">&#39;Backbone&#39;</span><span class="tok-p">,</span> <span class="tok-nx">hours</span><span class="tok-o">:</span> <span class="tok-mi">20</span><span class="tok-p">},</span>
    <span class="tok-p">{</span> <span class="tok-nx">name</span><span class="tok-o">:</span><span class="tok-s1">&#39;Domingo&#39;</span><span class="tok-p">,</span> <span class="tok-nx">subject</span><span class="tok-o">:</span> <span class="tok-s1">&#39;JPA&#39;</span><span class="tok-p">,</span> <span class="tok-nx">hours</span><span class="tok-o">:</span> <span class="tok-mi">15</span><span class="tok-p">}</span>
  <span class="tok-p">];</span>
<span class="tok-p">};</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Nuestra plantilla tendría la siguiente forma:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv">1
2
3</div></td><td class="code"><span class="tok-nt">&lt;ul</span> <span class="tok-na">ng-controller=</span><span class="tok-s">&quot;peopleCtrl&quot;</span><span class="tok-nt">&gt;</span>
  <span class="tok-nt">&lt;li</span> <span class="tok-na">ng-repeat=</span><span class="tok-s">&quot;person in people&quot;</span><span class="tok-nt">&gt;</span>{{person.name}} da la asignatura: {{person.subject}} ({{ person.hours}} horas)<span class="tok-nt">&lt;/li&gt;</span>
<span class="tok-nt">&lt;/ul&gt;</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>La directiva <code>ng-repeat</code> nos permite iterar sobre una colección de, en este caso, personas.
Mientras itera, irá creando nuevos elementos en el DOM.
El problema es que si utilizáramos el mismo <code>$scope</code>, estaríamos sobreescribiendo el valor de la variable <code>persona</code>.
AngularJS soluciona este problema creando un nuevo <code>$scope</code> para cada elemento de la colección.
Como se ha comentado, los scopes generan una jerarquía en forma de árbol, similar a la de los elementos del DOM.
La extensión de AngularJS para Chrome nos permite verla:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/ses03/scopes.png" alt="scopes" width="66%">
</div>
</div>
<div class="paragraph">
<p>Podemos ver en el pantallazo que cada <em>scope</em> (delimitado por un recuadro rojo) tiene su propio conjunto de valores del modelo.
Así, cada item tiene su propio <em>namespace</em>, donde cada <code>&lt;li&gt;</code> posee un <code>scope</code> propio donde se puede definir la variable <code>person</code>.</p>
</div>
<div class="paragraph">
<p>Otra característica interesante de los objetos <code>scope</code> es que toda propiedad que
definamos en un <code>scope</code> será visible para sus descendientes. Es muy interesante
porque hace que no sea necesario redefinir elementos a medida que creamos scopes
hijos.</p>
</div>
<div class="paragraph">
<p>Siguiendo con el ejemplo anterior, podemos calcular, en el <code>scope</code> del controlador padre,
el número total de horas en base al conjunto de gente:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="javascript"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv">1
2
3</div></td><td class="code"><span class="tok-nx">$scope</span><span class="tok-p">.</span><span class="tok-nx">hours</span> <span class="tok-o">=</span> <span class="tok-nx">$scope</span><span class="tok-p">.</span><span class="tok-nx">people</span><span class="tok-p">.</span><span class="tok-nx">reduce</span><span class="tok-p">(</span><span class="tok-kd">function</span><span class="tok-p">(</span><span class="tok-nx">value</span><span class="tok-p">,</span> <span class="tok-nx">person</span><span class="tok-p">){</span>
  <span class="tok-k">return</span> <span class="tok-nx">value</span> <span class="tok-err">`</span> <span class="tok-nx">person</span><span class="tok-p">.</span><span class="tok-nx">hours</span><span class="tok-p">;</span>
<span class="tok-p">},</span> <span class="tok-mi">0</span><span class="tok-p">);</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>En este caso, se ha hecho uso del método <em>reduce</em> de un Array.</p>
</div>
<div class="paragraph">
<p>Este método fue introducido en la <a href="http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf">versión 5 de ECMAScript</a>, con lo que puede haber
problemas de retrocompatibilidad con algunos navegadores. <a href="http://kangax.github.io/compat-table/es5/#Array.prototype.reduce">Aquí</a> podemos ver
una tabla de compatibilidad de todas las funciones de ECMAScript 5 con los navegadores
más usados del mercado.</p>
</div>
<div class="paragraph">
<p>La mayoría de estas funciones pueden implementarse en los navegadores que no las
soportan de primeras, maximizando así la compatibilidad. Existen multiud de librerías
que ya las implementan. Una de ellas es <a href="https://github.com/es-shims/es5-shim">es5-shim</a>.</p>
</div>
<div class="paragraph">
<p>Siempre que se necesite hacer uso de estas funcionalidades y sea necesaria retrocompatibilidad,
es muy recomendable usar librerías de este tipo.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Como habíamos comentado, este total de horas se propagará a los ámbitos hijos,
que podrán hacer uso de él para, por ejemplo, determinar el porcentaje del total
que supondrá cada asignatura:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv">1
2
3</div></td><td class="code"><span class="tok-nt">&lt;ul</span> <span class="tok-na">ng-controller=</span><span class="tok-s">&quot;PeopleCtrl&quot;</span><span class="tok-nt">&gt;</span>
    <span class="tok-nt">&lt;li</span> <span class="tok-na">ng-repeat=</span><span class="tok-s">&quot;person in people&quot;</span><span class="tok-nt">&gt;</span>{{person.name}} da la asignatura: {{person.subject}} ({{ person.hours}} horas - {{person.hours / hours * 100 | number:2}}%)<span class="tok-nt">&lt;/li&gt;</span>
<span class="tok-nt">&lt;/ul&gt;</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>La herencia de scopes sigue el mismo patrón que la herencia prototípica de JavaScript:
si no encontramos una propiedad en el objeto, subimos por el árbol de la jerarquía hasta
dar con ella.</p>
</div>
<div class="paragraph">
<p>La herencia resulta muy sencilla de usar cuando estamos leyendo, pero sin embargo
cuando estamos escribiendo puede darnos algún problema. Supongamos el siguiente
bloque de código:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</div></td><td class="code"><span class="tok-nt">&lt;div</span> <span class="tok-na">ng-app=</span><span class="tok-s">&quot;myApp&quot;</span><span class="tok-nt">&gt;</span>
 <span class="tok-nt">&lt;form</span> <span class="tok-na">name=</span><span class="tok-s">&quot;myForm&quot;</span> <span class="tok-na">ng-controller=</span><span class="tok-s">&quot;Ctrl&quot;</span><span class="tok-nt">&gt;</span>
 Input dentro de un switch:
 <span class="tok-nt">&lt;span</span> <span class="tok-na">ng-switch=</span><span class="tok-s">&quot;show&quot;</span><span class="tok-nt">&gt;</span>
     <span class="tok-nt">&lt;input</span> <span class="tok-na">ng-switch-when=</span><span class="tok-s">&quot;true&quot;</span> <span class="tok-na">type=</span><span class="tok-s">&quot;text&quot;</span> <span class="tok-na">ng-model=</span><span class="tok-s">&quot;myModel&quot;</span> <span class="tok-nt">/&gt;</span>
 <span class="tok-nt">&lt;/span&gt;</span>
     <span class="tok-nt">&lt;br/&gt;</span>
 Input fuera del switch:
 <span class="tok-nt">&lt;input</span> <span class="tok-na">type=</span><span class="tok-s">&quot;text&quot;</span> <span class="tok-na">ng-model=</span><span class="tok-s">&quot;myModel&quot;</span> <span class="tok-nt">/&gt;</span>
     <span class="tok-nt">&lt;br/&gt;</span>
 Valor:
 {{myModel}}
 <span class="tok-nt">&lt;/form&gt;</span>
<span class="tok-nt">&lt;/div&gt;</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="javascript"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv">1
2
3
4
5
6</div></td><td class="code"><span class="tok-nx">angular</span>
  <span class="tok-p">.</span><span class="tok-nx">module</span><span class="tok-p">(</span><span class="tok-s1">&#39;myApp&#39;</span><span class="tok-p">)</span>
  <span class="tok-p">.</span><span class="tok-nx">controllert</span><span class="tok-p">(</span><span class="tok-s1">&#39;Ctrl&#39;</span><span class="tok-p">,</span> <span class="tok-kd">function</span> <span class="tok-nx">Ctrl</span><span class="tok-p">(</span><span class="tok-nx">$scope</span><span class="tok-p">)</span> <span class="tok-p">{</span>
       <span class="tok-nx">$scope</span><span class="tok-p">.</span><span class="tok-nx">show</span> <span class="tok-o">=</span> <span class="tok-kc">true</span><span class="tok-p">;</span>
       <span class="tok-nx">$scope</span><span class="tok-p">.</span><span class="tok-nx">myModel</span> <span class="tok-o">=</span> <span class="tok-s1">&#39;hello&#39;</span><span class="tok-p">;</span>
  <span class="tok-p">});</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Si manipulamos el segundo <code>input</code>, todos los elementos se modificarán a la vez.
Pero, ¿qué sucede si modificamos el primero, y luego el segundo nuevamente? Parece
como que el primero queda <em>desconectado</em> del resto. De hecho, se crea una nueva
variable en el <code>scope</code> hijo que hace que esto funcione de esta manera. Podéis hacer la
prueba usando el inspector de AngularJS para Chrome.</p>
</div>
<div class="paragraph">
<p>Esto se debe a la herencia prototípica (<em>prototipal inheritance</em> a partir de ahora)
de JavaScript, y todas las reglas que se aplican a ésta, se aplican a los scopes,
que al fin y al cabo son objetos JavaScript. El <code>scope</code> no es el modelo, sino que
referencia al modelo. Por tanto, en el momento que modificamos el primer input,
que tiene un <code>scope</code> propio, estamos referenciando a un nuevo modelo.</p>
</div>
<div class="paragraph">
<p>Esto es fácil de solucionar, haciendo uso de objetos. Podemos redeclarar el
objeto <code>myModel</code> de la siguiente manera:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="javascript"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv">1
2
3
4
5
6</div></td><td class="code"><span class="tok-nx">angular</span>
  <span class="tok-p">.</span><span class="tok-nx">module</span><span class="tok-p">(</span><span class="tok-s1">&#39;myApp&#39;</span><span class="tok-p">)</span>
  <span class="tok-p">.</span><span class="tok-nx">controllert</span><span class="tok-p">(</span><span class="tok-s1">&#39;Ctrl&#39;</span><span class="tok-p">,</span> <span class="tok-kd">function</span> <span class="tok-nx">Ctrl</span><span class="tok-p">(</span><span class="tok-nx">$scope</span><span class="tok-p">)</span> <span class="tok-p">{</span>
     <span class="tok-nx">$scope</span><span class="tok-p">.</span><span class="tok-nx">show</span> <span class="tok-o">=</span> <span class="tok-kc">true</span><span class="tok-p">;</span>
     <span class="tok-nx">$scope</span><span class="tok-p">.</span><span class="tok-nx">myModel</span> <span class="tok-o">=</span> <span class="tok-p">{</span> <span class="tok-nx">value</span><span class="tok-o">:</span> <span class="tok-s1">&#39;hello&#39;</span><span class="tok-p">};</span>
  <span class="tok-p">});</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Y usarlo así en nuestra vista:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</div></td><td class="code"><span class="tok-nt">&lt;div</span> <span class="tok-na">ng-app=</span><span class="tok-s">&quot;myApp&quot;</span><span class="tok-nt">&gt;</span>
 <span class="tok-nt">&lt;form</span> <span class="tok-na">name=</span><span class="tok-s">&quot;myForm&quot;</span> <span class="tok-na">ng-controller=</span><span class="tok-s">&quot;Ctrl&quot;</span><span class="tok-nt">&gt;</span>
 Input dentro de un switch:
 <span class="tok-nt">&lt;span</span> <span class="tok-na">ng-switch=</span><span class="tok-s">&quot;show&quot;</span><span class="tok-nt">&gt;</span>
     <span class="tok-nt">&lt;input</span> <span class="tok-na">ng-switch-when=</span><span class="tok-s">&quot;true&quot;</span> <span class="tok-na">type=</span><span class="tok-s">&quot;text&quot;</span> <span class="tok-na">ng-model=</span><span class="tok-s">&quot;myModel.value&quot;</span> <span class="tok-nt">/&gt;</span>
 <span class="tok-nt">&lt;/span&gt;</span>
     <span class="tok-nt">&lt;br/&gt;</span>
 Input fuera del switch:
 <span class="tok-nt">&lt;input</span> <span class="tok-na">type=</span><span class="tok-s">&quot;text&quot;</span> <span class="tok-na">ng-model=</span><span class="tok-s">&quot;myModel.value&quot;</span> <span class="tok-nt">/&gt;</span>
     <span class="tok-nt">&lt;br/&gt;</span>
 Valor:
 {{ myModel.value }}
 <span class="tok-nt">&lt;/form&gt;</span>
<span class="tok-nt">&lt;/div&gt;</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>De esta manera, estaremos referenciando siempre al mismo objeto y no tendremos
elementos desconectados sin querer.</p>
</div>
<div class="paragraph">
<p>Existe otra manera, que es hacer uso del elemento <code>parent</code>. Éste hace referencia
al ámbito padre, y lo podríamos llamar de la siguiente manera en el <em>switch</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv">1
2
3</div></td><td class="code"><span class="tok-nt">&lt;span</span> <span class="tok-na">ng-switch=</span><span class="tok-s">&quot;show&quot;</span><span class="tok-nt">&gt;</span>
    <span class="tok-nt">&lt;input</span> <span class="tok-na">ng-switch-when=</span><span class="tok-s">&quot;true&quot;</span> <span class="tok-na">type=</span><span class="tok-s">&quot;text&quot;</span> <span class="tok-na">ng-model=</span><span class="tok-s">&quot;$parent.myModel&quot;</span> <span class="tok-nt">/&gt;</span>
<span class="tok-nt">&lt;/span&gt;</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Sin embargo, esto resolvería nuestros problemas sólo si el dato estuviera en el
ámbito padre, no si el padre también lo hubiera heredado. Además, no podemos estar
seguros al 100% que <code>parent</code> va a ser el ámbito superior, ya que puede que estemos
empleando alguna directiva que haya creado un <code>scope</code> adicional.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Podemos encontrar más información acerca de esto en <a href="https://github.com/angular/angular.js/wiki/Understanding-Scopes">este enlace</a></p>
</div>
<div class="paragraph">
<p>También, <a href="https://www.youtube.com/watch?v=ZhfUv0spHCY&amp;t=29m19s">en este vídeo</a>, Miško Hevery
hace una serie de reflexiones sobre cómo trabajar con los scopes.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_propagación_de_eventos">3.2.2. Propagación de eventos</h4>
<div class="paragraph">
<p>Como hemos comentado, en nuestra aplicación se generará un árbol de objetos <code>scope</code>
similar a la estructura del DOM. En la raíz de este árbol se encuentra el objeto
<code>$rootScope</code></p>
</div>
<div class="paragraph">
<p>Podemos usar esta jerarquía para transmitir eventos dentro del árbol, tanto en
dirección ascendente con el método <code>scope.$emit</code> como descendente con <code>scope.$broadcast</code>.</p>
</div>
<div class="paragraph">
<p>La captura de estos eventos se realiza con el método <code>scope.$on</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="img/ses03/eventos.png" alt="eventos" width="66%">
</div>
</div>
<div class="paragraph">
<p>La función <code>scope.$emit(name, args);</code> envía un evento hacia arriba en la jearquía,
notificando a todos los <em>listeners</em>. El ciclo de vida del evento comienza en aquel
<code>scope</code> que ha llamado a <code>$emit</code>. Este evento irá hacia arriba hasta llegar al
<code>$rootScope</code>, y todos los que hayan dado de alta un <em>listener</em> y estén en el camino
del evento serán notificados. Los suscritos a un evento pueden cancelarlo.</p>
</div>
<div class="paragraph">
<p>Por su parte, la función <code>scope.$broadcast(name, args);</code> envía un evento hacia abajo
en la jearquía, notificando todos los <em>listeners</em> herederos.</p>
</div>
<div class="paragraph">
<p>Ambos métodos tienen los mismos argumentos:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Param</th>
<th class="tableblock halign-left valign-top">Tipo</th>
<th class="tableblock halign-left valign-top">Detalles</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>string</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nombre del evento que se propaga.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>args</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Uno o más argumentos, que se propagarán con el evento.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Para suscribirnos a un evento, lo hacemos con <code>scope.$on(eventName, listener)</code> .
Los parámetros son:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Param</th>
<th class="tableblock halign-left valign-top">Tipo</th>
<th class="tableblock halign-left valign-top">Detalles</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>string</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Nombre del evento al que nos suscribimos</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>listener</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>function(event, &#8230;&#8203;args)</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Función a invocar cuando se recibe el evento.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>El objeto <code>event</code> que se le pasa al listener tiene los siguientes atributos:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>targetScope</code>: el <code>scope</code> en el que el evento fue emitido o difundido</p>
</li>
<li>
<p><code>currentScope</code>: el <code>scope</code> que maneja el evento.</p>
</li>
<li>
<p><code>name</code>: nombre del evento</p>
</li>
<li>
<p><code>stopPropagation</code>: esta función cancela el evneto y hace que no se siga propagando.</p>
</li>
<li>
<p><code>preventDefault</code>: establece el <em>flag</em> <code>defaultPrevented</code> a <code>true</code>.</p>
</li>
<li>
<p><code>defaultPrevented</code>: valdrá <code>true</code> si se ha llamado a la función <code>preventDefault</code>.</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_eventos_de_angularjs">Eventos de AngularJS</h5>
<div class="paragraph">
<p>Dentro del framework, existen tres eventos que se emiten</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>$includeContentRequested</code></p>
</li>
<li>
<p><code>$includeContentLoaded</code></p>
</li>
<li>
<p><code>$viewContentLoaded</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>y siente eventos que se difunden</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>$locationChangeStart</code></p>
</li>
<li>
<p><code>$locationChangeSuccess</code></p>
</li>
<li>
<p><code>$routeUpdate</code></p>
</li>
<li>
<p><code>$routeChangeStart</code></p>
</li>
<li>
<p><code>$routeChangeSuccess</code></p>
</li>
<li>
<p><code>$routeChangeError</code></p>
</li>
<li>
<p><code>$destroy</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Podemos ver que se usan escasamemnte en el <em>core</em> de AngularJS. Pese a ser una
manera sencilla de intercambiar datos entre controladores, debemos evaluar si es
la mejor opción. Por ejemplo, en muchos casos puede ser útil el uso del <em>two-way data binding</em>
para obtener una solución más sencilla.</p>
</div>
<div class="paragraph">
<p>Esto nos lleva a otro método interesante del objeto <code>scope</code>. Es el método <code>watch(watchExpression, [listener], [objectEquality])</code>,
que registra un <em>listener</em> que se ejecuta cada vez que el resultado de la expresión
<em>watchExpression</em> cambia.</p>
</div>
<div class="paragraph">
<p>La función <code>watchExpression</code> se llama en cada iteración del ciclo de vida de Angular,
y debe devolver el valor que queramos observar.</p>
</div>
<div class="paragraph">
<p>El <code>listener</code> se ejecuta sólo cuando el valor de la <code>watchExpression</code> ha variado
desde su última ejecución. Esta inecualidad se determina según la función <a href="https://docs.angularjs.org/api/ng/function/angular.equals">angular.equals</a>
También, se hace uso de la función <a href="https://docs.angularjs.org/api/ng/function/angular.copy">angular.copy</a>
para guardar el objeto, para utilizarlo en la siguiente iteración de la comparación.
La <code>watchExpression</code> debe ser lo más sencilla posible, ya que de otra
manera podríamos tener problemas de rendimiento de rendimiento y memoria.</p>
</div>
<div class="paragraph">
<p>El <code>listener</code> puede modificar el modelo si así lo desea, lo que podría implicar
la activación de otros <em>listeners</em>, re-lanzando los <em>watchers</em> hasta que no se detecta
ningún cambio. Para prevenir entrar en bucles infinitos, existe un límite de re-lanzado
de iteraciones, que es 10.</p>
</div>
<div class="paragraph">
<p>El siguiente ejemplo hace uso de una expresión y de una función de evaluación para
observar una serie de cambios, y realizar una acción al respecto, que será contabilizar
el número de cambios realizados sobre la variable.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45</div></td><td class="code"><span class="tok-cp">&lt;!DOCTYPE html&gt;</span>
<span class="tok-nt">&lt;html</span> <span class="tok-na">ng-app=</span><span class="tok-s">&quot;ses03.watch&quot;</span><span class="tok-nt">&gt;</span>
<span class="tok-nt">&lt;head</span> <span class="tok-na">lang=</span><span class="tok-s">&quot;en&quot;</span><span class="tok-nt">&gt;</span>
    <span class="tok-nt">&lt;meta</span> <span class="tok-na">charset=</span><span class="tok-s">&quot;UTF-8&quot;</span><span class="tok-nt">&gt;</span>
    <span class="tok-nt">&lt;title&gt;&lt;/title&gt;</span>
<span class="tok-nt">&lt;/head&gt;</span>
<span class="tok-nt">&lt;body</span> <span class="tok-na">ng-controller=</span><span class="tok-s">&quot;WatchCtrl&quot;</span><span class="tok-nt">&gt;</span>
<span class="tok-nt">&lt;p&gt;</span> <span class="tok-nt">&lt;label&gt;</span>Nombre <span class="tok-nt">&lt;input</span> <span class="tok-na">type=</span><span class="tok-s">&quot;text&quot;</span> <span class="tok-na">ng-model=</span><span class="tok-s">&quot;name&quot;</span><span class="tok-nt">/&gt;&lt;/label&gt;</span> <span class="tok-nt">&lt;/p&gt;</span>

<span class="tok-nt">&lt;p&gt;</span> Contador de cambios en el nombre: {{ counter }} <span class="tok-nt">&lt;/p&gt;</span>

<span class="tok-nt">&lt;p&gt;</span> <span class="tok-nt">&lt;label&gt;</span>Alimento <span class="tok-nt">&lt;input</span> <span class="tok-na">type=</span><span class="tok-s">&quot;text&quot;</span> <span class="tok-na">ng-model=</span><span class="tok-s">&quot;food&quot;</span><span class="tok-nt">/&gt;&lt;/label&gt;</span> <span class="tok-nt">&lt;/p&gt;</span>

<span class="tok-nt">&lt;p&gt;</span> Contador de cambios en el alimento: {{ foodCounter }} <span class="tok-nt">&lt;/p&gt;</span>

<span class="tok-nt">&lt;script </span><span class="tok-na">src=</span><span class="tok-s">&quot;//ajax.googleapis.com/ajax/libs/angularjs/1.2.19/angular.min.js&quot;</span><span class="tok-nt">&gt;&lt;/script&gt;</span>
<span class="tok-nt">&lt;script&gt;</span>
    <span class="tok-nx">angular</span>
            <span class="tok-p">.</span><span class="tok-nx">module</span><span class="tok-p">(</span><span class="tok-s1">&#39;ses03.watch&#39;</span><span class="tok-p">,</span> <span class="tok-p">[])</span>
            <span class="tok-p">.</span><span class="tok-nx">controller</span><span class="tok-p">(</span><span class="tok-s1">&#39;WatchCtrl&#39;</span><span class="tok-p">,</span> <span class="tok-kd">function</span> <span class="tok-p">(</span><span class="tok-nx">$scope</span><span class="tok-p">)</span> <span class="tok-p">{</span>
                <span class="tok-nx">$scope</span><span class="tok-p">.</span><span class="tok-nx">name</span> <span class="tok-o">=</span> <span class="tok-s1">&#39;alex&#39;</span><span class="tok-p">;</span>
                <span class="tok-nx">$scope</span><span class="tok-p">.</span><span class="tok-nx">counter</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>

                <span class="tok-c1">//Usaremos una expresión para evaluar</span>
                <span class="tok-nx">$scope</span><span class="tok-p">.</span><span class="tok-nx">$watch</span><span class="tok-p">(</span><span class="tok-s1">&#39;name&#39;</span><span class="tok-p">,</span> <span class="tok-kd">function</span> <span class="tok-p">(</span><span class="tok-nx">newValue</span><span class="tok-p">,</span> <span class="tok-nx">oldValue</span><span class="tok-p">)</span> <span class="tok-p">{</span>
                    <span class="tok-nx">$scope</span><span class="tok-p">.</span><span class="tok-nx">counter</span><span class="tok-o">++</span><span class="tok-p">;</span>
                <span class="tok-p">});</span>


                <span class="tok-c1">// Usaremos una función para evaluar</span>
                <span class="tok-nx">$scope</span><span class="tok-p">.</span><span class="tok-nx">food</span> <span class="tok-o">=</span> <span class="tok-s1">&#39;paella&#39;</span><span class="tok-p">;</span>
                <span class="tok-nx">$scope</span><span class="tok-p">.</span><span class="tok-nx">foodCounter</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
                <span class="tok-nx">$scope</span><span class="tok-p">.</span><span class="tok-nx">$watch</span><span class="tok-p">(</span>
                        <span class="tok-kd">function</span> <span class="tok-p">()</span> <span class="tok-p">{</span> <span class="tok-k">return</span> <span class="tok-nx">$scope</span><span class="tok-p">.</span><span class="tok-nx">food</span><span class="tok-p">.</span><span class="tok-nx">length</span><span class="tok-p">;</span> <span class="tok-p">},</span> <span class="tok-c1">//Función de evaluación</span>

                        <span class="tok-kd">function</span> <span class="tok-p">(</span><span class="tok-nx">newValue</span><span class="tok-p">,</span> <span class="tok-nx">oldValue</span><span class="tok-p">)</span> <span class="tok-p">{</span> <span class="tok-c1">//Listener</span>
                            <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-nx">newValue</span> <span class="tok-o">!==</span> <span class="tok-nx">oldValue</span><span class="tok-p">)</span> <span class="tok-p">{</span>
                                <span class="tok-nx">$scope</span><span class="tok-p">.</span><span class="tok-nx">foodCounter</span><span class="tok-o">++</span><span class="tok-p">;</span>
                            <span class="tok-p">}</span>
                        <span class="tok-p">}</span>
                <span class="tok-p">);</span>
            <span class="tok-p">});</span>
<span class="tok-nt">&lt;/script&gt;</span>
<span class="tok-nt">&lt;/body&gt;</span>
<span class="tok-nt">&lt;/html&gt;</span>
</td></tr></table></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_el_ciclo_de_vida_del_scope">3.2.3. El ciclo de vida del scope</h4>
<div class="paragraph">
<p>El flujo normal de un browser cuando se recibe un evento es que éste termine llamando a una
función JavaScript de <em>callback</em>. Una vez ésta ha finalizado, el browser renderiza
el DOM de nuevo y espera a recibir más eventos.</p>
</div>
<div class="paragraph">
<p>Cuando se hace esta llamada JavaScript al navegador, el código se ejecuta fuera
del contexto de ejecución de AngularJS, lo que significa que AngularJS no tiene ni
idea de que se haya modificado el modelo. Para poder procesar estas modificaciones
en el modelo, hay que hacer que todo lo que se ha hecho fuera del contexto de ejecución
de AngularJS entre dentro de él a través del método <code>$apply</code>. Sólo las modificaciones del
modelo que hagamos dentro de un método <code>$apply</code> serán tenidas en cuenta por AngularJS.
Por ejemplo, una directiva como <code>ng-click</code> que escucha eventos del DOM, debe evaluar la expresión
dentro de un método <code>$apply</code>. Así lo podemos ver <a href="https://github.com/angular/angular.js/blob/master/src/ng/directive/ngEventDirs.js#L50">En su código fuente</a>.</p>
</div>
<div class="paragraph">
<p>Tras evaluar la expresión el método <code>$apply</code> realiza un <code>$digest</code>. En esta fase, el
<code>scope</code> examina todas las expresiones <code>$watch</code> y compara sus resultados con los
valores previos de manera asíncrona. Esto significa que una asignación como <code>$scope.username = 'admin'</code>
no lanzará inmediatamente el listener de <code>$watch('username')</code>. En lugar de eso, se
retrasará hasta la fase de <code>$digest</code>, de manera que se unifican las actualizaciones
 del modelo, y se garantiza que se ejecute una función <code>$watch</code> a la vez. Si un
<code>$watch</code> cambia el modelo, forzará un ciclo <code>$digest</code> adicional.</p>
</div>
<div class="paragraph">
<p>Esto podemos resumirlo en las cinco fases por las que pasa una aplicación en AngularJS:</p>
</div>
<div class="sect4">
<h5 id="_creación">Creación</h5>
<div class="paragraph">
<p>El <code>$injector</code> crea el objeto <code>rootScope</code> durante el <em>application bootstrap</em>.
Cuando se produce el linkado de plantillas, algunas directivas crearán nuevos scopes.</p>
</div>
</div>
<div class="sect4">
<h5 id="_registro_de_watchers">Registro de watchers</h5>
<div class="paragraph">
<p>Durante el linkado de plantillas, las directivas suelen registrar <em>watchers</em>. Éstos
se usarán para propagar los valores del modelo al DOM.</p>
</div>
</div>
<div class="sect4">
<h5 id="_mutación_del_modelo">Mutación del modelo</h5>
<div class="paragraph">
<p>Para observar correctamente las mutaciones, habría que hacerlo dentro de <code>scope.$apply()</code>.
Afortunadamente para nosotros, la API de AngularJS lo hace implícitamente, de manera
que no es necesario hacerlo dentro de nuestros controladores si estamos realizando
alguna tarea síncrona, o si estamos realizando tareas asíncronas con los servicios <code>$http</code>,
<code>$timeout</code> o <code>$interval</code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_observación_de_la_mutación">Observación de la mutación</h5>
<div class="paragraph">
<p>Al final de <code>$apply</code>, AngularJS realiza un ciclo <code>$digest</code> en el <code>rootScope</code> que
se propagará posteriormente a todos los hijos. Durante este ciclo, todas las expresiones
en un <code>$watch</code> se evaluarán para observar cambios en el modelo y, si esta se detecta,
se invocará al <em>listener</em>.</p>
</div>
</div>
<div class="sect4">
<h5 id="_destrucción">Destrucción</h5>
<div class="paragraph">
<p>Cuando no se necesita más un <code>scope</code> hijo, su creador tiene la responsabilidad de
destruirlo mediante una llamada a <code>scope.destroy()</code>. Esto detendrá la propagación
llamadas <code>$digest</code> al hijo, y permitirá la llamada al recolector de basura para eliminar
la memoria usada.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_la_notación_controller_as">3.3. La notación controller-as</h3>
<div class="paragraph">
<p>Hasta ahora, los controladores que hemos visto son una especie de clases que gestionan los cambios entre el modelo y la vista, utilizando el objeto scope para esta comunicación.</p>
</div>
<div class="paragraph">
<p>Desde la versión 1.2 de AngularJS, podemos desvincular el Controlador aún más del scope. Veamos el siguiente ejemplo:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="javascript"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv">1
2
3
4
5
6</div></td><td class="code"><span class="tok-o">---</span>
<span class="tok-c1">// &lt;div ng-controller=&quot;MainCtrl&quot;&gt;&lt;/div&gt;</span>
<span class="tok-nx">app</span><span class="tok-p">.</span><span class="tok-nx">controller</span><span class="tok-p">(</span><span class="tok-s1">&#39;MainCtrl&#39;</span><span class="tok-p">,</span> <span class="tok-kd">function</span> <span class="tok-p">(</span><span class="tok-nx">$scope</span><span class="tok-p">)</span> <span class="tok-p">{</span>
  <span class="tok-nx">$scope</span><span class="tok-p">.</span><span class="tok-nx">title</span> <span class="tok-o">=</span> <span class="tok-s1">&#39;Título&#39;</span><span class="tok-p">;</span>
<span class="tok-p">});</span>
<span class="tok-o">---</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Y comparémoslo con el siguiente, donde el Controlador está totalmente desvinculado del $scope:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="javascript"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv">1
2
3
4
5</div></td><td class="code"><span class="tok-o">---</span>
<span class="tok-nx">app</span><span class="tok-p">.</span><span class="tok-nx">controller</span><span class="tok-p">(</span><span class="tok-s1">&#39;MainCtrl&#39;</span><span class="tok-p">,</span> <span class="tok-kd">function</span> <span class="tok-p">()</span> <span class="tok-p">{</span>
  <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">title</span> <span class="tok-o">=</span> <span class="tok-s1">&#39;Some title&#39;</span><span class="tok-p">;</span>
<span class="tok-p">});</span>
<span class="tok-o">---</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_controladores_como_clases">3.3.1. Controladores como clases</h4>
<div class="paragraph">
<p>Podemos instanciar una <em>clase</em> en JavaScript de la siguiente manera:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="javascript"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv">1
2
3
4</div></td><td class="code"><span class="tok-o">---</span>
<span class="tok-kd">var</span> <span class="tok-nx">myClass</span> <span class="tok-o">=</span> <span class="tok-kd">function</span> <span class="tok-p">()</span> <span class="tok-p">{</span>
  <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">title</span> <span class="tok-o">=</span> <span class="tok-s1">&#39;Class title&#39;</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>var myInstance = new myClass();
---</p>
</div>
<div class="paragraph">
<p>De esta manera podemos utilizar la instancia myInstance para acceder a métodos y propiedades de la clase.  Ésto mismo es lo que nos permite la sintaxis <em>Controller As</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="javascript"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv">1
2
3
4
5
6</div></td><td class="code"><span class="tok-o">---</span>
<span class="tok-c1">// we declare as usual, just using the `this` Object instead of `$scope`</span>
<span class="tok-nx">app</span><span class="tok-p">.</span><span class="tok-nx">controller</span><span class="tok-p">(</span><span class="tok-s1">&#39;MainCtrl&#39;</span><span class="tok-p">,</span> <span class="tok-kd">function</span> <span class="tok-p">()</span> <span class="tok-p">{</span>
  <span class="tok-k">this</span><span class="tok-p">.</span><span class="tok-nx">title</span> <span class="tok-o">=</span> <span class="tok-s1">&#39;Some title&#39;</span><span class="tok-p">;</span>
<span class="tok-p">});</span>
<span class="tok-o">---</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Cuando instanciamos un controlador en el DOM, tenemos que hacerlo contra una variable:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="javascript"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv">1
2
3
4
5
6</div></td><td class="code"><span class="tok-o">---</span>
<span class="tok-o">&lt;</span><span class="tok-nx">div</span> <span class="tok-nx">ng</span><span class="tok-o">-</span><span class="tok-nx">controller</span><span class="tok-o">=</span><span class="tok-s2">&quot;MainCtrl as main&quot;</span><span class="tok-o">&gt;</span>
  <span class="tok-c1">// MainCtrl no esiste, sólo la instancia &#39;main&#39;</span>
  <span class="tok-p">{{</span> <span class="tok-nx">main</span><span class="tok-p">.</span><span class="tok-nx">title</span> <span class="tok-p">}}</span>
<span class="tok-o">&lt;</span><span class="tok-err">/div&gt;</span>
<span class="tok-o">---</span>
</td></tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_controladores_anidados">3.3.2. Controladores anidados</h4>
<div class="paragraph">
<p>Cuando tenemos controladores anidados es cuando vemos las ventajas de la sintaxis <em>controller as</em>. Muchas veces tenemos que acceder a la propiedad $parent del scope en que nos encontramos para obtener lo que queremos:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</div></td><td class="code">---
<span class="tok-nt">&lt;div</span> <span class="tok-na">ng-controller=</span><span class="tok-s">&quot;MainCtrl&quot;</span><span class="tok-nt">&gt;</span>
  {{ title }}
  <span class="tok-nt">&lt;div</span> <span class="tok-na">ng-controller=</span><span class="tok-s">&quot;AnotherCtrl&quot;</span><span class="tok-nt">&gt;</span>
    {{ title }}
    <span class="tok-nt">&lt;div</span> <span class="tok-na">ng-controller=</span><span class="tok-s">&quot;YetAnotherCtrl&quot;</span><span class="tok-nt">&gt;</span>
      {{ title }}
    <span class="tok-nt">&lt;/div&gt;</span>
  <span class="tok-nt">&lt;/div&gt;</span>
<span class="tok-nt">&lt;/div&gt;</span>
---
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Aquí podemos hacernos un lío y no saber muy bien a qué variable <em>title</em> estamos accediendo. Sin embargo, con la sintaxis <em>controller as</em> estamos definiendo un <em>namespace</em> que nos clarifica perfectamente a qué estamos accediendo:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</div></td><td class="code">---
<span class="tok-nt">&lt;div</span> <span class="tok-na">ng-controller=</span><span class="tok-s">&quot;MainCtrl as main&quot;</span><span class="tok-nt">&gt;</span>
  {{ main.title }}
  <span class="tok-nt">&lt;div</span> <span class="tok-na">ng-controller=</span><span class="tok-s">&quot;AnotherCtrl as another&quot;</span><span class="tok-nt">&gt;</span>
    {{ another.title }}
    <span class="tok-nt">&lt;div</span> <span class="tok-na">ng-controller=</span><span class="tok-s">&quot;YetAnotherCtrl as yet&quot;</span><span class="tok-nt">&gt;</span>
      {{ yet.title }}
    <span class="tok-nt">&lt;/div&gt;</span>
  <span class="tok-nt">&lt;/div&gt;</span>
<span class="tok-nt">&lt;/div&gt;</span>
---
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Con esta mecánica también podemos acceder a los <em>scopes</em> padres de una manera sencilla:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</div></td><td class="code">---
<span class="tok-nt">&lt;div</span> <span class="tok-na">ng-controller=</span><span class="tok-s">&quot;MainCtrl&quot;</span><span class="tok-nt">&gt;</span>
  {{ title }}
  <span class="tok-nt">&lt;div</span> <span class="tok-na">ng-controller=</span><span class="tok-s">&quot;AnotherCtrl&quot;</span><span class="tok-nt">&gt;</span>
    Scope title: {{ title }}
    Parent title: {{ $parent.title }}
    <span class="tok-nt">&lt;div</span> <span class="tok-na">ng-controller=</span><span class="tok-s">&quot;YetAnotherCtrl&quot;</span><span class="tok-nt">&gt;</span>
      {{ title }}
      Parent title: {{ $parent.title }}
      Parent parent title: {{ $parent.$parent.title }}
    <span class="tok-nt">&lt;/div&gt;</span>
  <span class="tok-nt">&lt;/div&gt;</span>
<span class="tok-nt">&lt;/div&gt;</span>
---
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>E incluso hacer cosas más mágicas:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</div></td><td class="code">---
<span class="tok-nt">&lt;div</span> <span class="tok-na">ng-controller=</span><span class="tok-s">&quot;MainCtrl as main&quot;</span><span class="tok-nt">&gt;</span>
  {{ main.title }}
  <span class="tok-nt">&lt;div</span> <span class="tok-na">ng-controller=</span><span class="tok-s">&quot;AnotherCtrl as another&quot;</span><span class="tok-nt">&gt;</span>
    Scope title: {{ another.title }}
    Parent title: {{ main.title }}
    <span class="tok-nt">&lt;div</span> <span class="tok-na">ng-controller=</span><span class="tok-s">&quot;YetAnotherCtrl as yet&quot;</span><span class="tok-nt">&gt;</span>
      Scope title: {{ yet.title }}
      Parent title: {{ another.title }}
      Parent parent title: {{ main.title }}
    <span class="tok-nt">&lt;/div&gt;</span>
  <span class="tok-nt">&lt;/div&gt;</span>
<span class="tok-nt">&lt;/div&gt;</span>
---
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>No hacky $parent calls. If a Controller’s position in the DOM/stack were to change, the position in sequential $parent.$parent.$parent.$parent may change! Accessing the scope lexically makes perfect sense.</p>
</div>
<div class="paragraph">
<p>$watchers/$scope methods
The first time I used the Controller as syntax I was like “yeah, awesome!”, but then to use scope watchers or methods (such as $watch, $broadcast, $on etc.) we need to dependency inject $scope. Gargh, this is what we tried so hard to get away from. But then I realised this was awesome.</p>
</div>
<div class="paragraph">
<p>The way the Controller as syntax works, is by binding the Controller to the current $scope rather than it being all one $scope-like class-like Object. For me, the key is the separation between the class and special Angular features.</p>
</div>
<div class="paragraph">
<p>This means I can have my pretty class-like Controller:</p>
</div>
<div class="paragraph">
<p>app.controller('MainCtrl', function () {
  this.title = 'Some title';
});
When I need something above and beyond generic bindings, I introduce the magnificent $scope dependency to do something special, rather than ordinary.</p>
</div>
<div class="paragraph">
<p>Those special things include all the $scope methods, let’s look at an example:</p>
</div>
<div class="paragraph">
<p>app.controller('MainCtrl', function ($scope) {
  this.title = 'Some title';
  $scope.$on('someEventFiredFromElsewhere', function (event, data) {
    // do something!
  });
});
Ironing a quirk
Interestingly enough, whilst writing this I wanted to provide a $scope.$watch() example. Doing this usually is very simple, but using the Controller as syntax doesn’t work quite as expected:</p>
</div>
<div class="paragraph">
<p>app.controller('MainCtrl', function ($scope) {
  this.title = 'Some title';
  // doesn&#8217;t work!
  $scope.$watch('title', function (newVal, oldVal) {});
  // doesn&#8217;t work!
  $scope.$watch('this.title', function (newVal, oldVal) {});
});
Uh oh! So what do we do? Interestingly enough I was reading the other day, and you can actually pass in a function as the first argument of a $watch():</p>
</div>
<div class="paragraph">
<p>app.controller('MainCtrl', function ($scope) {
  this.title = 'Some title';
  // hmmm, a function
  $scope.$watch(function () {}, function (newVal, oldVal) {});
});
Which means we can return our this.title reference:</p>
</div>
<div class="paragraph">
<p>app.controller('MainCtrl', function ($scope) {
  this.title = 'Some title';
  // nearly there&#8230;&#8203;
  $scope.$watch(function () {
    return this.title; // <code>this</code> isn&#8217;t the <code>this</code> above!!
  }, function (newVal, oldVal) {});
});
Let’s change some execution context using angular.bind():</p>
</div>
<div class="paragraph">
<p>app.controller('MainCtrl', function ($scope) {
  this.title = 'Some title';
  // boom
  $scope.$watch(angular.bind(this, function () {
    return this.title; // <code>this</code> IS the <code>this</code> above!!
  }), function (newVal, oldVal) {
    // now we will pickup changes to newVal and oldVal
  });
});</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ejercicios">3.4. Ejercicios</h3>
<div class="paragraph">
<p>Aplica el <em>tag</em> <code>scopes</code> a la versión que quieres que se corrija.</p>
</div>
<div class="sect3">
<h4 id="_calculadora_0_66_puntos">3.4.1. Calculadora (0,66 puntos)</h4>
<div class="paragraph">
<p>Este ejercicio lo realizaremos en una carpeta llamada <code>calculator</code>.</p>
</div>
<div class="paragraph">
<p>Completa el siguiente código para implementar una calculadora que haga sumas, restas, multiplicaciones y divisiones.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</div></td><td class="code"><span class="tok-nt">&lt;div</span> <span class="tok-na">ng-app=</span><span class="tok-s">&quot;calculatorApp&quot;</span><span class="tok-nt">&gt;</span>
  <span class="tok-nt">&lt;h1&gt;</span>Calculadora<span class="tok-nt">&lt;/h1&gt;</span>

  <span class="tok-nt">&lt;div</span> <span class="tok-na">ng-controller=</span><span class="tok-s">&quot;CalcController&quot;</span><span class="tok-nt">&gt;</span>
    <span class="tok-nt">&lt;div&gt;</span>
      <span class="tok-nt">&lt;label&gt;</span>Primer operando <span class="tok-nt">&lt;input</span> <span class="tok-na">type=</span><span class="tok-s">&quot;number&quot;</span> <span class="tok-nt">/&gt;&lt;/label&gt;</span>
    <span class="tok-nt">&lt;/div&gt;</span>
    <span class="tok-nt">&lt;div&gt;</span>
      <span class="tok-nt">&lt;label&gt;</span>Segundo operando operando <span class="tok-nt">&lt;input</span> <span class="tok-na">type=</span><span class="tok-s">&quot;number&quot;</span> <span class="tok-nt">/&gt;&lt;/label&gt;</span>
    <span class="tok-nt">&lt;/div&gt;</span>
    <span class="tok-nt">&lt;div&gt;</span>
      <span class="tok-nt">&lt;button</span> <span class="tok-na">ng-click=</span><span class="tok-s">&quot;&quot;</span><span class="tok-nt">&gt;</span>Suma<span class="tok-nt">&lt;/button&gt;</span>
      <span class="tok-nt">&lt;button</span> <span class="tok-na">ng-click=</span><span class="tok-s">&quot;&quot;</span><span class="tok-nt">&gt;</span>Resta<span class="tok-nt">&lt;/button&gt;</span>
      <span class="tok-nt">&lt;button</span> <span class="tok-na">ng-click=</span><span class="tok-s">&quot;&quot;</span><span class="tok-nt">&gt;</span>Multiplicación<span class="tok-nt">&lt;/button&gt;</span>
      <span class="tok-nt">&lt;button</span> <span class="tok-na">ng-click=</span><span class="tok-s">&quot;&quot;</span><span class="tok-nt">&gt;</span>División<span class="tok-nt">&lt;/button&gt;</span>
    <span class="tok-nt">&lt;/div&gt;</span>
    <span class="tok-nt">&lt;h2&gt;</span>Resultado: XXX<span class="tok-nt">&lt;/h2&gt;</span>
  <span class="tok-nt">&lt;/div&gt;</span>
<span class="tok-nt">&lt;/div&gt;</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="javascript"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</div></td><td class="code"><span class="tok-nx">angular</span>
  <span class="tok-p">.</span><span class="tok-nx">module</span><span class="tok-p">(</span><span class="tok-s1">&#39;calculatorApp&#39;</span><span class="tok-p">,</span> <span class="tok-p">[])</span>
  <span class="tok-p">.</span><span class="tok-nx">controller</span><span class="tok-p">(</span><span class="tok-s1">&#39;CalcController&#39;</span><span class="tok-p">,</span> <span class="tok-kd">function</span> <span class="tok-nx">CalcController</span><span class="tok-p">(</span><span class="tok-nx">$scope</span><span class="tok-p">)</span> <span class="tok-p">{</span>
    <span class="tok-nx">$scope</span><span class="tok-p">.</span><span class="tok-nx">add</span> <span class="tok-o">=</span> <span class="tok-kd">function</span><span class="tok-p">()</span> <span class="tok-p">{</span>

    <span class="tok-p">};</span>

    <span class="tok-nx">$scope</span><span class="tok-p">.</span><span class="tok-nx">substract</span> <span class="tok-o">=</span> <span class="tok-kd">function</span><span class="tok-p">(</span><span class="tok-nx">a</span><span class="tok-p">,</span><span class="tok-nx">b</span><span class="tok-p">)</span> <span class="tok-p">{</span>

    <span class="tok-p">};</span>

    <span class="tok-nx">$scope</span><span class="tok-p">.</span><span class="tok-nx">divide</span> <span class="tok-o">=</span> <span class="tok-kd">function</span><span class="tok-p">()</span> <span class="tok-p">{</span>

    <span class="tok-p">};</span>

    <span class="tok-nx">$scope</span><span class="tok-p">.</span><span class="tok-nx">multiply</span> <span class="tok-o">=</span> <span class="tok-kd">function</span><span class="tok-p">(</span><span class="tok-nx">a</span><span class="tok-p">,</span><span class="tok-nx">b</span><span class="tok-p">)</span> <span class="tok-p">{</span>

    <span class="tok-p">};</span>
  <span class="tok-p">})</span>
</td></tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_carrito_de_la_compra_0_67_puntos">3.4.2. Carrito de la compra (0,67 puntos)</h4>
<div class="paragraph">
<p>Este ejercicio lo realizaremos en una carpeta llamada <code>shoppingcart</code>.</p>
</div>
<div class="paragraph">
<p>Vamos a hacer uso de la función <code>$watch</code> que nos ofrece el <code>scope</code> para implementar un sencillo carro de la compra.</p>
</div>
<div class="paragraph">
<p>Disponemos de una plantilla ya hecha, que muestra un listado de productos (generados aleatoriamente con <a href="http://beta.json-generator.com/OpatzFu">JSON Generator</a>). También, disponemos de un controlador  donde tenemos el listado de productos, una serie de variables y una función <code>addToCart</code> vacía.</p>
</div>
<div class="paragraph">
<p>Tendremos que implementar la función <code>addToCart</code>, para que añada ítems al carro. Además, implementaremos un <em>watcher</em> que observará cambios en el tamaño de dicho array. Cuando éstos se produzcan, actualizaremos la variable <code>$scope.totalItems</code> al número de ítems del carro. También, actualizaremos el valor de la variable <code>$scope.total</code>, con el importe total de los productos. Se recomienda hacer uso de la función <a href="https://developer.mozilla.org/es/docs/Web/JavaScript/Referencia/Objetos_globales/Array/reduce"><code>Array.prototype.reduce</code></a> para calcular este total.</p>
</div>
<div class="paragraph">
<p>La plantilla de nuestro índice será:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</div></td><td class="code"><span class="tok-nt">&lt;div</span> <span class="tok-na">ng-app=</span><span class="tok-s">&quot;org.expertojava.carrito&quot;</span><span class="tok-nt">&gt;</span>
  <span class="tok-nt">&lt;div</span> <span class="tok-na">ng-controller=</span><span class="tok-s">&quot;CartCtrl&quot;</span><span class="tok-nt">&gt;</span>
    <span class="tok-nt">&lt;h2&gt;</span>{{totalItems}} ítems en la cesta ({{total}} <span class="tok-ni">&amp;euro;</span>)<span class="tok-nt">&lt;/h2&gt;</span>
    <span class="tok-nt">&lt;div</span> <span class="tok-na">ng-repeat=</span><span class="tok-s">&quot;product in products&quot;</span> <span class="tok-na">style=</span><span class="tok-s">&quot;float:left&quot;</span><span class="tok-nt">&gt;</span>
      <span class="tok-nt">&lt;div&gt;</span>
        <span class="tok-nt">&lt;img</span> <span class="tok-na">ng-src=</span><span class="tok-s">&quot;{{product.picture}}&quot;</span> <span class="tok-na">alt=</span><span class="tok-s">&quot;&quot;</span> <span class="tok-nt">/&gt;</span>
        <span class="tok-nt">&lt;p&gt;</span>
          {{product.brand}} {{product.name}}
          <span class="tok-nt">&lt;br/&gt;</span>
          {{product.price}} <span class="tok-ni">&amp;euro;</span>
        <span class="tok-nt">&lt;/p&gt;</span>
        <span class="tok-nt">&lt;button</span> <span class="tok-na">ng-click=</span><span class="tok-s">&quot;addToCart(product)&quot;</span><span class="tok-nt">&gt;</span>Añadir a la cesta<span class="tok-nt">&lt;/button&gt;</span>
      <span class="tok-nt">&lt;/div&gt;</span>
    <span class="tok-nt">&lt;/div&gt;</span>
  <span class="tok-nt">&lt;/div&gt;</span>
<span class="tok-nt">&lt;/div&gt;</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Por su parte, la plantilla de nuestro controlador será:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="javascript"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv">  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176</div></td><td class="code"><span class="tok-nx">angular</span>
  <span class="tok-p">.</span><span class="tok-nx">module</span><span class="tok-p">(</span><span class="tok-s1">&#39;org.expertojava.carrito&#39;</span><span class="tok-p">,</span> <span class="tok-p">[])</span>
  <span class="tok-p">.</span><span class="tok-nx">controller</span><span class="tok-p">(</span><span class="tok-s1">&#39;CartCtrl&#39;</span><span class="tok-p">,</span> <span class="tok-kd">function</span> <span class="tok-nx">CartCtrl</span><span class="tok-p">(</span><span class="tok-nx">$scope</span><span class="tok-p">)</span> <span class="tok-p">{</span>
    <span class="tok-nx">$scope</span><span class="tok-p">.</span><span class="tok-nx">total</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-nx">$scope</span><span class="tok-p">.</span><span class="tok-nx">totalItems</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-nx">$scope</span><span class="tok-p">.</span><span class="tok-nx">cart</span> <span class="tok-o">=</span> <span class="tok-p">[];</span>

    <span class="tok-nx">$scope</span><span class="tok-p">.</span><span class="tok-nx">addToCart</span> <span class="tok-o">=</span> <span class="tok-kd">function</span><span class="tok-p">(</span><span class="tok-nx">product</span><span class="tok-p">){</span>
      <span class="tok-c1">//TODO: ADD TO CART</span>
    <span class="tok-p">};</span>

    <span class="tok-c1">//TODO: WATCH</span>

    <span class="tok-nx">$scope</span><span class="tok-p">.</span><span class="tok-nx">products</span> <span class="tok-o">=</span> <span class="tok-p">[</span>
      <span class="tok-p">{</span>
          <span class="tok-s2">&quot;_id&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;54c688af49814edb036a2c33&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;price&quot;</span><span class="tok-o">:</span> <span class="tok-mf">145.4</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;picture&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;http://lorempixel.com/200/200/food/?id=846.9758&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;brand&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;adidas&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;name&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;Zone Job&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;rating&quot;</span><span class="tok-o">:</span> <span class="tok-mi">4</span>
      <span class="tok-p">},</span>
      <span class="tok-p">{</span>
          <span class="tok-s2">&quot;_id&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;54c688afeffb1bad23bea9f7&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;price&quot;</span><span class="tok-o">:</span> <span class="tok-mf">137.24</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;picture&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;http://lorempixel.com/200/200/technics/?id=155.1389&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;brand&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;nike&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;name&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;Zoomair&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;rating&quot;</span><span class="tok-o">:</span> <span class="tok-mi">0</span>
      <span class="tok-p">},</span>
      <span class="tok-p">{</span>
          <span class="tok-s2">&quot;_id&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;54c688af5f342fa2c06d2f3b&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;price&quot;</span><span class="tok-o">:</span> <span class="tok-mf">80.47</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;picture&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;http://lorempixel.com/200/200/food/?id=927.9926&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;brand&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;reebok&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;name&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;Volit&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;rating&quot;</span><span class="tok-o">:</span> <span class="tok-mi">2</span>
      <span class="tok-p">},</span>
      <span class="tok-p">{</span>
          <span class="tok-s2">&quot;_id&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;54c688afbe7e2107363d0945&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;price&quot;</span><span class="tok-o">:</span> <span class="tok-mf">93.53</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;picture&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;http://lorempixel.com/200/200/animals/?id=387.7504&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;brand&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;nike&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;name&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;Konkis&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;rating&quot;</span><span class="tok-o">:</span> <span class="tok-mi">4</span>
      <span class="tok-p">},</span>
      <span class="tok-p">{</span>
          <span class="tok-s2">&quot;_id&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;54c688af92223b7f877f096f&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;price&quot;</span><span class="tok-o">:</span> <span class="tok-mf">94.82</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;picture&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;http://lorempixel.com/200/200/nightlife/?id=296.9771&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;brand&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;adidas&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;name&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;Stockstring&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;rating&quot;</span><span class="tok-o">:</span> <span class="tok-mi">3</span>
      <span class="tok-p">},</span>
      <span class="tok-p">{</span>
          <span class="tok-s2">&quot;_id&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;54c688af24de4b9fc39e0d48&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;price&quot;</span><span class="tok-o">:</span> <span class="tok-mf">109.24</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;picture&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;http://lorempixel.com/200/200/city/?id=427.4133&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;brand&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;adidas&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;name&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;Dong-Phase&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;rating&quot;</span><span class="tok-o">:</span> <span class="tok-mi">1</span>
      <span class="tok-p">},</span>
      <span class="tok-p">{</span>
          <span class="tok-s2">&quot;_id&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;54c688afee99272b911e93fd&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;price&quot;</span><span class="tok-o">:</span> <span class="tok-mf">92.19</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;picture&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;http://lorempixel.com/200/200/nature/?id=580.5475&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;brand&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;adidas&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;name&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;Duozoozap&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;rating&quot;</span><span class="tok-o">:</span> <span class="tok-mi">0</span>
      <span class="tok-p">},</span>
      <span class="tok-p">{</span>
          <span class="tok-s2">&quot;_id&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;54c688af3593d3f6a34bc2a4&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;price&quot;</span><span class="tok-o">:</span> <span class="tok-mf">82.37</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;picture&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;http://lorempixel.com/200/200/nightlife/?id=366.9091&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;brand&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;reebok&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;name&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;X-dom&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;rating&quot;</span><span class="tok-o">:</span> <span class="tok-mi">3</span>
      <span class="tok-p">},</span>
      <span class="tok-p">{</span>
          <span class="tok-s2">&quot;_id&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;54c688af804d847b847935ac&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;price&quot;</span><span class="tok-o">:</span> <span class="tok-mf">76.53</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;picture&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;http://lorempixel.com/200/200/nature/?id=971.7978&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;brand&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;nike&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;name&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;Konkis&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;rating&quot;</span><span class="tok-o">:</span> <span class="tok-mi">3</span>
      <span class="tok-p">},</span>
      <span class="tok-p">{</span>
          <span class="tok-s2">&quot;_id&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;54c688af96ba1759662c4274&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;price&quot;</span><span class="tok-o">:</span> <span class="tok-mf">90.01</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;picture&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;http://lorempixel.com/200/200/city/?id=37.581&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;brand&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;reebok&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;name&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;Ecooveit&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;rating&quot;</span><span class="tok-o">:</span> <span class="tok-mi">4</span>
      <span class="tok-p">},</span>
      <span class="tok-p">{</span>
          <span class="tok-s2">&quot;_id&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;54c688afa4ee53c977c9ca3a&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;price&quot;</span><span class="tok-o">:</span> <span class="tok-mf">81.28</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;picture&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;http://lorempixel.com/200/200/transport/?id=752.8523&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;brand&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;adidas&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;name&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;Superstrong&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;rating&quot;</span><span class="tok-o">:</span> <span class="tok-mi">1</span>
      <span class="tok-p">},</span>
      <span class="tok-p">{</span>
          <span class="tok-s2">&quot;_id&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;54c688af85e103fa79c83752&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;price&quot;</span><span class="tok-o">:</span> <span class="tok-mf">134.79</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;picture&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;http://lorempixel.com/200/200/fashion/?id=358.5133&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;brand&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;reebok&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;name&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;Superstrong&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;rating&quot;</span><span class="tok-o">:</span> <span class="tok-mi">5</span>
      <span class="tok-p">},</span>
      <span class="tok-p">{</span>
          <span class="tok-s2">&quot;_id&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;54c688af04a986612841b7dc&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;price&quot;</span><span class="tok-o">:</span> <span class="tok-mf">76.37</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;picture&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;http://lorempixel.com/200/200/cats/?id=912.0469&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;brand&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;reebok&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;name&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;Fresh-Home&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;rating&quot;</span><span class="tok-o">:</span> <span class="tok-mi">0</span>
      <span class="tok-p">},</span>
      <span class="tok-p">{</span>
          <span class="tok-s2">&quot;_id&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;54c688af5605253556078cff&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;price&quot;</span><span class="tok-o">:</span> <span class="tok-mf">147.47</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;picture&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;http://lorempixel.com/200/200/transport/?id=884.8266&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;brand&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;adidas&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;name&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;Touch-Hold&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;rating&quot;</span><span class="tok-o">:</span> <span class="tok-mi">2</span>
      <span class="tok-p">},</span>
      <span class="tok-p">{</span>
          <span class="tok-s2">&quot;_id&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;54c688afa71c0978b878efd6&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;price&quot;</span><span class="tok-o">:</span> <span class="tok-mf">106.83</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;picture&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;http://lorempixel.com/200/200/fashion/?id=598.1251&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;brand&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;nike&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;name&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;Saorunlab&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;rating&quot;</span><span class="tok-o">:</span> <span class="tok-mi">2</span>
      <span class="tok-p">},</span>
      <span class="tok-p">{</span>
          <span class="tok-s2">&quot;_id&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;54c688af0450426ca2d7680a&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;price&quot;</span><span class="tok-o">:</span> <span class="tok-mf">72.76</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;picture&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;http://lorempixel.com/200/200/food/?id=831.3375&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;brand&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;adidas&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;name&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;Konkis&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;rating&quot;</span><span class="tok-o">:</span> <span class="tok-mi">1</span>
      <span class="tok-p">},</span>
      <span class="tok-p">{</span>
          <span class="tok-s2">&quot;_id&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;54c688afe30ff32f443e7c20&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;price&quot;</span><span class="tok-o">:</span> <span class="tok-mf">83.46</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;picture&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;http://lorempixel.com/200/200/sports/?id=604.4555&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;brand&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;adidas&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;name&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;Rank Sololax&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;rating&quot;</span><span class="tok-o">:</span> <span class="tok-mi">5</span>
      <span class="tok-p">},</span>
      <span class="tok-p">{</span>
          <span class="tok-s2">&quot;_id&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;54c688afd24500b5cbc85148&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;price&quot;</span><span class="tok-o">:</span> <span class="tok-mf">77.19</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;picture&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;http://lorempixel.com/200/200/abstract/?id=333.8619&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;brand&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;reebok&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;name&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;Ecooveit&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;rating&quot;</span><span class="tok-o">:</span> <span class="tok-mi">0</span>
      <span class="tok-p">},</span>
      <span class="tok-p">{</span>
          <span class="tok-s2">&quot;_id&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;54c688afb08a3950c86aa47f&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;price&quot;</span><span class="tok-o">:</span> <span class="tok-mf">82.05</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;picture&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;http://lorempixel.com/200/200/food/?id=118.5947&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;brand&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;nike&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;name&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;Zonedex&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;rating&quot;</span><span class="tok-o">:</span> <span class="tok-mi">5</span>
      <span class="tok-p">},</span>
      <span class="tok-p">{</span>
          <span class="tok-s2">&quot;_id&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;54c688af234056a9e3f5c902&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;price&quot;</span><span class="tok-o">:</span> <span class="tok-mf">100.76</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;picture&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;http://lorempixel.com/200/200/technics/?id=20.7657&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;brand&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;reebok&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;name&quot;</span><span class="tok-o">:</span> <span class="tok-s2">&quot;Saorunlab&quot;</span><span class="tok-p">,</span>
          <span class="tok-s2">&quot;rating&quot;</span><span class="tok-o">:</span> <span class="tok-mi">0</span>
      <span class="tok-p">}</span>
    <span class="tok-p">];</span>
  <span class="tok-p">});</span>
</td></tr></table></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ping_pong_0_67_puntos">3.4.3. Ping-pong (0,67 puntos)</h4>
<div class="paragraph">
<p>Este ejercicio lo realizaremos en una carpeta llamada <code>ping-pong</code>.</p>
</div>
<div class="paragraph">
<p>En este ejercicio vamos a probar la propagación de eventos. Dispondremos de la siguiente plantilla HTML:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37</div></td><td class="code"><span class="tok-nt">&lt;div</span> <span class="tok-na">ng-app=</span><span class="tok-s">&quot;pingPong&quot;</span><span class="tok-nt">&gt;</span>

  <span class="tok-nt">&lt;style&gt;</span>
    <span class="tok-nc">.ng-scope</span> <span class="tok-p">{</span>
      <span class="tok-k">border</span><span class="tok-o">:</span> <span class="tok-m">1px</span> <span class="tok-k">dotted</span> <span class="tok-nb">red</span><span class="tok-p">;</span>
      <span class="tok-k">margin</span><span class="tok-o">:</span> <span class="tok-m">5px</span><span class="tok-p">;</span>
    <span class="tok-p">}</span>
  <span class="tok-nt">&lt;/style&gt;</span>

  <span class="tok-nt">&lt;div</span> <span class="tok-na">ng-controller=</span><span class="tok-s">&quot;Controller1&quot;</span><span class="tok-nt">&gt;</span>
    <span class="tok-nt">&lt;div</span> <span class="tok-na">ng-init=</span><span class="tok-s">&quot;ping = 0&quot;</span><span class="tok-nt">&gt;&lt;/div&gt;</span>
    <span class="tok-nt">&lt;div</span> <span class="tok-na">ng-init=</span><span class="tok-s">&quot;pong = 0&quot;</span><span class="tok-nt">&gt;&lt;/div&gt;</span>

    <span class="tok-nt">&lt;button</span> <span class="tok-na">ng-click=</span><span class="tok-s">&quot;$emit(&#39;ping&#39;)&quot;</span><span class="tok-nt">&gt;</span>Emit event<span class="tok-nt">&lt;/button&gt;</span>
    <span class="tok-nt">&lt;button</span> <span class="tok-na">ng-click=</span><span class="tok-s">&quot;$broadcast(&#39;pong&#39;)&quot;</span><span class="tok-nt">&gt;</span>Broadcast event<span class="tok-nt">&lt;/button&gt;</span>

    <span class="tok-nt">&lt;div&gt;</span>ping = {{ ping }}<span class="tok-nt">&lt;/div&gt;</span>
    <span class="tok-nt">&lt;div&gt;</span>pong = {{ pong }}<span class="tok-nt">&lt;/div&gt;</span>

    <span class="tok-nt">&lt;div</span> <span class="tok-na">ng-controller=</span><span class="tok-s">&quot;Controller2&quot;</span><span class="tok-nt">&gt;</span>
      <span class="tok-nt">&lt;button</span> <span class="tok-na">ng-click=</span><span class="tok-s">&quot;&quot;</span><span class="tok-nt">&gt;</span>Emit event<span class="tok-nt">&lt;/button&gt;</span>
      <span class="tok-nt">&lt;button</span> <span class="tok-na">ng-click=</span><span class="tok-s">&quot;&quot;</span><span class="tok-nt">&gt;</span>Broadcast event<span class="tok-nt">&lt;/button&gt;</span>

      <span class="tok-nt">&lt;div&gt;</span>ping = {{ ping }}<span class="tok-nt">&lt;/div&gt;</span>
      <span class="tok-nt">&lt;div&gt;</span>pong = {{ pong }}<span class="tok-nt">&lt;/div&gt;</span>

      <span class="tok-nt">&lt;div</span> <span class="tok-na">ng-controller=</span><span class="tok-s">&quot;Controller2&quot;</span><span class="tok-nt">&gt;</span>
        <span class="tok-nt">&lt;button</span> <span class="tok-na">ng-click=</span><span class="tok-s">&quot;&quot;</span><span class="tok-nt">&gt;</span>Emit event<span class="tok-nt">&lt;/button&gt;</span>
        <span class="tok-nt">&lt;button</span> <span class="tok-na">ng-click=</span><span class="tok-s">&quot;&quot;</span><span class="tok-nt">&gt;</span>Broadcast event<span class="tok-nt">&lt;/button&gt;</span>

        <span class="tok-nt">&lt;div&gt;</span>ping = {{ ping }}<span class="tok-nt">&lt;/div&gt;</span>
        <span class="tok-nt">&lt;div&gt;</span>pong = {{ pong }}<span class="tok-nt">&lt;/div&gt;&lt;/div&gt;</span>

    <span class="tok-nt">&lt;/div&gt;</span>

  <span class="tok-nt">&lt;/div&gt;</span>
<span class="tok-nt">&lt;/div&gt;</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Y la siguiente plantilla JavaScript:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="javascript"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</div></td><td class="code"><span class="tok-kd">function</span> <span class="tok-nx">Controller1</span><span class="tok-p">(</span><span class="tok-nx">$scope</span><span class="tok-p">)</span> <span class="tok-p">{</span>
  <span class="tok-nx">$scope</span><span class="tok-p">.</span><span class="tok-nx">$on</span><span class="tok-p">(</span><span class="tok-s1">&#39;ping&#39;</span><span class="tok-p">,</span> <span class="tok-kd">function</span><span class="tok-p">(){</span>
    <span class="tok-nx">$scope</span><span class="tok-p">.</span><span class="tok-nx">ping</span><span class="tok-err">``</span><span class="tok-p">;</span>
  <span class="tok-p">});</span>

  <span class="tok-nx">$scope</span><span class="tok-p">.</span><span class="tok-nx">$on</span><span class="tok-p">(</span><span class="tok-s1">&#39;pong&#39;</span><span class="tok-p">,</span> <span class="tok-kd">function</span><span class="tok-p">(){</span>
    <span class="tok-nx">$scope</span><span class="tok-p">.</span><span class="tok-nx">pong</span><span class="tok-err">``</span><span class="tok-p">;</span>
  <span class="tok-p">});</span>
<span class="tok-p">}</span>

<span class="tok-kd">function</span> <span class="tok-nx">Controller2</span><span class="tok-p">(</span><span class="tok-nx">$scope</span><span class="tok-p">)</span> <span class="tok-p">{</span>

<span class="tok-p">}</span>

<span class="tok-kd">function</span> <span class="tok-nx">Controller3</span><span class="tok-p">(</span><span class="tok-nx">$scope</span><span class="tok-p">)</span> <span class="tok-p">{</span>

<span class="tok-p">}</span>

<span class="tok-nx">angular</span>
  <span class="tok-p">.</span><span class="tok-nx">module</span><span class="tok-p">(</span><span class="tok-s1">&#39;pingPong&#39;</span><span class="tok-p">)</span>
  <span class="tok-p">.</span><span class="tok-nx">controller</span><span class="tok-p">(</span><span class="tok-s1">&#39;Controller1&#39;</span><span class="tok-p">,</span> <span class="tok-nx">Controller1</span><span class="tok-p">)</span>
  <span class="tok-p">.</span><span class="tok-nx">controller</span><span class="tok-p">(</span><span class="tok-s1">&#39;Controller2&#39;</span><span class="tok-p">,</span> <span class="tok-nx">Controller2</span><span class="tok-p">)</span>
  <span class="tok-p">.</span><span class="tok-nx">controller</span><span class="tok-p">(</span><span class="tok-s1">&#39;Controller3&#39;</span><span class="tok-p">,</span> <span class="tok-nx">Controller3</span><span class="tok-p">);</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Si ahora pulsamos en cualquiera de los dos primeros botones, veremos que los contadores <em>ping</em> y <em>pong</em> adquieren los mismos valores.</p>
</div>
<div class="paragraph">
<p>Deberemos:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Emitir eventos <em>ping</em> y <em>pong</em> en el resto de botones.</p>
</li>
<li>
<p>Introducir la lógica necesaria para que  el evento que desencadene cada botón afecte al <code>scope</code> propio y a los ascendentes (en caso de <code>$emit</code>) o descendientes (en caso de <code>$broadcast</code>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>No se puede renombrar ninguno de los nombres de variable de la vista (todos deben llamarse <code>ping</code> y <code>pong</code>).</p>
</div>
<div class="paragraph">
<p>Tener en cuenta la herencia prototípica que hemos estado viendo.</p>
</div>
<div class="paragraph">
<p>Se ha introducido un poco de CSS para que se delimiten bien los tres <code>scope</code> que hay en la aplicación.</p>
</div>
<div class="paragraph">
<p>Si los bloques <code>ng-init</code> te molestan, puedes quitarlos</p>
</div>
</div>
<div class="sect3">
<h4 id="_carrito_de_la_compra_ii_0_66_puntos">3.4.4. Carrito de la compra II (0,66 puntos)</h4>
<div class="paragraph">
<p>Realiza el ejercicio anterior del carrito de la compra aplicando la sintaxix de <em>controller as</em>. Seguiremos necesitando el objeto scope para nuestros <em>watchers</em>. Recordemos que podíamos pasar una expresión o una función a nuestro <em>watcher</em></p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>No machaques nada, guárdalo en la carpeta shoppingcart-controlleras</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Como dentro de una función el ámbito del <em>this</em> varía, una manera sencilla de solventar esto es de la forma:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="javascript"><table class="pyhltable"><tr><td class="linenos"><div class="linenodiv">1
2
3
4</div></td><td class="code"><span class="tok-o">---</span>
<span class="tok-nx">angular</span>
    <span class="tok-p">.</span><span class="tok-nx">module</span><span class="tok-p">(</span><span class="tok-s1">&#39;org.expertojava.carrito&#39;</span><span class="tok-p">,</span> <span class="tok-p">[])</span>
    <span class="tok-p">.</span><span class="tok-nx">controller</span><span class="tok-p">(</span><span class="tok-s1">&#39;CartCtrl&#39;</span><span class="tok-p">,</span> <span class="tok-kd">function</span> <span class="tok-nx">CartCtrl</span><span class="tok-p">(</span><span class="tok-nx">$scope</span><span class="tok-p">)</span> <span class="tok-p">{</span>
</td></tr></table></code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>//...
//Watch changes on cart length
var _this = this;
var watchFn = function() {
    return _this.cart.length;
};</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>$scope.$watch(watchFn, function(){
     _this.totalItems = _this.cart.length;
    //REST OF YOUR CODE
});
//...</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>    });
---</pre>
</div>
</div>
<div class="paragraph">
<p>Hay maneras más elegantes de hacerlo, como mediante el uso de <a href="https://docs.angularjs.org/api/ng/function/angular.bind">bind</a>
u otras técnicas de <em>binding</em>, pero la descrita es una forma comúnmente usada en infinidad de proyetos.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2015-10-05 18:57:19 CEST
</div>
</div>
</body>
</html>