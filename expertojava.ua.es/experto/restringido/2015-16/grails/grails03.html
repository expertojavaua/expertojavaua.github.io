<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.2">
<meta name="author" content="Fran García">
<title>Grails</title>
<style>/*! normalize.css v2.1.2 | MIT License | git.io/normalize */
/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video { display: inline-block; }

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) { display: none; height: 0; }

/** Address `[hidden]` styling not present in IE 8/9. Hide the `template` element in IE, Safari, and Firefox < 22. */
[hidden], template { display: none; }

script { display: none !important; }

/* ========================================================================== Base ========================================================================== */
/** 1. Set default font family to sans-serif. 2. Prevent iOS text size adjust after orientation change, without disabling user zoom. */
html { font-family: sans-serif; /* 1 */ -ms-text-size-adjust: 100%; /* 2 */ -webkit-text-size-adjust: 100%; /* 2 */ }

/** Remove default margin. */
body { margin: 0; }

/* ========================================================================== Links ========================================================================== */
/** Remove the gray background color from active links in IE 10. */
a { background: transparent; }

/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus { outline: thin dotted; }

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover { outline: 0; }

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 { font-size: 2em; margin: 0.67em 0; }

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] { border-bottom: 1px dotted; }

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong { font-weight: bold; }

/** Address styling not present in Safari 5 and Chrome. */
dfn { font-style: italic; }

/** Address differences between Firefox and other browsers. */
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }

/** Address styling not present in IE 8/9. */
mark { background: #ff0; color: #000; }

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }

/** Improve readability of pre-formatted text in all browsers. */
pre { white-space: pre-wrap; }

/** Set consistent quote types. */
q { quotes: "\201C" "\201D" "\2018" "\2019"; }

/** Address inconsistent and variable font size in all browsers. */
small { font-size: 80%; }

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }

sup { top: -0.5em; }

sub { bottom: -0.25em; }

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img { border: 0; }

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) { overflow: hidden; }

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure { margin: 0; }

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend { border: 0; /* 1 */ padding: 0; /* 2 */ }

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea { font-family: inherit; /* 1 */ font-size: 100%; /* 2 */ margin: 0; /* 3 */ }

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input { line-height: normal; }

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select { text-transform: none; }

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; /* 2 */ cursor: pointer; /* 3 */ }

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] { cursor: default; }

/** 1. Address box sizing set to `content-box` in IE 8/9. 2. Remove excess padding in IE 8/9. */
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ }

/** 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome. 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome (include `-moz` to future-proof). */
input[type="search"] { -webkit-appearance: textfield; /* 1 */ -moz-box-sizing: content-box; -webkit-box-sizing: content-box; /* 2 */ box-sizing: content-box; }

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea { overflow: auto; /* 1 */ vertical-align: top; /* 2 */ }

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table { border-collapse: collapse; border-spacing: 0; }

meta.foundation-mq-small { font-family: "only screen and (min-width: 768px)"; width: 768px; }

meta.foundation-mq-medium { font-family: "only screen and (min-width:1280px)"; width: 1280px; }

meta.foundation-mq-large { font-family: "only screen and (min-width:1440px)"; width: 1440px; }

*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }

html, body { font-size: 97%; }

body { background: white; color: #222222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }

a:hover { cursor: pointer; }

img, object, embed { max-width: 100%; height: auto; }

object, embed { height: 100%; }

img { -ms-interpolation-mode: bicubic; }

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }

.left { float: left !important; }

.right { float: right !important; }

.text-left { text-align: left !important; }

.text-right { text-align: right !important; }

.text-center { text-align: center !important; }

.text-justify { text-align: justify !important; }

.hide { display: none; }

.antialiased, body { -webkit-font-smoothing: antialiased; }

img { display: inline-block; vertical-align: middle; }

textarea { height: auto; min-height: 50px; }

select { width: 100%; }

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }

.subheader, .admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { line-height: 1.4; color: #6f6f6f; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }

/* Default Link Styles */
a { color: #1164be; text-decoration: none; line-height: inherit; }
a img { border: none; }

/* Default paragraph styles */
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.4; margin-bottom: 1em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }

/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: bold; font-style: normal; color: #1c355e; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #6f6f6f; line-height: 0; }

h1 { font-size: 2.125em; }

h2 { font-size: 1.6875em; }

h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }

h4 { font-size: 1.125em; }

h5 { font-size: 1.125em; }

h6 { font-size: 1em; }

hr { border: solid #dddddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }

/* Helpful Typography Defaults */
em, i { font-style: italic; line-height: inherit; }

strong, b { font-weight: bold; line-height: inherit; }

small { font-size: 60%; line-height: inherit; }

code { font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: bold; }

/* Lists */
ul, ol, dl { font-size: 1em; line-height: 1.4; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }

ul, ol { margin-left: 2.5em; }
ul.no-bullet, ol.no-bullet { margin-left: 1.5em; }

/* Unordered Lists */
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; /* Override nested font-size change */ }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }

/* Ordered Lists */
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }

/* Definition Lists */
dl dt { margin-bottom: 0.3125em; font-weight: bold; }
dl dd { margin-bottom: 1.25em; }

/* Abbreviations */
abbr, acronym { text-transform: uppercase; font-size: 90%; color: #222222; border-bottom: 1px dotted #dddddd; cursor: help; }

abbr { text-transform: none; }

/* Blockquotes */
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: 0.8125em; color: #555555; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #555555; }

blockquote, blockquote p { line-height: 1.6; color: #6f6f6f; }

/* Microformats */
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }

.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }

/*@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }*/
/* Tables */
table { background: white; margin-bottom: 1.25em; border: solid 1px #dddddd; }
table thead, table tfoot { background: whitesmoke; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: #222222; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: #222222; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f9f9f9; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.4; }

h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; border-bottom: 1px solid #dddddd }

.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }

*:not(pre) > code { font-size: inherit; font-style: normal !important; letter-spacing: 0; padding: 3px 2px 1px 2px; background-color: #eeeeee; border: 1px solid #dddddd; -webkit-border-radius: 0; border-radius: 0; line-height: inherit; font-weight: normal; }

pre, pre > code { line-height: 1.4; color: black; font-family: monospace, serif; font-weight: normal; }

.keyseq { color: #555555; }

kbd { display: inline-block; color: #222222; font-size: 0.75em; line-height: 1.4; background-color: #f7f7f7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; margin: -0.15em 0.15em 0 0.15em; padding: 0.2em 0.6em 0.2em 0.5em; vertical-align: middle; white-space: nowrap; }

.keyseq kbd:first-child { margin-left: 0; }

.keyseq kbd:last-child { margin-right: 0; }

.menuseq, .menu { color: #090909; }

b.button:before, b.button:after { position: relative; top: -1px; font-weight: normal; }

b.button:before { content: "["; padding: 0 3px 0 2px; }

b.button:after { content: "]"; padding: 0 2px 0 3px; }

#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }

#content { margin-top: 1.25em; }

#content:before { content: none; }

#header > h1:first-child { color: black; margin-top: 2.25rem; margin-bottom: 0; }
#header > h1:first-child + #toc { margin-top: 8px; border-top: 1px solid #dddddd; }
#header > h1:only-child, body.toc2 #header > h1:nth-last-child(2) { border-bottom: 1px solid #dddddd; padding-bottom: 8px; }
#header .details { border-bottom: 1px solid #dddddd; line-height: 1.45; padding-top: 0.25em; padding-bottom: 0.25em; padding-left: 0.25em; color: #555555; display: -ms-flexbox; display: -webkit-flex; display: flex; -ms-flex-flow: row wrap; -webkit-flex-flow: row wrap; flex-flow: row wrap; }
#header .details span:first-child { margin-left: -0.125em; }
#header .details span.email a { color: #6f6f6f; }
#header .details br { display: none; }
#header .details br + span:before { content: "\00a0\2013\00a0"; }
#header .details br + span.author:before { content: "\00a0\22c5\00a0"; color: #6f6f6f; }
#header .details br + span#revremark:before { content: "\00a0|\00a0"; }
#header #revnumber { text-transform: capitalize; }
#header #revnumber:after { content: "\00a0"; }

#content > h1:first-child:not([class]) { color: black; border-bottom: 1px solid #dddddd; padding-bottom: 8px; margin-top: 0; padding-top: 1rem; margin-bottom: 1.25rem; }

#floating {
  position: fixed;
  z-index: 1000;
  padding: 0.5em;
  right: 0;
  top: 0;
  background: white;
  box-shadow: 0 0 1em #777777;
  -webkit-box-shadow: 0 0 1em #777777;
  -moz-box-shadow: 0 0 1em #777777;
  -webkit-border-bottom-left-radius: 5px;
  -moz-border-radius-bottomleft: 5px;
  max-height: 80%;
  overflow: auto;
}

#floating #full { display: none; } /* Hide the full TOC by default */

#floating:hover #full{
  display: block; /* Show it on hover */
}


#toc { border-bottom: 1px solid #dddddd; padding-bottom: 0.5em; }
#toc > ul { margin-left: 0.125em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin: 0.5em 0; }
#toc ul { font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; list-style-type: none; }
#toc a { text-decoration: none; }
#toc a:active { text-decoration: underline; }

#toctitle { color: #6f6f6f; font-size: 1.2em; }

@media only screen and (min-width: 768px) { #toctitle { font-size: 1.375em; }
  body.toc2 { padding-left: 15em; padding-right: 0; }
  #toc.toc2 { margin-top: 0 !important; background-color: #f2f2f2; position: fixed; width: 15em; left: 0; top: 0; border-right: 1px solid #dddddd; border-top-width: 0 !important; border-bottom-width: 0 !important; z-index: 1000; padding: 1.25em 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; font-size: 1.2em; }
  #toc.toc2 > ul { font-size: 0.9em; margin-bottom: 0; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 15em; }
  body.toc2.toc-right #toc.toc2 { border-right-width: 0; border-left: 1px solid #dddddd; left: auto; right: 0; } }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; padding-right: 0; }
  #toc.toc2 { width: 20em; }
  #toc.toc2 #toctitle { font-size: 1.375em; }
  #toc.toc2 > ul { font-size: 0.95em; }
  #toc.toc2 ul ul { padding-left: 1.25em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; -webkit-border-radius: 0; border-radius: 0; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }

#footer { max-width: 100%; background-color: #222222; padding: 1.25em; }

#footer-text { color: #dddddd; line-height: 1.44; }

.sect1 { padding-bottom: 0.625em; }

@media only screen and (min-width: 768px) { .sect1 { padding-bottom: 1.25em; } }
.sect1 + .sect1 { border-top: 1px solid #dddddd; }

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; z-index: 1001; width: 1.5ex; margin-left: -1.5ex; display: block; text-decoration: none !important; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: "\00A7"; font-size: 0.85em; display: block; padding-top: 0.1em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #222222; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #151515; }

.audioblock, .imageblock, .literalblock, .listingblock, .stemblock, .videoblock { margin-bottom: 1.25em; }

.admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-rendering: optimizeLegibility; text-align: left; }

table.tableblock > caption.title { white-space: nowrap; overflow: visible; max-width: 0; }

.paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { color: black; }

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }

.admonitionblock > table { border-collapse: separate; border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #dddddd; color: #555555; }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }

.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 0; border-radius: 0; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }

.sidebarblock { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; -webkit-border-radius: 0; border-radius: 0; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock > .content > .title { color: #6f6f6f; margin-top: 0; }

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }

.literalblock pre, .listingblock pre:not(.highlight), .listingblock pre[class="highlight"], .listingblock pre[class^="highlight "], .listingblock pre.CodeRay, .listingblock pre.prettyprint { background: #eeeeee; }
.sidebarblock .literalblock pre, .sidebarblock .listingblock pre:not(.highlight), .sidebarblock .listingblock pre[class="highlight"], .sidebarblock .listingblock pre[class^="highlight "], .sidebarblock .listingblock pre.CodeRay, .sidebarblock .listingblock pre.prettyprint { background: #f2f1f1; }

.literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { border: 1px solid #cccccc; -webkit-border-radius: 0; border-radius: 0; word-wrap: break-word; padding: 0.8em 0.8em 0.65em 0.8em; font-size: 0.8125em; }
.literalblock pre.nowrap, .literalblock pre[class].nowrap, .listingblock pre.nowrap, .listingblock pre[class].nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
@media only screen and (min-width: 768px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 0.90625em; } }
@media only screen and (min-width: 1280px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 1em; } }

.literalblock.output pre { color: #eeeeee; background-color: black; }

.listingblock pre.highlightjs { padding: 0; }
.listingblock pre.highlightjs > code { padding: 0.8em 0.8em 0.65em 0.8em; -webkit-border-radius: 0; border-radius: 0; }

.listingblock > .content { position: relative; }

.listingblock code[data-lang]:before { display: none; content: attr(data-lang); position: absolute; font-size: 0.75em; top: 0.425rem; right: 0.5rem; line-height: 1; text-transform: uppercase; color: #999; }

.listingblock:hover code[data-lang]:before { display: block; }

.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }

.listingblock.terminal pre .command:not([data-prompt]):before { content: "$"; }

table.pyhltable { border-collapse: separate; border: 0; margin-bottom: 0; background: none; }

table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; }

table.pyhltable td.code { padding-left: .75em; padding-right: 0; }

pre.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #dddddd; }

pre.pygments .lineno { display: inline-block; margin-right: .25em; }

table.pyhltable .linenodiv { background: none !important; padding-right: 0 !important; }

.quoteblock { margin: 0 1em 1.25em 1.5em; display: table; }
.quoteblock > .title { margin-left: -1.5em; margin-bottom: 0.75em; }
.quoteblock blockquote, .quoteblock blockquote p { color: #6f6f6f; font-size: 1.15rem; line-height: 1.75; word-spacing: 0.1em; letter-spacing: 0; font-style: italic; text-align: justify; }
.quoteblock blockquote { margin: 0; padding: 0; border: 0; }
.quoteblock blockquote:before { content: "\201c"; float: left; font-size: 2.75em; font-weight: bold; line-height: 0.6em; margin-left: -0.6em; color: #6f6f6f; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: 0.5em; margin-right: 0.5ex; text-align: right; }
.quoteblock .quoteblock { margin-left: 0; margin-right: 0; padding: 0.5em 0; border-left: 3px solid #555555; }
.quoteblock .quoteblock blockquote { padding: 0 0 0 0.75em; }
.quoteblock .quoteblock blockquote:before { display: none; }

.verseblock { margin: 0 1em 1.25em 1em; }
.verseblock pre { font-family: "Open Sans", "DejaVu Sans", sans; font-size: 1.15rem; color: #6f6f6f; font-weight: 300; text-rendering: optimizeLegibility; }
.verseblock pre strong { font-weight: 400; }
.verseblock .attribution { margin-top: 1.25rem; margin-left: 0.5ex; }

.quoteblock .attribution, .verseblock .attribution { font-size: 0.8125em; line-height: 1.45; font-style: italic; }
.quoteblock .attribution br, .verseblock .attribution br { display: none; }
.quoteblock .attribution cite, .verseblock .attribution cite { display: block; letter-spacing: -0.05em; color: #555555; }

.quoteblock.abstract { margin: 0 0 1.25em 0; display: block; }
.quoteblock.abstract blockquote, .quoteblock.abstract blockquote p { text-align: left; word-spacing: 0; }
.quoteblock.abstract blockquote:before, .quoteblock.abstract blockquote p:first-of-type:before { display: none; }

table.tableblock { max-width: 100%; border-collapse: separate; }
table.tableblock td > .paragraph:last-child p > p:last-child, table.tableblock th > p:last-child, table.tableblock td > p:last-child { margin-bottom: 0; }

table.spread { width: 100%; }

table.tableblock, th.tableblock, td.tableblock { border: 0 solid #dddddd; }

table.grid-all th.tableblock, table.grid-all td.tableblock { border-width: 0 1px 1px 0; }

table.grid-all tfoot > tr > th.tableblock, table.grid-all tfoot > tr > td.tableblock { border-width: 1px 1px 0 0; }

table.grid-cols th.tableblock, table.grid-cols td.tableblock { border-width: 0 1px 0 0; }

table.grid-all * > tr > .tableblock:last-child, table.grid-cols * > tr > .tableblock:last-child { border-right-width: 0; }

table.grid-rows th.tableblock, table.grid-rows td.tableblock { border-width: 0 0 1px 0; }

table.grid-all tbody > tr:last-child > th.tableblock, table.grid-all tbody > tr:last-child > td.tableblock, table.grid-all thead:last-child > tr > th.tableblock, table.grid-rows tbody > tr:last-child > th.tableblock, table.grid-rows tbody > tr:last-child > td.tableblock, table.grid-rows thead:last-child > tr > th.tableblock { border-bottom-width: 0; }

table.grid-rows tfoot > tr > th.tableblock, table.grid-rows tfoot > tr > td.tableblock { border-width: 1px 0 0 0; }

table.frame-all { border-width: 1px; }

table.frame-sides { border-width: 0 1px; }

table.frame-topbot { border-width: 1px 0; }

th.halign-left, td.halign-left { text-align: left; }

th.halign-right, td.halign-right { text-align: right; }

th.halign-center, td.halign-center { text-align: center; }

th.valign-top, td.valign-top { vertical-align: top; }

th.valign-bottom, td.valign-bottom { vertical-align: bottom; }

th.valign-middle, td.valign-middle { vertical-align: middle; }

table thead th, table tfoot th { font-weight: bold; }

tbody tr th { display: table-cell; line-height: 1.4; background: whitesmoke; }

tbody tr th, tbody tr th p, tfoot tr th, tfoot tr th p { color: #222222; font-weight: bold; }

p.tableblock > code:only-child { background: none; padding: 0; }

p.tableblock { font-size: 1em; }

td > div.verse { white-space: pre; }

ol { margin-left: 2.5em; }

ul li ol { margin-left: 1.5em; }

dl dd { margin-left: 1.125em; }

dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }

ul.unstyled, ol.unnumbered, ul.checklist, ul.none { list-style-type: none; }

ul.unstyled, ol.unnumbered, ul.checklist { margin-left: 0.625em; }

ul.checklist li > p:first-child > .fa-check-square-o:first-child, ul.checklist li > p:first-child > input[type="checkbox"]:first-child { margin-right: 0.25em; }

ul.checklist li > p:first-child > input[type="checkbox"]:first-child { position: relative; top: 1px; }

ul.inline { margin: 0 auto 0.625em auto; margin-left: -1.375em; margin-right: 0; padding: 0; list-style: none; overflow: hidden; }
ul.inline > li { list-style: none; float: left; margin-left: 1.375em; display: block; }
ul.inline > li > * { display: block; }

.unstyled dl dt { font-weight: normal; font-style: normal; }

ol.arabic { list-style-type: decimal; }

ol.decimal { list-style-type: decimal-leading-zero; }

ol.loweralpha { list-style-type: lower-alpha; }

ol.upperalpha { list-style-type: upper-alpha; }

ol.lowerroman { list-style-type: lower-roman; }

ol.upperroman { list-style-type: upper-roman; }

ol.lowergreek { list-style-type: lower-greek; }

.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }

td.hdlist1 { padding-right: .75em; font-weight: bold; }

td.hdlist1, td.hdlist2 { vertical-align: top; }

.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }

.colist > table tr > td:first-of-type { padding: 0 0.75em; line-height: 1; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }

.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }

.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }

.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }

a.image { text-decoration: none; }

span.footnote, span.footnoteref { vertical-align: super; font-size: 0.875em; }
span.footnote a, span.footnoteref a { text-decoration: none; }
span.footnote a:active, span.footnoteref a:active { text-decoration: underline; }

#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -.25em 0 .75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em; line-height: 1.3; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.2em; margin-bottom: .2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }

#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }

.gist .file-data > table { border: 0; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }

div.unbreakable { page-break-inside: avoid; }

.big { font-size: larger; }

.small { font-size: smaller; }

.underline { text-decoration: underline; }

.overline { text-decoration: overline; }

.line-through { text-decoration: line-through; }

.aqua { color: #00bfbf; }

.aqua-background { background-color: #00fafa; }

.black { color: black; }

.black-background { background-color: black; }

.blue { color: #0000bf; }

.blue-background { background-color: #0000fa; }

.fuchsia { color: #bf00bf; }

.fuchsia-background { background-color: #fa00fa; }

.gray { color: #606060; }

.gray-background { background-color: #7d7d7d; }

.green { color: #006000; }

.green-background { background-color: #007d00; }

.lime { color: #00bf00; }

.lime-background { background-color: #00fa00; }

.maroon { color: #600000; }

.maroon-background { background-color: #7d0000; }

.navy { color: #000060; }

.navy-background { background-color: #00007d; }

.olive { color: #606000; }

.olive-background { background-color: #7d7d00; }

.purple { color: #600060; }

.purple-background { background-color: #7d007d; }

.red { color: #bf0000; }

.red-background { background-color: #fa0000; }

.silver { color: #909090; }

.silver-background { background-color: #bcbcbc; }

.teal { color: #006060; }

.teal-background { background-color: #007d7d; }

.white { color: #bfbfbf; }

.white-background { background-color: #fafafa; }

.yellow { color: #bfbf00; }

.yellow-background { background-color: #fafa00; }

span.icon > .fa { cursor: default; }

.admonitionblock td.icon [class^="fa icon-"] { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #207c98; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }

.conum[data-value] { display: inline-block; color: #fff !important; background-color: #222222; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; font-size: 0.75em; width: 1.67em; height: 1.67em; line-height: 1.67em; font-family: "Open Sans", "DejaVu Sans", sans-serif; font-style: normal; font-weight: bold; }
.conum[data-value] * { color: #fff !important; }
.conum[data-value] + b { display: none; }
.conum[data-value]:after { content: attr(data-value); }
pre .conum[data-value] { position: relative; top: -0.125em; }

b.conum * { color: inherit !important; }

.conum:not([data-value]):empty { display: none; }

.literalblock pre, .listingblock pre { background: #eeeeee; }

</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css">
<style>.listingblock .pygments .hll { background-color: #ffffcc }
.listingblock .pygments  { background: #f8f8f8; }
.listingblock .pygments .tok-c { color: #408080; font-style: italic } /* Comment */
.listingblock .pygments .tok-err { border: 1px solid #FF0000 } /* Error */
.listingblock .pygments .tok-k { color: #008000; font-weight: bold } /* Keyword */
.listingblock .pygments .tok-o { color: #666666 } /* Operator */
.listingblock .pygments .tok-cm { color: #408080; font-style: italic } /* Comment.Multiline */
.listingblock .pygments .tok-cp { color: #BC7A00 } /* Comment.Preproc */
.listingblock .pygments .tok-c1 { color: #408080; font-style: italic } /* Comment.Single */
.listingblock .pygments .tok-cs { color: #408080; font-style: italic } /* Comment.Special */
.listingblock .pygments .tok-gd { color: #A00000 } /* Generic.Deleted */
.listingblock .pygments .tok-ge { font-style: italic } /* Generic.Emph */
.listingblock .pygments .tok-gr { color: #FF0000 } /* Generic.Error */
.listingblock .pygments .tok-gh { color: #000080; font-weight: bold } /* Generic.Heading */
.listingblock .pygments .tok-gi { color: #00A000 } /* Generic.Inserted */
.listingblock .pygments .tok-go { color: #888888 } /* Generic.Output */
.listingblock .pygments .tok-gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.listingblock .pygments .tok-gs { font-weight: bold } /* Generic.Strong */
.listingblock .pygments .tok-gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.listingblock .pygments .tok-gt { color: #0044DD } /* Generic.Traceback */
.listingblock .pygments .tok-kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.listingblock .pygments .tok-kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.listingblock .pygments .tok-kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.listingblock .pygments .tok-kp { color: #008000 } /* Keyword.Pseudo */
.listingblock .pygments .tok-kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.listingblock .pygments .tok-kt { color: #B00040 } /* Keyword.Type */
.listingblock .pygments .tok-m { color: #666666 } /* Literal.Number */
.listingblock .pygments .tok-s { color: #BA2121 } /* Literal.String */
.listingblock .pygments .tok-na { color: #7D9029 } /* Name.Attribute */
.listingblock .pygments .tok-nb { color: #008000 } /* Name.Builtin */
.listingblock .pygments .tok-nc { color: #0000FF; font-weight: bold } /* Name.Class */
.listingblock .pygments .tok-no { color: #880000 } /* Name.Constant */
.listingblock .pygments .tok-nd { color: #AA22FF } /* Name.Decorator */
.listingblock .pygments .tok-ni { color: #999999; font-weight: bold } /* Name.Entity */
.listingblock .pygments .tok-ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.listingblock .pygments .tok-nf { color: #0000FF } /* Name.Function */
.listingblock .pygments .tok-nl { color: #A0A000 } /* Name.Label */
.listingblock .pygments .tok-nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.listingblock .pygments .tok-nt { color: #008000; font-weight: bold } /* Name.Tag */
.listingblock .pygments .tok-nv { color: #19177C } /* Name.Variable */
.listingblock .pygments .tok-ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.listingblock .pygments .tok-w { color: #bbbbbb } /* Text.Whitespace */
.listingblock .pygments .tok-mb { color: #666666 } /* Literal.Number.Bin */
.listingblock .pygments .tok-mf { color: #666666 } /* Literal.Number.Float */
.listingblock .pygments .tok-mh { color: #666666 } /* Literal.Number.Hex */
.listingblock .pygments .tok-mi { color: #666666 } /* Literal.Number.Integer */
.listingblock .pygments .tok-mo { color: #666666 } /* Literal.Number.Oct */
.listingblock .pygments .tok-sb { color: #BA2121 } /* Literal.String.Backtick */
.listingblock .pygments .tok-sc { color: #BA2121 } /* Literal.String.Char */
.listingblock .pygments .tok-sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.listingblock .pygments .tok-s2 { color: #BA2121 } /* Literal.String.Double */
.listingblock .pygments .tok-se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.listingblock .pygments .tok-sh { color: #BA2121 } /* Literal.String.Heredoc */
.listingblock .pygments .tok-si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.listingblock .pygments .tok-sx { color: #008000 } /* Literal.String.Other */
.listingblock .pygments .tok-sr { color: #BB6688 } /* Literal.String.Regex */
.listingblock .pygments .tok-s1 { color: #BA2121 } /* Literal.String.Single */
.listingblock .pygments .tok-ss { color: #19177C } /* Literal.String.Symbol */
.listingblock .pygments .tok-bp { color: #008000 } /* Name.Builtin.Pseudo */
.listingblock .pygments .tok-vc { color: #19177C } /* Name.Variable.Class */
.listingblock .pygments .tok-vg { color: #19177C } /* Name.Variable.Global */
.listingblock .pygments .tok-vi { color: #19177C } /* Name.Variable.Instance */
.listingblock .pygments .tok-il { color: #666666 } /* Literal.Number.Integer.Long */
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Grails</h1>
<div class="details">
<span id="author" class="author">Fran García</span><br>
<span id="email" class="email">&lt;<a href="mailto:fgarciarico@gmail.com">fgarciarico@gmail.com</a>&gt;</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Índice de contenidos</div>
<ul class="sectlevel1">
<li><a href="#sesion03">3. Introducción a Grails. Scaffolding.</a>
<ul class="sectlevel2">
<li><a href="#__qu%C3%A9_es">3.1. ¿Qué es?</a></li>
<li><a href="#_caracter%C3%ADsticas_de_grails">3.2. Características de Grails</a></li>
<li><a href="#_arquitectura">3.3. Arquitectura</a></li>
<li><a href="#_instalaci%C3%B3n_de_grails">3.4. Instalación de Grails</a></li>
<li><a href="#_scaffolding_2">3.5. Scaffolding</a></li>
<li><a href="#_ejercicios">3.6. Ejercicios</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="sesion03">3. Introducción a Grails. Scaffolding.</h2>
<div class="sectionbody">
<div class="paragraph">
<p>En esta primera sesión de Grails, comenzaremos, como no puede ser de otra forma, viendo una descripción de lo que es Grails, sus características y las ventajas que conlleva su uso como entorno para el desarrollo rápido de aplicaciones. Seguiremos analizando su arquitectura y las herramientas de código abierto que aúna Grails y terminaremos desarrollando nuestra primera aplicación en Grails aprovechándonos del <em>scaffolding</em>.</p>
</div>
<div class="sect2">
<h3 id="__qué_es">3.1. ¿Qué es?</h3>
<div class="paragraph">
<p>Grails es un framework para el desarrollo de aplicaciones web basado en el lenguaje de programación Groovy, que a su vez se basa en la Plataforma Java. Grails está basado en los paradigmas <em>convención sobre configuración</em> y <em>DRY (don&#8217;t repite yourself)</em> o no te repitas, los cuales permiten al programador olvidarse en gran parte de los detalles de configuración de más bajo nivel.</p>
</div>
<div class="paragraph">
<p>Como la mayoría de los framework de desarrollo web, Grails está basado en el patrón <em>Modelo Vista Controlador (MVC)</em>. En Grails los <em>modelos</em> se conocen como <em>clases de dominio</em> que permiten a la aplicación mostrar los datos utilizando la <em>vista</em>. A diferencia de otros frameworks, en Grails las clases de dominio de Grails son automáticamente persistidas y es incluso posible generar el esquema de la base de datos. Los <em>controladores</em> por su parte, permiten gestionar las peticiones a la aplicación y organizar los servicios proporcionados. Por último, la <em>vista</em> en Grails son las conocidas como <em>Groovy Server Pages (GSP)</em> (análogamente a las Java Server Pages -JSP-) y habitualmente se encargan de generar el contenido de nuestra aplicación en formato HTML.</p>
</div>
<div class="paragraph">
<p>Como comentábamos anteriormente, Grails permite al programador olvidarse de gran parte de la configuración típica que incluyen los frameworks MVC. Además Grails se aprovecha de un lenguaje dinámico como Groovy para acortar los tiempos de desarrollo y que el equipo de desarrolladores puedan centrarse simplemente en escribir código, actualizar, testear y depurar fallos. Esto hace que el desarrollo de la aplicación sea mucho más ágil que con otros frameworks MVC.</p>
</div>
<div class="paragraph">
<p>Habitualmente cuando hablamos de framework, se entiende como un marco de los programadores pueden utilizar las técnicas del Modelo Vista Controlador para el desarrollo rápido de sus aplicaciones. Pero, ¿qué pasa con el resto de elementos necesarios para el desarrollo de una aplicación como pueden ser los servidores web o los gestores de bases de datos?. En este sentido, Grails no es simplemente un framework de desarrollo de aplicaciones sino que es más una plataforma completa, puesto que incluye también un contenedor web, bases de datos, sistemas de empaquetado de la aplicación y un completo sistema para la realización de tests. De esta forma, no debemos perder el tiempo buscando y descargando un servidor web para nuestra futura aplicación o un gestor de base de datos. Ni tan siquiera será necesario escribir complicados scripts de configuración para el empaquetado de la aplicación. Todo esto se convierte en una tarea tan sencilla como instalar Grails.</p>
</div>
<div class="sect3">
<h4 id="__qué_empresas_utilizan_grails">3.1.1. ¿Qué empresas utilizan Grails?</h4>
<div class="paragraph">
<p>Desde los inicios de Grails, muchas han sido las empresas que apostaron por este framework y que a día de hoy siguen utilizándolo para desarrollar sus aplicaciones.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Netflix, <a href="http://www.netflix.com" class="bare">http://www.netflix.com</a></p>
</li>
<li>
<p>Sky, <a href="http://www.sky.com" class="bare">http://www.sky.com</a></p>
</li>
<li>
<p>Secret Escapes, <a href="http://www.secretescapes.com" class="bare">http://www.secretescapes.com</a></p>
</li>
<li>
<p>Engage Sciences, <a href="http://www.engagesciences.com" class="bare">http://www.engagesciences.com</a></p>
</li>
<li>
<p>Odobo, <a href="http://www.odobo.com" class="bare">http://www.odobo.com</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_características_de_grails">3.2. Características de Grails</h3>
<div class="paragraph">
<p>Algunas de las características más importantes que presenta Grails son las siguientes:</p>
</div>
<div class="sect3">
<h4 id="_convención_sobre_configuración">3.2.1. Convención sobre configuración</h4>
<div class="paragraph">
<p>En lugar de tener que escribir interminables archivos de configuración en formato XML, Grails se basa en una serie de convenciones para que el desarrollo de la aplicación sea mucho más rápido y productivo. Además, gracias al uso de convenciones, se refuerza el otro principio del que hablábamos anteriormente, <em>DRY (don&#8217;t repite yourself)</em> o no te repitas.</p>
</div>
</div>
<div class="sect3">
<h4 id="_tests">3.2.2. Tests</h4>
<div class="paragraph">
<p>Una de las partes más importantes en el desarrollo de software se refiere a los tests implementados que garantizan un software de calidad y el fácil mantenimiento de una aplicación. Gracias a estos tests, es muy sencillo detectar y solucionar fallos provocados por cambios en el código. Cada vez que se genera en Grails una clase de dominio o un controlador, paralelamente es generado también un test para comprobar la nueva clase o controlador, que por supuesto nosotros deberemos completar (Grails es muy bueno, pero no lo hace todo).</p>
</div>
<div class="paragraph">
<p>Grails distingue entre tests unitarios y tests de integración. Los tests unitarios son tests sin dependencias de ningún tipo, salvo algún que otro objeto <em>mock</em>. Por otro lado, los tests de integración tienen acceso completo al entorno de Grails, incluyendo la base de datos. Además, Grails permite también la creación de tests funcionales para comprobar la funcionalidad de nuestra aplicación web a nivel de interacción con el usuario.</p>
</div>
</div>
<div class="sect3">
<h4 id="_scaffolding">3.2.3. Scaffolding</h4>
<div class="paragraph">
<p>El scaffolding es una característica de determinados frameworks que permite la generación automática de código para las cuatro operaciones básicas de cualquier aplicación, que son la <em>creación</em>, <em>lectura</em>, <em>edición</em> y <em>borrado</em>, lo que en inglés se conoce como <em>CRUD (create, read, update and delete)</em>.</p>
</div>
<div class="paragraph">
<p>Grails permite también utilizar scaffolding en nuestras aplicaciones a través de un plugin que viene instalado por defecto. En versiones anteriores, el scaffolding venía como parte del <em>core</em> de Grails, sin embargo en las últimas versiones esta característica ha sido movida a un plugin. El scaffolding en Grails se consigue escribiendo muy pocas líneas de código, con lo que podemos centrarnos en especificar las propiedades, comportamientos y restricciones de nuestras clases de dominio.</p>
</div>
<div class="paragraph">
<p>Una gran cantidad de aplicaciones consisten en simplemente ofrecer la posibilidad a los usuarios de realizar esas cuatro operaciones básicas que comentábamos anteriormente sobre algunas entidades o clases de dominio con lo que en ocasiones este scaffolding nos ahorrará mucho tiempo.</p>
</div>
</div>
<div class="sect3">
<h4 id="_mapeo_objeto_relacional">3.2.4. Mapeo objeto-relacional</h4>
<div class="paragraph">
<p>Grails incluye un potente framework para el mapeo objeto-relacional conocido como <em>GORM (Grails Object Relational Mapping)</em>. Como cualquier framework de persistencia, GORM permite mapear objetos contra bases de datos relacionales y representar relaciones entre dichos objetos del tipo <em>uno-a-uno</em>, <em>uno-a-muchos</em> y <em>muchos-a-muchos</em>.</p>
</div>
<div class="paragraph">
<p>Por defecto, Grails utiliza Hibernate por debajo para realizar este mapeo, con lo que no debemos preocuparnos de que tipo de base de datos vamos a utilizar en nuestra aplicación (MySQL, Oracle, SQL Server, etc) porque Grails se encargará por nosotros de esta parte. Además, en los últimos tiempo están proliferando lo que se conoce como las bases de datos <em>noSQL</em> como MongoDB, Redis, Neo4j, etc. Aunque éstos tipos de bases de datos todavía no están soportadas en el núcleo de Grails, si están apareciendo al mismo tiempo diversos plugins para la utilización de éstas sin apenas modificar nada en nuestra aplicación.</p>
</div>
</div>
<div class="sect3">
<h4 id="_plugins">3.2.5. Plugins</h4>
<div class="paragraph">
<p>Sin embargo, Grails no siempre es la solución a cualquier problema que se nos pueda plantear en el desarrollo de aplicaciones web. Para ayudarnos, Grails dispone de una arquitectura de plugins con una comunidad de usuarios detrás (cada vez más grande) que ofrecen plugins para seguridad, AJAX, testeo, búsqueda, informes, servicios web, etc. Este sistema de plugins hace que añadir complejas funcionalidades a nuestra aplicación se convierte en algo muy sencillo. En la actualidad hay alrededor de 1200 plugins desarrollados para Grails.</p>
</div>
</div>
<div class="sect3">
<h4 id="_internacionalización_i18n">3.2.6. Internacionalización (i18n)</h4>
<div class="paragraph">
<p>Cuando creamos un proyecto en Grails, automáticamente se crea toda la estructura de datos necesaria para la internacionalización de la aplicación sin ningún problema.</p>
</div>
</div>
<div class="sect3">
<h4 id="_software_de_código_abierto">3.2.7. Software de código abierto</h4>
<div class="paragraph">
<p>Por suerte, Grails no sufre del síndrome <em><a href="http://en.wikipedia.org/wiki/Not_Invented_Here">Not Invented Here (NIH)</a></em> y lo hace integrando en su arquitectura las mejores soluciones de software libre del mercado para crear un framework robusto. Veamos cuales son estas soluciones.</p>
</div>
<div class="sect4">
<h5 id="_groovy">Groovy</h5>
<div class="paragraph">
<p><a href="http://groovy.codehaus.org/">Groovy</a> es la parte fundamental en la que se basa Grails. Como vimos en las dos primeras sesiones, Groovy es un potente y flexible lenguaje de programación. Su integración con Java, las características como lenguaje dinámico y su sintaxis sencilla, hacen de este lenguaje de programación el compañero perfecto para Grails.</p>
</div>
</div>
<div class="sect4">
<h5 id="_framework_spring">Framework Spring</h5>
<div class="paragraph">
<p>El framework <a href="http://www.springsource.org">Spring</a> ofrece un alto nivel de abstracción al programador que en lugar de tratar directamente con las transacciones, proporciona una forma para declarar dichas transacciones utilizando los <em>POJOs (Plain Old Java Objects)</em>, con lo que el programador se puede centrar en la implementación de la lógica de negocio.</p>
</div>
</div>
<div class="sect4">
<h5 id="_hibernate">Hibernate</h5>
<div class="paragraph">
<p><a href="https://www.hibernate.org">Hibernate</a> es un framework de persistencia objeto-relacional y constituye la base de GORM. Es capaz de mapear complejas clases de dominio contra las tablas de una base de datos, así como establecer las relaciones entre las distintas tablas.</p>
</div>
</div>
<div class="sect4">
<h5 id="_sitemesh">SiteMesh</h5>
<div class="paragraph">
<p><a href="http://www.opensymphony.com/sitemesh">SiteMesh</a> es un framework web para el renderizado de documentos HTML que implementa el patrón de diseño <a href="http://es.wikipedia.org/wiki/Decorator_(patr%C3%B3n_de_dise%C3%B1o)">Decorator</a> con componentes como cabeceras, pies de páginas y sistemas de navegación.</p>
</div>
</div>
<div class="sect4">
<h5 id="_tomcat_y_jetty">Tomcat y Jetty</h5>
<div class="paragraph">
<p>Como comentábamos anteriormente, Grails es una plataforma completa, y esto es en parte gracias a la inclusión de un servidor web como <a href="http://www.mortbay.org/jetty">Jetty</a> o <a href="http://tomcat.apache.org">Tomcat</a>. Esto no significa que Grails solo funcione con estos dos servidores de aplicaciones sino que en nuestra instalación local de Grails podremos utilizar cualquiera de ellos.</p>
</div>
</div>
<div class="sect4">
<h5 id="_h2">H2</h5>
<div class="paragraph">
<p>Grails también incluye un gestor de bases de datos relacionales como <a href="http://www.h2database.com">H2</a>. H2 es un gestor de base de datos en memoría de tamaño muy reducido y que en la mayoría de los casos nos servirá para nuestra fase de desarrollo (nunca para producción). Esto tampoco quiere decir que nuestras aplicaciones desarrolladas en Grails sólo funcionen con H2, sino que para desarrollar nuestra aplicación no vamos a necesitar ningún gestor de base de datos externo.</p>
</div>
</div>
<div class="sect4">
<h5 id="_spock">Spock</h5>
<div class="paragraph">
<p>En las primeras versiones de Grails, se utilizaba como framework para el desarrollo de tests el ampliamente aceptado JUnit, pero en las últimas versiones se ha decidido utilizar otro framework que ha tenido gran aceptación por parte de la comunidad llamado <a href="http://spock-framework.readthedocs.org">Spock</a>. Spock nos permitirá realizar tests unitarios, de integración y funcionales, tal y como veremos en la sesión 6.</p>
</div>
</div>
<div class="sect4">
<h5 id="_gant">Gant</h5>
<div class="paragraph">
<p><a href="http://gant.codehaus.org">Gant</a> es un entorno en línea de comandos que envuelve el archiconocido sistema de automatización de tareas <a href="http://ant.apache.org">Apache Ant</a>. Con Gant vamos a poder realizar todo tipo de tareas en un proyecto Grails, como la creación de todo tipo de artefactos en la aplicación, la generación del código de scaffolding necesario, la realización de las pruebas unitarias y de integración y el empaqueta de la aplicación, entre otras cosas.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_arquitectura">3.3. Arquitectura</h3>
<div class="paragraph">
<p>Ahora que ya tenemos una idea de lo que es Grails y las ventajas que nos puede aportar a la hora de desarrollar nuestros proyectos web, veamos gráficamente su arquitectura.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/grails03/arquitectura.jpg" alt="Arquitectura Grails" width="50%">
</div>
</div>
<div class="paragraph">
<p>Podemos decir que la arquitectura de Grails está formada por cuatro capas claramente diferenciadas. La base de la arquitectura de Grails es la máquina virtual de Java. Por encima de ésta se encuentran los lenguajes de programación en lo que está basado Grails, Java y Groovy. En la tercera capa tenemos el propio framework Grails, al cual le acompañan todos los frameworks de los que hablábamos en la sección anterior, SiteMesh, Spring, GORM, etc. En esta capa también se ha añadido una opción abierta como es la posibilidad de incluir otras librerías externas que no están incluidas en Grails. La última capa está formada por la aplicación en si, siguiendo el patrón modelo vista controlador.</p>
</div>
<div class="paragraph">
<p>Además, envolviendo a todo el proyecto Grails aparece Gant, la herramienta en línea de comandos que nos permitirá una gran variedad de acciones sobre el mismo.</p>
</div>
<div class="paragraph">
<p>Desde el punto de vista de la ejecución de un proyecto Grails, se podría esquematizar de la siguiente forma:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/grails03/grails_runtime.jpg" alt="Grails runtime" width="50%">
</div>
</div>
<div class="paragraph">
<p>De la imagen podemos concluir que una página web realiza una petición al servidor web. Esta petición se pasa a un controlador, el cual podrá utilizar o no una clase de dominio (modelo). Esta clase de dominio puede ser a su vez estar persistida en una base de datos gracias a GORM. Una vez el controlador termina, pasa la petición al correspondiente GSP para que renderice la vista y sea enviada de nuevo al navegador en forma de página HTML.</p>
</div>
</div>
<div class="sect2">
<h3 id="_instalación_de_grails">3.4. Instalación de Grails</h3>
<div class="paragraph">
<p>Si tenemos en cuenta lo que decíamos anteriormente de que Grails es un completo framework con un servidor web, un gestor de base de datos y el resto de características ya comentadas, podríamos pensar que su instalación puede ser muy complicada. Sin embargo, la instalación de Grails se convierte en un juego de niños, ya que nos olvidamos de tener que buscar soluciones externas para cada uno de los aspectos relacionados con el desarrollo de una aplicación web.</p>
</div>
<div class="paragraph">
<p>Aquí vamos a configurar Grails para poder utilizarlo tanto desde línea de comandos como desde el entorno de desarrollo IntelliJ IDEA.</p>
</div>
<div class="sect3">
<h4 id="_instalación_de_grails_en_línea_de_comandos">3.4.1. Instalación de Grails en línea de comandos</h4>
<div class="paragraph">
<p>Tal y como hacíamos en la instalación de Groovy, vamos a utilizar el gestor de paquetes <em>sdkman (<a href="http://sdkman.io/" class="bare">http://sdkman.io/</a>)</em>. Estos son los pasos para instalar Grails en nuestro ordenador:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">curl -s get.sdkman.io <span class="tok-p">|</span> bash

<span class="tok-nb">source</span> <span class="tok-s2">&quot;$HOME/.sdkman/bin/sdkman-init.sh&quot;</span>

sdk list grails

sdk install grails 2.5.2</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si necesitaramos alternar entre varias versiones de Grails, simplemente deberías ejecutar:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">sdk use grails 2.1.0</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_instalación_en_intellij_idea">3.4.2. Instalación en IntelliJ IDEA</h4>
<div class="paragraph">
<p>En principio IntelliJ IDEA ofrece automáticamente la posibilidad de crear proyectos Grails gracias al plugin instalado por defecto. Puedes comprobarlo en las preferencias de <em>IntelliJ IDEA &gt; IDE Settings &gt; Plugins</em> y ahí buscar el plugin de Grails. Cuando intentemos crear un nuevo proyecto en Grails, IntelliJ nos pedirá que le indiquemos donde se encuentra el framework instalado.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/grails03/creategrailsproject.png" alt="Crear proyecto Grails" width="100%">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/grails03/selectgrailsversion.png" alt="Seleccionar la versión de Grails desde la instalación de sdk" width="100%">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_scaffolding_2">3.5. Scaffolding</h3>
<div class="paragraph">
<p>Una vez ya tenemos configurado nuestro entorno de desarrollo, pasemos a la acción desarrollando con Grails una sencilla aplicación. En este módulo, vamos a desarrollar un ejemplo de lo que sería el completo desarrollo de una aplicación web que nos permita manejar una lista de tareas. Empezaremos desarrollando este ejemplo de aplicación para explicar como Grails implementa el scaffolding. Pero, ¿qué es el scaffolding?</p>
</div>
<div class="paragraph">
<p>El scaffolding es un término utilizado en programación para designar la construcción automática de aplicaciones a partir del esquema de la base de datos. Está soportado por varios frameworks MVC y Grails no podía ser menos y el equipo de desarrollo decidió incluirlo entre sus características más importantes. La idea del scaffolding es, partiendo del esquema de la base de datos, generar el código necesario para implementar las cuatro operaciones básicas en cualquier aplicación, que son: creación, lectura, actualización y borrado. Este tipo de aplicaciones se las conoce como <em>CRUD (create, read, update y delete)</em>.</p>
</div>
<div class="paragraph">
<p>Grails además nos ofrece dos tipos de scaffolding, el <em>dinámico</em>, en el cual Grails genera por nosotros al vuelo el código referente a las vistas y a los controladores y por otro lado el <em>scaffolding estático</em> en el que Grails generará de forma estática el código de controladores y vistas.</p>
</div>
<div class="paragraph">
<p>Como comentabamos anteriormente, vamos a ver un ejemplo de lo que es el scaffolding, desarrollando la típica aplicación <em>todo</em>, aplicación que iremos mejorando durante todo este módulo.</p>
</div>
<div class="sect3">
<h4 id="_descripción_de_la_aplicación_ejemplo">3.5.1. Descripción de la aplicación ejemplo</h4>
<div class="paragraph">
<p>Básicamente el funcionamiento de la aplicación debe permitir la creación y mantenimiento de tareas así como la posibilidad de categorizarlas. Para simplificar la aplicación, una tarea sólo podrá pertenecer como mucho a una categoría mientras que una categoría podrá tener por supuesto muchas tareas.</p>
</div>
<div class="paragraph">
<p>Además, también vamos a permitir la posibilidad etiquetar dichas tareas, con lo que una tarea puede tener varias etiquetas y una etiqueta estar asignada a varias tareas.</p>
</div>
<div class="paragraph">
<p>Por el momento, no nos vamos a preocupar de la gestión de usuarios, ya que lo haremos en la sesión 7 utilizando un plugin que se encargará por nosotros de todo el tema de seguridad de nuestra aplicación.</p>
</div>
</div>
<div class="sect3">
<h4 id="_creación_del_proyecto_grails">3.5.2. Creación del proyecto Grails</h4>
<div class="paragraph">
<p>Si todo ha ido bien en la instalación de Grails, podremos crear nuestra primera aplicación en Grails gracias al comando <em>grails</em>. Este será el comando que utilizaremos a lo largo de todo el curso para crear todas las partes de nuestra aplicación. Para ver un listado completo de las opciones del comando <em>grails</em>, podemos ejecutar <em>grails help</em>. Si echamos un primer vistazo a esta listado, descubriremos la opción <em>create-app</em>, la cual nos servirá para crear la estructura de directorios de la aplicación. Ejecutamos <em>grails create-app todo</em> y se nos generará el directorio <em>todo</em> con una serie de subdirectorios que comentaremos en breve.</p>
</div>
<div class="paragraph">
<p>Esta estructura de directorios generada automáticamente por Grails viene como consecuencia de lo que comentábamos anteriormente como uno de los paradigmas en que se basa Grails, <em>convención sobre configuración</em>. De esta forma, Grails nos genera la estructura de directorios que albergará todo nuestro proyecto para que nosotros lo vayamos <em>completando</em>. Veamos para que sirven los directorios más importantes generados dentro de nuestro proyecto <em>todo</em>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-middle">Directorio</th>
<th class="tableblock halign-left valign-top">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">grails-app/conf</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ficheros de configuración de la aplicación</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">grails-app/conf/hibernate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Archivos de mapeado de Hibernate</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">grails-app/conf/spring</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Archivos de mapeado de Spring</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">grails-app/controllers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Controladores de la aplicación que gestionan las peticiones</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">grails-app/domain</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clases de dominio del modelo</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">grails-app/i18n</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mensajes para la internacionalización de la aplicación</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">grails-app/services</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Servicios</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">grails-app/taglib</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Librerías de etiquetas dinámicas</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">grails-app/utils</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Utilidades específicas de Grails</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">grails-app/views</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Archivos GSP</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">grails-app/views/layout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Archivos de diseño de las páginas web</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">grails-app/assets/images</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Imágenes utilizadas por la aplicación en el entorno del plugin pipeline</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">grails-app/assets/javascripts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Archivos javascript utilizados por la aplicación en el entorno del plugin pipeline</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">grails-app/assets/stylesheets</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hojas de estilo utilizadas por la aplicación en el entorno del plugin pipeline</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">lib</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Archivos JAR de terceras partes, tales como controladores de bases de datos</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">scripts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scripts <em>GANT</em> para el automatizado de tareas</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">src/java</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Archivos fuente adicionales en Java</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">src/groovy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Archivos fuente adicionales en Groovy</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">test/integration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tests de integración</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">test/unit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tests unitarios</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">web-app</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Artefactos web que finalmente serán comprimidos a un <em>WAR (Web Application Archive)</em></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">web-app/css</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hojas de estilo</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">web-app/images</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Imágenes de la aplicación</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">web-app/js</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Javascript</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-middle"><p class="tableblock">web-app/WEB-INF</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Archivos de configuración para Spring o SiteMesh</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Ahora que ya tenemos una primera idea de lo que significa cada uno de los directorios generados por Grails al crear un proyecto, vamos a abrirlo con el editor IntelliJ IDEA. Grails es capaz de crear también los archivos de configuración necesarios para que podamos editar el proyecto con diferentes editores como Eclipse, Textmate y NetBeans, con lo que simplemente abrimos el editor y localizamos el proyecto <em>todo</em> y lo abrimos como un nuevo proyecto. Como vemos en la imagen, IDEA ha cambiado la estructura de directorios por una más clara para el desarrollador, aunque siempre podemos ver la estructura real de directorios si accedemos a la vista <em>Project</em>.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/grails03/intellijgrailsapp.png" alt="Aplicación Grails con IntelliJ Idea" width="50%">
</div>
</div>
<div class="paragraph">
<p>Nuestro proyecto ya está listo para ser ejecutado, aunque imaginarás que por el momento no hará nada. Para ver la primera versión del proyecto <em>todo</em> podemos ejecutar el comando <em>grails run-app</em>, que nos generará una aplicación en la dirección <a href="http://localhost:8080/todo" class="bare">http://localhost:8080/todo</a>. El comando <em>grails run-app</em> lo que ha hecho es crear una instancia del servidor web Tomcat en el puerto 8080 y cargar en él la aplicación <em>todo</em>. Por ahora esta aplicación hace más bien poco y simplemente nos muestra un mensaje de bienvenida, pero vamos a ver lo sencillo que es generar su contenido.</p>
</div>
</div>
<div class="sect3">
<h4 id="_creación_de_clases_de_dominio">3.5.3. Creación de clases de dominio</h4>
<div class="paragraph">
<p>Al desarrollar una aplicación de este tipo, lo habitual es crear en primer lugar las clases de dominio necesarias para después pasar a generar los controladores, así que vamos a empezar creando la clase de dominio referente a los <em>todos</em>. En Grails tenemos el comando <em>grails create-domain-class</em> para generar una determinada clase de dominio, con lo que si ejecutamos <em>grails create-domain-class es.ua.expertojava.todo.todo</em>, Grails nos creará la estructura necesaria para las tareas de nuestra aplicación. En caso de no indicar el nombre de la clase, el sistema nos preguntará por él.</p>
</div>
<div class="paragraph">
<p>Como podemos comprobar en nuestro proyecto con IDEA, se nos ha creado una clase de dominio llamada <em>Todo</em>, que como ves empieza por mayúscula a pesar de que nosotros introdujimos el nombre de la clase de dominio en minúsculas. Esto es debido a que Grails sigue una serie de convenios para el nombre de las clases. El contenido de <em>Todo.groovy</em> es el siguiente:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="groovy"><span class="tok-kn">package</span> <span class="tok-n">es</span><span class="tok-o">.</span><span class="tok-na">ua</span><span class="tok-o">.</span><span class="tok-na">expertojava</span><span class="tok-o">.</span><span class="tok-na">todo</span>

<span class="tok-kd">class</span> <span class="tok-nc">Todo</span> <span class="tok-o">{</span>

    <span class="tok-kd">static</span> <span class="tok-n">constraints</span> <span class="tok-o">=</span> <span class="tok-o">{</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Además, también se crea un test unitario llamado <em>es.ua.expertojava.todo.TodoSpec</em>, que de momento dejaremos tal cual está pero que volveremos a él en la sesión 6 en la que hablaremos de los tests unitarios.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="groovy"><span class="tok-kn">package</span> <span class="tok-n">es</span><span class="tok-o">.</span><span class="tok-na">ua</span><span class="tok-o">.</span><span class="tok-na">expertojava</span><span class="tok-o">.</span><span class="tok-na">todo</span>

<span class="tok-kn">import</span> <span class="tok-nn">grails.test.mixin.TestFor</span>
<span class="tok-kn">import</span> <span class="tok-nn">spock.lang.Specification</span>

<span class="tok-cm">/**</span>
<span class="tok-cm"> * See the API for {@link grails.test.mixin.domain.DomainClassUnitTestMixin} for usage instructions</span>
<span class="tok-cm"> */</span>
<span class="tok-nd">@TestFor</span><span class="tok-o">(</span><span class="tok-n">Todo</span><span class="tok-o">)</span>
<span class="tok-kd">class</span> <span class="tok-nc">TodoSpec</span> <span class="tok-kd">extends</span> <span class="tok-n">Specification</span> <span class="tok-o">{</span>

    <span class="tok-kt">def</span> <span class="tok-nf">setup</span><span class="tok-o">()</span> <span class="tok-o">{</span>
    <span class="tok-o">}</span>

    <span class="tok-kt">def</span> <span class="tok-nf">cleanup</span><span class="tok-o">()</span> <span class="tok-o">{</span>
    <span class="tok-o">}</span>

    <span class="tok-kt">void</span> <span class="tok-s2">&quot;test something&quot;</span><span class="tok-o">()</span> <span class="tok-o">{</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>La clase de dominio <em>Todo</em> está preparada para que le añadamos los campos necesarios, tales como título, descripción, fecha, etc. La información referente a las tareas serán <em>título</em>, <em>descripción</em>, <em>fecha</em>, <em>fechaRecordatorio</em> y <em>url</em>. Con estos datos, la clase de dominio <em>Todo</em> quedaría así:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="groovy"><span class="tok-kn">package</span> <span class="tok-n">es</span><span class="tok-o">.</span><span class="tok-na">ua</span><span class="tok-o">.</span><span class="tok-na">expertojava</span><span class="tok-o">.</span><span class="tok-na">todo</span>

<span class="tok-kd">class</span> <span class="tok-nc">Todo</span> <span class="tok-o">{</span>
    <span class="tok-n">String</span> <span class="tok-n">title</span>
    <span class="tok-n">String</span> <span class="tok-n">description</span>
    <span class="tok-n">Date</span> <span class="tok-n">date</span>
    <span class="tok-n">Date</span> <span class="tok-n">reminderDate</span>
    <span class="tok-n">String</span> <span class="tok-n">url</span>

    <span class="tok-kd">static</span> <span class="tok-n">constraints</span> <span class="tok-o">=</span> <span class="tok-o">{</span>
        <span class="tok-n">title</span><span class="tok-o">(</span><span class="tok-nl">blank:</span><span class="tok-kc">false</span><span class="tok-o">)</span>
        <span class="tok-n">description</span><span class="tok-o">(</span><span class="tok-nl">blank:</span><span class="tok-kc">true</span><span class="tok-o">,</span> <span class="tok-nl">nullable:</span><span class="tok-kc">true</span><span class="tok-o">,</span> <span class="tok-nl">maxSize:</span><span class="tok-mi">1000</span><span class="tok-o">)</span>
        <span class="tok-n">date</span><span class="tok-o">(</span><span class="tok-nl">nullable:</span><span class="tok-kc">false</span><span class="tok-o">)</span>
        <span class="tok-n">reminderDate</span><span class="tok-o">(</span><span class="tok-nl">nullable:</span><span class="tok-kc">true</span><span class="tok-o">)</span>
        <span class="tok-n">url</span><span class="tok-o">(</span><span class="tok-nl">nullable:</span><span class="tok-kc">true</span><span class="tok-o">,</span> <span class="tok-nl">url:</span><span class="tok-kc">true</span><span class="tok-o">)</span>
    <span class="tok-o">}</span>

    <span class="tok-n">String</span> <span class="tok-nf">toString</span><span class="tok-o">(){</span>
        <span class="tok-n">title</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Como puedes comprobar, en ningún momento se ha indicado ninguna propiedad como clave primaria y esto es debido a que Grails añade siempre las propiedades <em>id</em> y <em>version</em>, los cuales sirven respectivamente como clave primaria de la tabla en cuestión y para garantizar la integridad de los datos. La propiedad <em>version</em> es un mecanismo utilizado en <em>Hibernate</em> para el bloqueo de las tablas y que evita que se produzcan inconsistencias en los datos.</p>
</div>
<div class="paragraph">
<p>Por otro lado, la clase <em>Todo</em> no sólo contiene propiedades sino que también se han añadido una serie de restricciones (<em>constraints</em>) que deben cumplir dichas propiedades para que una tarea se pueda insertar en la base de datos. Por ejemplo, la propiedad <em>title</em> no puede dejarse en blanco, la propiedad <em>date</em> no puede ser <em>null</em>, mientras que las propiedades <em>description</em>, <em>reminderDate</em> y <em>url</em> pueden tener un valor <em>null</em> y además ésta última, en caso de contener valor, debe ser una dirección url bien formada. Además, observa también como la descripción no puede exceder de 1000 caracteres.</p>
</div>
</div>
<div class="sect3">
<h4 id="_creación_de_controladores">3.5.4. Creación de controladores</h4>
<div class="paragraph">
<p>Ahora que tenemos nuestra primera clase de dominio creada, necesitamos un controlador que gestione todas las peticiones que le lleguen a esta clase de dominio. El controlador es el encargado de gestionar la interacción entre la vista y las clases de dominio, con lo que podemos decir sin género de dudas que es la parte más ardua del sistema. Sin embargo, gracias a que Grails nos permite utilizar <em>scaffolding</em> esto se convierte de nuevo en un juego para niños.</p>
</div>
<div class="paragraph">
<p>Para crear un controlador en Grails, debemos ejecutar el comando <em>grails create-controller</em> y se generará un nuevo controlador en el directorio <em>grails-app/controllers</em>, así como un test unitario en el directorio <em>test/unit/&lt;paquete&gt;</em>. Antes de seguir vamos a crear el controlador de la clase <em>Todo</em> ejecutando <em>grails create-controller es.ua.expertojava.todo.todo</em>, el cual creará el archivo <em>grails-app/controllers/es/ua/expertojava/todo/TodoController.groovy</em> con el siguiente contenido</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="groovy"><span class="tok-kn">package</span> <span class="tok-n">es</span><span class="tok-o">.</span><span class="tok-na">ua</span><span class="tok-o">.</span><span class="tok-na">expertojava</span><span class="tok-o">.</span><span class="tok-na">todo</span>

<span class="tok-kd">class</span> <span class="tok-nc">TodoController</span> <span class="tok-o">{</span>

    <span class="tok-kt">def</span> <span class="tok-nf">index</span><span class="tok-o">()</span> <span class="tok-o">{</span> <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Además, tal y como pasaba cuando creábamos la clase de dominio, Grails crea por nosotros un test unitario llamado <em>es.ua.expertojava.todo.TodoControllerSpec</em> que nos permitirá más adelante testear el controlador.</p>
</div>
<div class="paragraph">
<p>Para poder utilizar <em>scaffolding</em> de la clase <em>Todo</em> simplemente debemos cambiar la línea</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="groovy"><span class="tok-kt">def</span> <span class="tok-n">index</span> <span class="tok-o">=</span> <span class="tok-o">{}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>por el siguiente código</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="groovy"><span class="tok-kt">def</span> <span class="tok-n">scaffold</span> <span class="tok-o">=</span> <span class="tok-n">Todo</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>o bien por</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="groovy"><span class="tok-kt">def</span> <span class="tok-n">scaffold</span> <span class="tok-o">=</span> <span class="tok-kc">true</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Si actualizamos la web de la aplicación veremos como nos aparece un nuevo enlace en el que podremos controlar las tareas de nuestra aplicación. El scaffolding de Grails ha creado por nosotros los cuatro métodos necesarios para la gestión de las tareas <em>creación</em>, <em>lectura</em>, <em>edición</em> y <em>borrado</em>. En la siguiente imagen podemos ver el formulario para añadir una nueva tarea.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/grails03/addtodo.png" alt="Añadir una tarea" width="50%">
</div>
</div>
<div class="paragraph">
<p>Si nos fijamos bien, observaremos que el orden para el formulario de creación de una nueva tarea sigue el mismo orden en el que aparecen definidas las restricciones para la validación de los datos. También es interesante ver como para la propiedad <em>description</em> ha creado un <em>textarea</em> en lugar de un campo <em>text</em> como ha hecho con el resto de propiedades de tipo <em>String</em>. Esto es porque para el campo <em>description</em> hemos establecido la restricción del tamaño máximo.</p>
</div>
<div class="paragraph">
<p>Probemos ahora a insertar tareas que no cumplan alguna de las restricciones que le impusimos en la definición de la clase de dominio. Si por ejemplo intentamos insertar una nueva tarea sin especificar su <em>título</em> el sistema nos proporcionará un error indicando que el campo en cuestión no puede estar vacío. Además, el campo de texto aparece remarcado en rojo para que el usuario sepa que ahí está pasando algo no permitido.</p>
</div>
<div class="paragraph">
<p>Si solucionamos este problema con el <em>título</em>, se insertará una nueva tarea en la base de datos de nuestra aplicación, que posteriormente podremos visualizar, editar y eliminar.</p>
</div>
<div class="paragraph">
<p>Continúemos con nuestro pequeño ejemplo de scaffolding, y para ello vamos a definir también la clase de dominio y el controlador para las <em>categorías</em> de las <em>tareas</em>. Empecemos creando las clases de dominio necesarias y empecemos por las <em>categorías</em> de las tareas. Para ello ejecutamos el comando <em>grails create-domain-class es.ua.expertojava.todo.category</em>. De estas categorías necesitamos conocer su <em>nombre</em> y una <em>descripción</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="groovy"><span class="tok-kn">package</span> <span class="tok-n">es</span><span class="tok-o">.</span><span class="tok-na">ua</span><span class="tok-o">.</span><span class="tok-na">expertojava</span><span class="tok-o">.</span><span class="tok-na">todo</span>

<span class="tok-kd">class</span> <span class="tok-nc">Category</span> <span class="tok-o">{</span>

    <span class="tok-n">String</span> <span class="tok-n">name</span>
    <span class="tok-n">String</span> <span class="tok-n">description</span>

    <span class="tok-kd">static</span> <span class="tok-n">hasMany</span> <span class="tok-o">=</span> <span class="tok-o">[</span><span class="tok-nl">todos:</span><span class="tok-n">Todo</span><span class="tok-o">]</span>

    <span class="tok-kd">static</span> <span class="tok-n">constraints</span> <span class="tok-o">=</span> <span class="tok-o">{</span>
        <span class="tok-n">name</span><span class="tok-o">(</span><span class="tok-nl">blank:</span><span class="tok-kc">false</span><span class="tok-o">)</span>
        <span class="tok-n">description</span><span class="tok-o">(</span><span class="tok-nl">blank:</span><span class="tok-kc">true</span><span class="tok-o">,</span> <span class="tok-nl">nullable:</span><span class="tok-kc">true</span><span class="tok-o">,</span> <span class="tok-nl">maxSize:</span><span class="tok-mi">1000</span><span class="tok-o">)</span>
    <span class="tok-o">}</span>

    <span class="tok-n">String</span> <span class="tok-nf">toString</span><span class="tok-o">(){</span>
        <span class="tok-n">name</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Lo novedoso en la declaración de la clase <em>Category</em> es la aparición de la especificación de la relación entre ésta y la clase <em>Todo</em>. Si pensamos en la relación existente entre las tareas y las categorías, está claro que esta relación es del tipo uno a muchos, es decir, que una categoría puede tener muchas tareas y que una tarea sólo pertenecerá por simplicidad a una categoría. Teniendo esto en cuenta, debemos especificar en la clase de dominio <em>Todo</em> la otra parte de la relación. Esto lo vamos a hacer añadiendo una nueva propiedad estática en la case de dominio del siguiente modo:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="groovy"><span class="tok-kn">package</span> <span class="tok-n">es</span><span class="tok-o">.</span><span class="tok-na">ua</span><span class="tok-o">.</span><span class="tok-na">expertojava</span><span class="tok-o">.</span><span class="tok-na">todo</span>

<span class="tok-kd">class</span> <span class="tok-nc">Todo</span> <span class="tok-o">{</span>
    <span class="tok-n">String</span> <span class="tok-n">title</span>
    <span class="tok-n">String</span> <span class="tok-n">description</span>
    <span class="tok-n">Date</span> <span class="tok-n">date</span>
    <span class="tok-n">Date</span> <span class="tok-n">reminderDate</span>
    <span class="tok-n">String</span> <span class="tok-n">url</span>
    <span class="tok-n">Category</span> <span class="tok-n">category</span>

    <span class="tok-kd">static</span> <span class="tok-n">constraints</span> <span class="tok-o">=</span> <span class="tok-o">{</span>
        <span class="tok-n">title</span><span class="tok-o">(</span><span class="tok-nl">blank:</span><span class="tok-kc">false</span><span class="tok-o">)</span>
        <span class="tok-n">description</span><span class="tok-o">(</span><span class="tok-nl">blank:</span><span class="tok-kc">true</span><span class="tok-o">,</span> <span class="tok-nl">nullable:</span><span class="tok-kc">true</span><span class="tok-o">,</span> <span class="tok-nl">maxSize:</span><span class="tok-mi">1000</span><span class="tok-o">)</span>
        <span class="tok-n">date</span><span class="tok-o">(</span><span class="tok-nl">nullable:</span><span class="tok-kc">false</span><span class="tok-o">)</span>
        <span class="tok-n">reminderDate</span><span class="tok-o">(</span><span class="tok-nl">nullable:</span><span class="tok-kc">true</span><span class="tok-o">)</span>
        <span class="tok-n">url</span><span class="tok-o">(</span><span class="tok-nl">nullable:</span><span class="tok-kc">true</span><span class="tok-o">,</span> <span class="tok-nl">url:</span><span class="tok-kc">true</span><span class="tok-o">)</span>
        <span class="tok-n">category</span><span class="tok-o">(</span><span class="tok-nl">nullable:</span><span class="tok-kc">true</span><span class="tok-o">)</span>
    <span class="tok-o">}</span>

    <span class="tok-n">String</span> <span class="tok-nf">toString</span><span class="tok-o">(){</span>
        <span class="tok-s2">&quot;title&quot;</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Una vez ya tenemos definidas la clase de dominio <em>Category</em>, podemos crear el controlador e indicarle que queremos utilizar el scaffolding para gestionar su información. Para ello ejecutamos <em>grails create-controller es.ua.expertojava.todo.category</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="groovy"><span class="tok-kn">package</span> <span class="tok-n">es</span><span class="tok-o">.</span><span class="tok-na">ua</span><span class="tok-o">.</span><span class="tok-na">expertojava</span><span class="tok-o">.</span><span class="tok-na">todo</span>

<span class="tok-kd">class</span> <span class="tok-nc">CategoryController</span> <span class="tok-o">{</span>

    <span class="tok-kt">def</span> <span class="tok-n">scaffold</span> <span class="tok-o">=</span> <span class="tok-n">Category</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Por último, vamos a añadir la clase de dominio referente a las etiquetas que vamos a poder asignar a las tareas. Ejecutamos <em>grails create-domain-class es.ua.expertojava.todo.tag</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="groovy"><span class="tok-kn">package</span> <span class="tok-n">es</span><span class="tok-o">.</span><span class="tok-na">ua</span><span class="tok-o">.</span><span class="tok-na">expertojava</span><span class="tok-o">.</span><span class="tok-na">todo</span>

<span class="tok-kd">class</span> <span class="tok-nc">Tag</span> <span class="tok-o">{</span>

    <span class="tok-n">String</span> <span class="tok-n">name</span>

    <span class="tok-kd">static</span> <span class="tok-n">hasMany</span> <span class="tok-o">=</span> <span class="tok-o">[</span><span class="tok-nl">todos:</span><span class="tok-n">Todo</span><span class="tok-o">]</span>

    <span class="tok-kd">static</span> <span class="tok-n">constraints</span> <span class="tok-o">=</span> <span class="tok-o">{</span>
        <span class="tok-n">name</span><span class="tok-o">(</span><span class="tok-nl">blank:</span><span class="tok-kc">false</span><span class="tok-o">,</span> <span class="tok-nl">nullable:</span><span class="tok-kc">true</span><span class="tok-o">,</span> <span class="tok-nl">unique:</span><span class="tok-kc">true</span><span class="tok-o">)</span>
    <span class="tok-o">}</span>

    <span class="tok-n">String</span> <span class="tok-nf">toString</span><span class="tok-o">(){</span>
    	<span class="tok-n">name</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Como puedes observar, una etiqueta puede estar asignada a muchas tareas. De igual forma, una tarea podrá tener muchas etiquetas. Más adelante veremos a fondo como se deben establecer este tipo de relaciones.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="groovy"><span class="tok-kn">package</span> <span class="tok-n">es</span><span class="tok-o">.</span><span class="tok-na">ua</span><span class="tok-o">.</span><span class="tok-na">expertojava</span><span class="tok-o">.</span><span class="tok-na">todo</span>

<span class="tok-kd">class</span> <span class="tok-nc">Todo</span> <span class="tok-o">{</span>
    <span class="tok-n">String</span> <span class="tok-n">title</span>
    <span class="tok-n">String</span> <span class="tok-n">description</span>
    <span class="tok-n">Date</span> <span class="tok-n">date</span>
    <span class="tok-n">Date</span> <span class="tok-n">reminderDate</span>
    <span class="tok-n">String</span> <span class="tok-n">url</span>
    <span class="tok-n">Category</span> <span class="tok-n">category</span>

    <span class="tok-kd">static</span> <span class="tok-n">hasMany</span> <span class="tok-o">=</span> <span class="tok-o">[</span><span class="tok-nl">tags:</span><span class="tok-n">Tag</span><span class="tok-o">]</span>
    <span class="tok-kd">static</span> <span class="tok-n">belongsTo</span> <span class="tok-o">=</span> <span class="tok-o">[</span><span class="tok-n">Tag</span><span class="tok-o">]</span>

    <span class="tok-kd">static</span> <span class="tok-n">constraints</span> <span class="tok-o">=</span> <span class="tok-o">{</span>
        <span class="tok-n">title</span><span class="tok-o">(</span><span class="tok-nl">blank:</span><span class="tok-kc">false</span><span class="tok-o">)</span>
        <span class="tok-n">description</span><span class="tok-o">(</span><span class="tok-nl">blank:</span><span class="tok-kc">true</span><span class="tok-o">,</span> <span class="tok-nl">nullable:</span><span class="tok-kc">true</span><span class="tok-o">,</span> <span class="tok-nl">maxSize:</span><span class="tok-mi">1000</span><span class="tok-o">)</span>
        <span class="tok-n">date</span><span class="tok-o">(</span><span class="tok-nl">nullable:</span><span class="tok-kc">false</span><span class="tok-o">)</span>
        <span class="tok-n">reminderDate</span><span class="tok-o">(</span><span class="tok-nl">nullable:</span><span class="tok-kc">true</span><span class="tok-o">)</span>
        <span class="tok-n">url</span><span class="tok-o">(</span><span class="tok-nl">nullable:</span><span class="tok-kc">true</span><span class="tok-o">,</span> <span class="tok-nl">url:</span><span class="tok-kc">true</span><span class="tok-o">)</span>
        <span class="tok-n">category</span><span class="tok-o">(</span><span class="tok-nl">nullable:</span><span class="tok-kc">true</span><span class="tok-o">)</span>
    <span class="tok-o">}</span>

    <span class="tok-n">String</span> <span class="tok-nf">toString</span><span class="tok-o">(){</span>
        <span class="tok-s2">&quot;title&quot;</span>
    <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Como siempre, no olvidemos crear el controlador que se encargará de gestionar las etiquetas:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="groovy"><span class="tok-kn">package</span> <span class="tok-n">es</span><span class="tok-o">.</span><span class="tok-na">ua</span><span class="tok-o">.</span><span class="tok-na">expertojava</span><span class="tok-o">.</span><span class="tok-na">todo</span>

<span class="tok-kd">class</span> <span class="tok-nc">TagController</span> <span class="tok-o">{</span>

    <span class="tok-kt">def</span> <span class="tok-n">scaffold</span> <span class="tok-o">=</span> <span class="tok-n">Tag</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Ahora sí, nuestra aplicación empieza a tomar forma de como debe ser la aplicación final, aunque por supuesto todavía quedan muchas cosas que iremos viendo a lo largo del módulo. Ahora mismo, podemos empezar a probar la aplicación insertando datos en cada una de las clases y comprobar que todo funciona correctamente. Sin embargo, la labor de introducción de los datos a mano en la aplicación es algo muy repetitivo y aburrido, así que vamos a ver como podemos convertir esta tarea en algo más sencillo y no tener que repetirla cada vez que probamos la aplicación (recuerda que ahora mismo la base de datos está en memoria con lo que se destruye cada vez que reiniciamos la aplicación).</p>
</div>
<div class="paragraph">
<p>En el directorio de configuración de nuestra aplicación (<em>grails-app/conf</em>) tenemos un archivo llamado <em>BootStrap.groovy</em> cuya funcionalidad es posibilitar la realización de acciones al arrancar y al finalizar nuestra aplicación. Como ya estaréis imaginando, vamos a aprovechar este fichero para introducir algunos datos en nuestra aplicación para tener algo de información ya introducida en nuestra aplicación. El siguiente ejemplo, inserta tareas, categorías y etiquetas en nuestra aplicación.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="groovy"><span class="tok-kn">import</span> <span class="tok-nn">es.ua.expertojava.todo.*</span>

<span class="tok-kd">class</span> <span class="tok-nc">BootStrap</span> <span class="tok-o">{</span>

    <span class="tok-kt">def</span> <span class="tok-n">init</span> <span class="tok-o">=</span> <span class="tok-o">{</span> <span class="tok-n">servletContext</span> <span class="tok-o">-&gt;</span>
        <span class="tok-kt">def</span> <span class="tok-n">categoryHome</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Category</span><span class="tok-o">(</span><span class="tok-nl">name:</span><span class="tok-s2">&quot;Hogar&quot;</span><span class="tok-o">).</span><span class="tok-na">save</span><span class="tok-o">()</span>
        <span class="tok-kt">def</span> <span class="tok-n">categoryJob</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Category</span><span class="tok-o">(</span><span class="tok-nl">name:</span><span class="tok-s2">&quot;Trabajo&quot;</span><span class="tok-o">).</span><span class="tok-na">save</span><span class="tok-o">()</span>

        <span class="tok-kt">def</span> <span class="tok-n">tagEasy</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Tag</span><span class="tok-o">(</span><span class="tok-nl">name:</span><span class="tok-s2">&quot;Fácil&quot;</span><span class="tok-o">).</span><span class="tok-na">save</span><span class="tok-o">()</span>
        <span class="tok-kt">def</span> <span class="tok-n">tagDifficult</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Tag</span><span class="tok-o">(</span><span class="tok-nl">name:</span><span class="tok-s2">&quot;Difícil&quot;</span><span class="tok-o">).</span><span class="tok-na">save</span><span class="tok-o">()</span>
        <span class="tok-kt">def</span> <span class="tok-n">tagArt</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Tag</span><span class="tok-o">(</span><span class="tok-nl">name:</span><span class="tok-s2">&quot;Arte&quot;</span><span class="tok-o">).</span><span class="tok-na">save</span><span class="tok-o">()</span>
        <span class="tok-kt">def</span> <span class="tok-n">tagRoutine</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Tag</span><span class="tok-o">(</span><span class="tok-nl">name:</span><span class="tok-s2">&quot;Rutina&quot;</span><span class="tok-o">).</span><span class="tok-na">save</span><span class="tok-o">()</span>
        <span class="tok-kt">def</span> <span class="tok-n">tagKitchen</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Tag</span><span class="tok-o">(</span><span class="tok-nl">name:</span><span class="tok-s2">&quot;Cocina&quot;</span><span class="tok-o">).</span><span class="tok-na">save</span><span class="tok-o">()</span>

        <span class="tok-kt">def</span> <span class="tok-n">todoPaintKitchen</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Todo</span><span class="tok-o">(</span><span class="tok-nl">title:</span><span class="tok-s2">&quot;Pintar cocina&quot;</span><span class="tok-o">,</span> <span class="tok-nl">date:</span><span class="tok-k">new</span> <span class="tok-n">Date</span><span class="tok-o">()+</span><span class="tok-mi">1</span><span class="tok-o">)</span>
        <span class="tok-kt">def</span> <span class="tok-n">todoCollectPost</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Todo</span><span class="tok-o">(</span><span class="tok-nl">title:</span><span class="tok-s2">&quot;Recoger correo postal&quot;</span><span class="tok-o">,</span> <span class="tok-nl">date:</span><span class="tok-k">new</span> <span class="tok-n">Date</span><span class="tok-o">()+</span><span class="tok-mi">2</span><span class="tok-o">)</span>
        <span class="tok-kt">def</span> <span class="tok-n">todoBakeCake</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Todo</span><span class="tok-o">(</span><span class="tok-nl">title:</span><span class="tok-s2">&quot;Cocinar pastel&quot;</span><span class="tok-o">,</span> <span class="tok-nl">date:</span><span class="tok-k">new</span> <span class="tok-n">Date</span><span class="tok-o">()+</span><span class="tok-mi">4</span><span class="tok-o">)</span>
        <span class="tok-kt">def</span> <span class="tok-n">todoWriteUnitTests</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-n">Todo</span><span class="tok-o">(</span><span class="tok-nl">title:</span><span class="tok-s2">&quot;Escribir tests unitarios&quot;</span><span class="tok-o">,</span> <span class="tok-nl">date:</span><span class="tok-k">new</span> <span class="tok-n">Date</span><span class="tok-o">())</span>

        <span class="tok-n">todoPaintKitchen</span><span class="tok-o">.</span><span class="tok-na">addToTags</span><span class="tok-o">(</span><span class="tok-n">tagDifficult</span><span class="tok-o">)</span>
        <span class="tok-n">todoPaintKitchen</span><span class="tok-o">.</span><span class="tok-na">addToTags</span><span class="tok-o">(</span><span class="tok-n">tagArt</span><span class="tok-o">)</span>
        <span class="tok-n">todoPaintKitchen</span><span class="tok-o">.</span><span class="tok-na">addToTags</span><span class="tok-o">(</span><span class="tok-n">tagKitchen</span><span class="tok-o">)</span>
        <span class="tok-n">todoPaintKitchen</span><span class="tok-o">.</span><span class="tok-na">category</span> <span class="tok-o">=</span> <span class="tok-n">categoryHome</span>
        <span class="tok-n">todoPaintKitchen</span><span class="tok-o">.</span><span class="tok-na">save</span><span class="tok-o">()</span>

        <span class="tok-n">todoCollectPost</span><span class="tok-o">.</span><span class="tok-na">addToTags</span><span class="tok-o">(</span><span class="tok-n">tagRoutine</span><span class="tok-o">)</span>
        <span class="tok-n">todoCollectPost</span><span class="tok-o">.</span><span class="tok-na">category</span> <span class="tok-o">=</span> <span class="tok-n">categoryJob</span>
        <span class="tok-n">todoCollectPost</span><span class="tok-o">.</span><span class="tok-na">save</span><span class="tok-o">()</span>

        <span class="tok-n">todoBakeCake</span><span class="tok-o">.</span><span class="tok-na">addToTags</span><span class="tok-o">(</span><span class="tok-n">tagEasy</span><span class="tok-o">)</span>
        <span class="tok-n">todoBakeCake</span><span class="tok-o">.</span><span class="tok-na">addToTags</span><span class="tok-o">(</span><span class="tok-n">tagKitchen</span><span class="tok-o">)</span>
        <span class="tok-n">todoBakeCake</span><span class="tok-o">.</span><span class="tok-na">category</span> <span class="tok-o">=</span> <span class="tok-n">categoryHome</span>
        <span class="tok-n">todoBakeCake</span><span class="tok-o">.</span><span class="tok-na">save</span><span class="tok-o">()</span>

        <span class="tok-n">todoWriteUnitTests</span><span class="tok-o">.</span><span class="tok-na">addToTags</span><span class="tok-o">(</span><span class="tok-n">tagEasy</span><span class="tok-o">)</span>
        <span class="tok-n">todoWriteUnitTests</span><span class="tok-o">.</span><span class="tok-na">category</span> <span class="tok-o">=</span> <span class="tok-n">categoryJob</span>
        <span class="tok-n">todoWriteUnitTests</span><span class="tok-o">.</span><span class="tok-na">save</span><span class="tok-o">()</span>
    <span class="tok-o">}</span>
    <span class="tok-kt">def</span> <span class="tok-n">destroy</span> <span class="tok-o">=</span> <span class="tok-o">{</span> <span class="tok-o">}</span>
<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_scaffolding_estático">3.5.5. Scaffolding estático</h4>
<div class="paragraph">
<p>Una vez hemos visto lo rápido que hemos desarrollado la base de nuestra aplicación, vamos a ver como podemos llegar algo más lejos con nuestras aplicaciones gracias al scaffolding estático. Hasta el momento, el código de nuestros controladores y vistas se genera al vuelo y no podemos realizar ni siquiera una pequeña modificación a estos artefactos.</p>
</div>
<div class="paragraph">
<p>Para pasar de scaffolding dinámico a estático, Grails dispone de tres comandos para realizar esta tarea:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>generate-controller</p>
</li>
<li>
<p>generate-views</p>
</li>
<li>
<p>generate-all</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Los tres comandos esperan como parámetro una clase de dominio para la cual generar el código necesario. Veamos un ejemplo sobre las clases de dominio de la aplicación.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">grails generate-all es.ua.expertojava.todo.Todo</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tras ejecutar este comando, si echamos un vistazo a nuestro proyecto en IntelliJ IDEA, veremos como el controlador <em>es.ua.expertojava.todo.TodoController</em> y el directorio de las vistas <em>views/todo</em> han cambiado considerablemente.</p>
</div>
<div class="paragraph">
<p>Por un lado, el controlador ahora tiene todo el contenido necesario de forma estática de forma que vamos a poder modificarlo según nuestras necesidades. Además, en el directorio de las vistas correspondientes a la clase de dominio <em>todo</em> podemos ver los archivos necesarios para poder completar el CRUD de la clase <em>Todo</em>.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/grails03/projectaftergenerateall.png" alt="Proyecto tras generar todo" width="50%">
</div>
</div>
<div class="paragraph">
<p>Los otros dos comandos comentados anteriormente van a realizar en conjunto las mismas acciones que el comando <em>generate-all</em>. Veamos un ejemplo con la clase de dominio <em>Tag</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">grails generate-controller es.ua.expertojava.todo.Tag
grails generate-views es.ua.expertojava.todo.Tag</code></pre>
</div>
</div>
<div class="paragraph">
<p>Como podrás comprobar en el proyecto, el controlador <em>es.ua.expertojava.todo.TagController</em> se ha definido de forma estática y las vistas han sido generadas para poder ser modificadas más fácilmente.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect2">
<h3 id="_ejercicios">3.6. Ejercicios</h3>
<div class="sect3">
<h4 id="_marcar_como_realizada_una_tarea_0_25_puntos">3.6.1. Marcar como realizada una tarea (0.25 puntos)</h4>
<div class="paragraph">
<p>En la definición de la aplicación <em>todo</em> hemos pasado por alto algo fundamental y es que una tarea puede haber sido realizada o no. Añade la información necesaria a nuestras clases de dominio para saber si una tarea ha sido ya completada.</p>
</div>
<div class="paragraph">
<p>No olvides añadir el valor deseado en el archivo <em>Bootstrap.groovy</em> para la nueva propiedad añadida.</p>
</div>
</div>
<div class="sect3">
<h4 id="_modificación_pantalla_inicial_0_25_puntos">3.6.2. Modificación pantalla inicial (0.25 puntos)</h4>
<div class="paragraph">
<p>Vamos a modificar la pantalla de bienvenida a la aplicación con las siguientes indicaciones:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Eliminar el logo de Grails de la parte superior para indicar el nombre la aplicación</p>
</li>
<li>
<p>Indicar nuestro nombre, apellidos y DNI</p>
</li>
<li>
<p>Añadir una imagen de vuestro perfil (puede valer la misma que tenéis en el campus virtual)</p>
</li>
<li>
<p>Eliminar el bloque de la izquierda donde aparece toda la información relativa a nuestra aplicación</p>
</li>
<li>
<p>Añadir una descripción apropiada de la aplicación</p>
</li>
<li>
<p>Añadir los enlaces correspondientes a las acciones que podemos realizar por el momento en nuestra aplicación</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Podría quedar algo así:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/grails03/ejemplopantallainicial.png" alt="Ejemplo pantalla inicial aplicación TODO" width="50%">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_scaffolding_estático_sobre_la_clase_categoría_0_75_puntos">3.6.3. Scaffolding estático sobre la clase Categoría (0.75 puntos)</h4>
<div class="paragraph">
<p>La única clase de dominio que nos queda por definir de forma estática es la referente a las categorías. Utilicemos también scaffolding estático para esta clase. Además, vamos a realizar las siguientes modificaciones sobre las vistas de las categorías:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Cuando creamos una categoría, Grails nos ofrece un enlace para crear <em>tareas</em> que por el momento vamos a eliminar.</p>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/grails03/createcategory.png" alt="Crear una categoría" width="50%">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>En el listado de categorías, vamos a eliminar el campo descripción porque en ocasiones esa descripción puede ser demasiado extensa.</p>
</li>
<li>
<p>Cuando creamos una categoría utilizando la aplicación, el mensaje que aparece indica que la categoría con identificado <em>X</em> ha sido creada correctamente. Realiza los cambios necesarios en el controlador para que en lugar de indicar el identificador, aparezca el nombre de la nueva categoría creada.</p>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/grails03/categorycreatedwithid.png" alt="Indicando el identificador de la categoría" width="50%">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/grails03/categorycreatedwithname.png" alt="Indicando el nombre de la categoría" width="50%">
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2015-10-05 20:14:58 CEST
</div>
</div>
</body>
</html>