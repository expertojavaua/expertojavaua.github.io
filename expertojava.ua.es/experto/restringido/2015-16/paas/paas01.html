<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.2">
<meta name="author" content="José Luis Zamora Sánchez">
<title>Servidores web y PaaS</title>
<style>/*! normalize.css v2.1.2 | MIT License | git.io/normalize */
/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video { display: inline-block; }

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) { display: none; height: 0; }

/** Address `[hidden]` styling not present in IE 8/9. Hide the `template` element in IE, Safari, and Firefox < 22. */
[hidden], template { display: none; }

script { display: none !important; }

/* ========================================================================== Base ========================================================================== */
/** 1. Set default font family to sans-serif. 2. Prevent iOS text size adjust after orientation change, without disabling user zoom. */
html { font-family: sans-serif; /* 1 */ -ms-text-size-adjust: 100%; /* 2 */ -webkit-text-size-adjust: 100%; /* 2 */ }

/** Remove default margin. */
body { margin: 0; }

/* ========================================================================== Links ========================================================================== */
/** Remove the gray background color from active links in IE 10. */
a { background: transparent; }

/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus { outline: thin dotted; }

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover { outline: 0; }

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 { font-size: 2em; margin: 0.67em 0; }

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] { border-bottom: 1px dotted; }

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong { font-weight: bold; }

/** Address styling not present in Safari 5 and Chrome. */
dfn { font-style: italic; }

/** Address differences between Firefox and other browsers. */
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }

/** Address styling not present in IE 8/9. */
mark { background: #ff0; color: #000; }

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }

/** Improve readability of pre-formatted text in all browsers. */
pre { white-space: pre-wrap; }

/** Set consistent quote types. */
q { quotes: "\201C" "\201D" "\2018" "\2019"; }

/** Address inconsistent and variable font size in all browsers. */
small { font-size: 80%; }

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }

sup { top: -0.5em; }

sub { bottom: -0.25em; }

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img { border: 0; }

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) { overflow: hidden; }

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure { margin: 0; }

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend { border: 0; /* 1 */ padding: 0; /* 2 */ }

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea { font-family: inherit; /* 1 */ font-size: 100%; /* 2 */ margin: 0; /* 3 */ }

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input { line-height: normal; }

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select { text-transform: none; }

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; /* 2 */ cursor: pointer; /* 3 */ }

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] { cursor: default; }

/** 1. Address box sizing set to `content-box` in IE 8/9. 2. Remove excess padding in IE 8/9. */
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ }

/** 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome. 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome (include `-moz` to future-proof). */
input[type="search"] { -webkit-appearance: textfield; /* 1 */ -moz-box-sizing: content-box; -webkit-box-sizing: content-box; /* 2 */ box-sizing: content-box; }

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea { overflow: auto; /* 1 */ vertical-align: top; /* 2 */ }

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table { border-collapse: collapse; border-spacing: 0; }

meta.foundation-mq-small { font-family: "only screen and (min-width: 768px)"; width: 768px; }

meta.foundation-mq-medium { font-family: "only screen and (min-width:1280px)"; width: 1280px; }

meta.foundation-mq-large { font-family: "only screen and (min-width:1440px)"; width: 1440px; }

*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }

html, body { font-size: 97%; }

body { background: white; color: #222222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }

a:hover { cursor: pointer; }

img, object, embed { max-width: 100%; height: auto; }

object, embed { height: 100%; }

img { -ms-interpolation-mode: bicubic; }

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }

.left { float: left !important; }

.right { float: right !important; }

.text-left { text-align: left !important; }

.text-right { text-align: right !important; }

.text-center { text-align: center !important; }

.text-justify { text-align: justify !important; }

.hide { display: none; }

.antialiased, body { -webkit-font-smoothing: antialiased; }

img { display: inline-block; vertical-align: middle; }

textarea { height: auto; min-height: 50px; }

select { width: 100%; }

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }

.subheader, .admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { line-height: 1.4; color: #6f6f6f; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }

/* Default Link Styles */
a { color: #1164be; text-decoration: none; line-height: inherit; }
a img { border: none; }

/* Default paragraph styles */
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.4; margin-bottom: 1em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }

/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: bold; font-style: normal; color: #1c355e; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #6f6f6f; line-height: 0; }

h1 { font-size: 2.125em; }

h2 { font-size: 1.6875em; }

h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }

h4 { font-size: 1.125em; }

h5 { font-size: 1.125em; }

h6 { font-size: 1em; }

hr { border: solid #dddddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }

/* Helpful Typography Defaults */
em, i { font-style: italic; line-height: inherit; }

strong, b { font-weight: bold; line-height: inherit; }

small { font-size: 60%; line-height: inherit; }

code { font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: bold; }

/* Lists */
ul, ol, dl { font-size: 1em; line-height: 1.4; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }

ul, ol { margin-left: 2.5em; }
ul.no-bullet, ol.no-bullet { margin-left: 1.5em; }

/* Unordered Lists */
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; /* Override nested font-size change */ }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }

/* Ordered Lists */
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }

/* Definition Lists */
dl dt { margin-bottom: 0.3125em; font-weight: bold; }
dl dd { margin-bottom: 1.25em; }

/* Abbreviations */
abbr, acronym { text-transform: uppercase; font-size: 90%; color: #222222; border-bottom: 1px dotted #dddddd; cursor: help; }

abbr { text-transform: none; }

/* Blockquotes */
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: 0.8125em; color: #555555; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #555555; }

blockquote, blockquote p { line-height: 1.6; color: #6f6f6f; }

/* Microformats */
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }

.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }

/*@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }*/
/* Tables */
table { background: white; margin-bottom: 1.25em; border: solid 1px #dddddd; }
table thead, table tfoot { background: whitesmoke; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: #222222; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: #222222; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f9f9f9; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.4; }

h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; border-bottom: 1px solid #dddddd }

.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }

*:not(pre) > code { font-size: inherit; font-style: normal !important; letter-spacing: 0; padding: 3px 2px 1px 2px; background-color: #eeeeee; border: 1px solid #dddddd; -webkit-border-radius: 0; border-radius: 0; line-height: inherit; font-weight: normal; }

pre, pre > code { line-height: 1.4; color: black; font-family: monospace, serif; font-weight: normal; }

.keyseq { color: #555555; }

kbd { display: inline-block; color: #222222; font-size: 0.75em; line-height: 1.4; background-color: #f7f7f7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; margin: -0.15em 0.15em 0 0.15em; padding: 0.2em 0.6em 0.2em 0.5em; vertical-align: middle; white-space: nowrap; }

.keyseq kbd:first-child { margin-left: 0; }

.keyseq kbd:last-child { margin-right: 0; }

.menuseq, .menu { color: #090909; }

b.button:before, b.button:after { position: relative; top: -1px; font-weight: normal; }

b.button:before { content: "["; padding: 0 3px 0 2px; }

b.button:after { content: "]"; padding: 0 2px 0 3px; }

#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }

#content { margin-top: 1.25em; }

#content:before { content: none; }

#header > h1:first-child { color: black; margin-top: 2.25rem; margin-bottom: 0; }
#header > h1:first-child + #toc { margin-top: 8px; border-top: 1px solid #dddddd; }
#header > h1:only-child, body.toc2 #header > h1:nth-last-child(2) { border-bottom: 1px solid #dddddd; padding-bottom: 8px; }
#header .details { border-bottom: 1px solid #dddddd; line-height: 1.45; padding-top: 0.25em; padding-bottom: 0.25em; padding-left: 0.25em; color: #555555; display: -ms-flexbox; display: -webkit-flex; display: flex; -ms-flex-flow: row wrap; -webkit-flex-flow: row wrap; flex-flow: row wrap; }
#header .details span:first-child { margin-left: -0.125em; }
#header .details span.email a { color: #6f6f6f; }
#header .details br { display: none; }
#header .details br + span:before { content: "\00a0\2013\00a0"; }
#header .details br + span.author:before { content: "\00a0\22c5\00a0"; color: #6f6f6f; }
#header .details br + span#revremark:before { content: "\00a0|\00a0"; }
#header #revnumber { text-transform: capitalize; }
#header #revnumber:after { content: "\00a0"; }

#content > h1:first-child:not([class]) { color: black; border-bottom: 1px solid #dddddd; padding-bottom: 8px; margin-top: 0; padding-top: 1rem; margin-bottom: 1.25rem; }

#floating {
  position: fixed;
  z-index: 1000;
  padding: 0.5em;
  right: 0;
  top: 0;
  background: white;
  box-shadow: 0 0 1em #777777;
  -webkit-box-shadow: 0 0 1em #777777;
  -moz-box-shadow: 0 0 1em #777777;
  -webkit-border-bottom-left-radius: 5px;
  -moz-border-radius-bottomleft: 5px;
  max-height: 80%;
  overflow: auto;
}

#floating #full { display: none; } /* Hide the full TOC by default */

#floating:hover #full{
  display: block; /* Show it on hover */
}


#toc { border-bottom: 1px solid #dddddd; padding-bottom: 0.5em; }
#toc > ul { margin-left: 0.125em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin: 0.5em 0; }
#toc ul { font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; list-style-type: none; }
#toc a { text-decoration: none; }
#toc a:active { text-decoration: underline; }

#toctitle { color: #6f6f6f; font-size: 1.2em; }

@media only screen and (min-width: 768px) { #toctitle { font-size: 1.375em; }
  body.toc2 { padding-left: 15em; padding-right: 0; }
  #toc.toc2 { margin-top: 0 !important; background-color: #f2f2f2; position: fixed; width: 15em; left: 0; top: 0; border-right: 1px solid #dddddd; border-top-width: 0 !important; border-bottom-width: 0 !important; z-index: 1000; padding: 1.25em 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; font-size: 1.2em; }
  #toc.toc2 > ul { font-size: 0.9em; margin-bottom: 0; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 15em; }
  body.toc2.toc-right #toc.toc2 { border-right-width: 0; border-left: 1px solid #dddddd; left: auto; right: 0; } }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; padding-right: 0; }
  #toc.toc2 { width: 20em; }
  #toc.toc2 #toctitle { font-size: 1.375em; }
  #toc.toc2 > ul { font-size: 0.95em; }
  #toc.toc2 ul ul { padding-left: 1.25em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; -webkit-border-radius: 0; border-radius: 0; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }

#footer { max-width: 100%; background-color: #222222; padding: 1.25em; }

#footer-text { color: #dddddd; line-height: 1.44; }

.sect1 { padding-bottom: 0.625em; }

@media only screen and (min-width: 768px) { .sect1 { padding-bottom: 1.25em; } }
.sect1 + .sect1 { border-top: 1px solid #dddddd; }

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; z-index: 1001; width: 1.5ex; margin-left: -1.5ex; display: block; text-decoration: none !important; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: "\00A7"; font-size: 0.85em; display: block; padding-top: 0.1em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #222222; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #151515; }

.audioblock, .imageblock, .literalblock, .listingblock, .stemblock, .videoblock { margin-bottom: 1.25em; }

.admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-rendering: optimizeLegibility; text-align: left; }

table.tableblock > caption.title { white-space: nowrap; overflow: visible; max-width: 0; }

.paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { color: black; }

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }

.admonitionblock > table { border-collapse: separate; border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #dddddd; color: #555555; }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }

.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 0; border-radius: 0; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }

.sidebarblock { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; -webkit-border-radius: 0; border-radius: 0; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock > .content > .title { color: #6f6f6f; margin-top: 0; }

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }

.literalblock pre, .listingblock pre:not(.highlight), .listingblock pre[class="highlight"], .listingblock pre[class^="highlight "], .listingblock pre.CodeRay, .listingblock pre.prettyprint { background: #eeeeee; }
.sidebarblock .literalblock pre, .sidebarblock .listingblock pre:not(.highlight), .sidebarblock .listingblock pre[class="highlight"], .sidebarblock .listingblock pre[class^="highlight "], .sidebarblock .listingblock pre.CodeRay, .sidebarblock .listingblock pre.prettyprint { background: #f2f1f1; }

.literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { border: 1px solid #cccccc; -webkit-border-radius: 0; border-radius: 0; word-wrap: break-word; padding: 0.8em 0.8em 0.65em 0.8em; font-size: 0.8125em; }
.literalblock pre.nowrap, .literalblock pre[class].nowrap, .listingblock pre.nowrap, .listingblock pre[class].nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
@media only screen and (min-width: 768px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 0.90625em; } }
@media only screen and (min-width: 1280px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 1em; } }

.literalblock.output pre { color: #eeeeee; background-color: black; }

.listingblock pre.highlightjs { padding: 0; }
.listingblock pre.highlightjs > code { padding: 0.8em 0.8em 0.65em 0.8em; -webkit-border-radius: 0; border-radius: 0; }

.listingblock > .content { position: relative; }

.listingblock code[data-lang]:before { display: none; content: attr(data-lang); position: absolute; font-size: 0.75em; top: 0.425rem; right: 0.5rem; line-height: 1; text-transform: uppercase; color: #999; }

.listingblock:hover code[data-lang]:before { display: block; }

.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }

.listingblock.terminal pre .command:not([data-prompt]):before { content: "$"; }

table.pyhltable { border-collapse: separate; border: 0; margin-bottom: 0; background: none; }

table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; }

table.pyhltable td.code { padding-left: .75em; padding-right: 0; }

pre.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #dddddd; }

pre.pygments .lineno { display: inline-block; margin-right: .25em; }

table.pyhltable .linenodiv { background: none !important; padding-right: 0 !important; }

.quoteblock { margin: 0 1em 1.25em 1.5em; display: table; }
.quoteblock > .title { margin-left: -1.5em; margin-bottom: 0.75em; }
.quoteblock blockquote, .quoteblock blockquote p { color: #6f6f6f; font-size: 1.15rem; line-height: 1.75; word-spacing: 0.1em; letter-spacing: 0; font-style: italic; text-align: justify; }
.quoteblock blockquote { margin: 0; padding: 0; border: 0; }
.quoteblock blockquote:before { content: "\201c"; float: left; font-size: 2.75em; font-weight: bold; line-height: 0.6em; margin-left: -0.6em; color: #6f6f6f; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: 0.5em; margin-right: 0.5ex; text-align: right; }
.quoteblock .quoteblock { margin-left: 0; margin-right: 0; padding: 0.5em 0; border-left: 3px solid #555555; }
.quoteblock .quoteblock blockquote { padding: 0 0 0 0.75em; }
.quoteblock .quoteblock blockquote:before { display: none; }

.verseblock { margin: 0 1em 1.25em 1em; }
.verseblock pre { font-family: "Open Sans", "DejaVu Sans", sans; font-size: 1.15rem; color: #6f6f6f; font-weight: 300; text-rendering: optimizeLegibility; }
.verseblock pre strong { font-weight: 400; }
.verseblock .attribution { margin-top: 1.25rem; margin-left: 0.5ex; }

.quoteblock .attribution, .verseblock .attribution { font-size: 0.8125em; line-height: 1.45; font-style: italic; }
.quoteblock .attribution br, .verseblock .attribution br { display: none; }
.quoteblock .attribution cite, .verseblock .attribution cite { display: block; letter-spacing: -0.05em; color: #555555; }

.quoteblock.abstract { margin: 0 0 1.25em 0; display: block; }
.quoteblock.abstract blockquote, .quoteblock.abstract blockquote p { text-align: left; word-spacing: 0; }
.quoteblock.abstract blockquote:before, .quoteblock.abstract blockquote p:first-of-type:before { display: none; }

table.tableblock { max-width: 100%; border-collapse: separate; }
table.tableblock td > .paragraph:last-child p > p:last-child, table.tableblock th > p:last-child, table.tableblock td > p:last-child { margin-bottom: 0; }

table.spread { width: 100%; }

table.tableblock, th.tableblock, td.tableblock { border: 0 solid #dddddd; }

table.grid-all th.tableblock, table.grid-all td.tableblock { border-width: 0 1px 1px 0; }

table.grid-all tfoot > tr > th.tableblock, table.grid-all tfoot > tr > td.tableblock { border-width: 1px 1px 0 0; }

table.grid-cols th.tableblock, table.grid-cols td.tableblock { border-width: 0 1px 0 0; }

table.grid-all * > tr > .tableblock:last-child, table.grid-cols * > tr > .tableblock:last-child { border-right-width: 0; }

table.grid-rows th.tableblock, table.grid-rows td.tableblock { border-width: 0 0 1px 0; }

table.grid-all tbody > tr:last-child > th.tableblock, table.grid-all tbody > tr:last-child > td.tableblock, table.grid-all thead:last-child > tr > th.tableblock, table.grid-rows tbody > tr:last-child > th.tableblock, table.grid-rows tbody > tr:last-child > td.tableblock, table.grid-rows thead:last-child > tr > th.tableblock { border-bottom-width: 0; }

table.grid-rows tfoot > tr > th.tableblock, table.grid-rows tfoot > tr > td.tableblock { border-width: 1px 0 0 0; }

table.frame-all { border-width: 1px; }

table.frame-sides { border-width: 0 1px; }

table.frame-topbot { border-width: 1px 0; }

th.halign-left, td.halign-left { text-align: left; }

th.halign-right, td.halign-right { text-align: right; }

th.halign-center, td.halign-center { text-align: center; }

th.valign-top, td.valign-top { vertical-align: top; }

th.valign-bottom, td.valign-bottom { vertical-align: bottom; }

th.valign-middle, td.valign-middle { vertical-align: middle; }

table thead th, table tfoot th { font-weight: bold; }

tbody tr th { display: table-cell; line-height: 1.4; background: whitesmoke; }

tbody tr th, tbody tr th p, tfoot tr th, tfoot tr th p { color: #222222; font-weight: bold; }

p.tableblock > code:only-child { background: none; padding: 0; }

p.tableblock { font-size: 1em; }

td > div.verse { white-space: pre; }

ol { margin-left: 2.5em; }

ul li ol { margin-left: 1.5em; }

dl dd { margin-left: 1.125em; }

dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }

ul.unstyled, ol.unnumbered, ul.checklist, ul.none { list-style-type: none; }

ul.unstyled, ol.unnumbered, ul.checklist { margin-left: 0.625em; }

ul.checklist li > p:first-child > .fa-check-square-o:first-child, ul.checklist li > p:first-child > input[type="checkbox"]:first-child { margin-right: 0.25em; }

ul.checklist li > p:first-child > input[type="checkbox"]:first-child { position: relative; top: 1px; }

ul.inline { margin: 0 auto 0.625em auto; margin-left: -1.375em; margin-right: 0; padding: 0; list-style: none; overflow: hidden; }
ul.inline > li { list-style: none; float: left; margin-left: 1.375em; display: block; }
ul.inline > li > * { display: block; }

.unstyled dl dt { font-weight: normal; font-style: normal; }

ol.arabic { list-style-type: decimal; }

ol.decimal { list-style-type: decimal-leading-zero; }

ol.loweralpha { list-style-type: lower-alpha; }

ol.upperalpha { list-style-type: upper-alpha; }

ol.lowerroman { list-style-type: lower-roman; }

ol.upperroman { list-style-type: upper-roman; }

ol.lowergreek { list-style-type: lower-greek; }

.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }

td.hdlist1 { padding-right: .75em; font-weight: bold; }

td.hdlist1, td.hdlist2 { vertical-align: top; }

.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }

.colist > table tr > td:first-of-type { padding: 0 0.75em; line-height: 1; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }

.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }

.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }

.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }

a.image { text-decoration: none; }

span.footnote, span.footnoteref { vertical-align: super; font-size: 0.875em; }
span.footnote a, span.footnoteref a { text-decoration: none; }
span.footnote a:active, span.footnoteref a:active { text-decoration: underline; }

#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -.25em 0 .75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em; line-height: 1.3; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.2em; margin-bottom: .2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }

#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }

.gist .file-data > table { border: 0; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }

div.unbreakable { page-break-inside: avoid; }

.big { font-size: larger; }

.small { font-size: smaller; }

.underline { text-decoration: underline; }

.overline { text-decoration: overline; }

.line-through { text-decoration: line-through; }

.aqua { color: #00bfbf; }

.aqua-background { background-color: #00fafa; }

.black { color: black; }

.black-background { background-color: black; }

.blue { color: #0000bf; }

.blue-background { background-color: #0000fa; }

.fuchsia { color: #bf00bf; }

.fuchsia-background { background-color: #fa00fa; }

.gray { color: #606060; }

.gray-background { background-color: #7d7d7d; }

.green { color: #006000; }

.green-background { background-color: #007d00; }

.lime { color: #00bf00; }

.lime-background { background-color: #00fa00; }

.maroon { color: #600000; }

.maroon-background { background-color: #7d0000; }

.navy { color: #000060; }

.navy-background { background-color: #00007d; }

.olive { color: #606000; }

.olive-background { background-color: #7d7d00; }

.purple { color: #600060; }

.purple-background { background-color: #7d007d; }

.red { color: #bf0000; }

.red-background { background-color: #fa0000; }

.silver { color: #909090; }

.silver-background { background-color: #bcbcbc; }

.teal { color: #006060; }

.teal-background { background-color: #007d7d; }

.white { color: #bfbfbf; }

.white-background { background-color: #fafafa; }

.yellow { color: #bfbf00; }

.yellow-background { background-color: #fafa00; }

span.icon > .fa { cursor: default; }

.admonitionblock td.icon [class^="fa icon-"] { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #207c98; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }

.conum[data-value] { display: inline-block; color: #fff !important; background-color: #222222; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; font-size: 0.75em; width: 1.67em; height: 1.67em; line-height: 1.67em; font-family: "Open Sans", "DejaVu Sans", sans-serif; font-style: normal; font-weight: bold; }
.conum[data-value] * { color: #fff !important; }
.conum[data-value] + b { display: none; }
.conum[data-value]:after { content: attr(data-value); }
pre .conum[data-value] { position: relative; top: -0.125em; }

b.conum * { color: inherit !important; }

.conum:not([data-value]):empty { display: none; }

.literalblock pre, .listingblock pre { background: #eeeeee; }

</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css">
<style>.listingblock .pygments .hll { background-color: #ffffcc }
.listingblock .pygments  { background: #f8f8f8; }
.listingblock .pygments .tok-c { color: #408080; font-style: italic } /* Comment */
.listingblock .pygments .tok-err { border: 1px solid #FF0000 } /* Error */
.listingblock .pygments .tok-k { color: #008000; font-weight: bold } /* Keyword */
.listingblock .pygments .tok-o { color: #666666 } /* Operator */
.listingblock .pygments .tok-cm { color: #408080; font-style: italic } /* Comment.Multiline */
.listingblock .pygments .tok-cp { color: #BC7A00 } /* Comment.Preproc */
.listingblock .pygments .tok-c1 { color: #408080; font-style: italic } /* Comment.Single */
.listingblock .pygments .tok-cs { color: #408080; font-style: italic } /* Comment.Special */
.listingblock .pygments .tok-gd { color: #A00000 } /* Generic.Deleted */
.listingblock .pygments .tok-ge { font-style: italic } /* Generic.Emph */
.listingblock .pygments .tok-gr { color: #FF0000 } /* Generic.Error */
.listingblock .pygments .tok-gh { color: #000080; font-weight: bold } /* Generic.Heading */
.listingblock .pygments .tok-gi { color: #00A000 } /* Generic.Inserted */
.listingblock .pygments .tok-go { color: #888888 } /* Generic.Output */
.listingblock .pygments .tok-gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.listingblock .pygments .tok-gs { font-weight: bold } /* Generic.Strong */
.listingblock .pygments .tok-gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.listingblock .pygments .tok-gt { color: #0044DD } /* Generic.Traceback */
.listingblock .pygments .tok-kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.listingblock .pygments .tok-kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.listingblock .pygments .tok-kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.listingblock .pygments .tok-kp { color: #008000 } /* Keyword.Pseudo */
.listingblock .pygments .tok-kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.listingblock .pygments .tok-kt { color: #B00040 } /* Keyword.Type */
.listingblock .pygments .tok-m { color: #666666 } /* Literal.Number */
.listingblock .pygments .tok-s { color: #BA2121 } /* Literal.String */
.listingblock .pygments .tok-na { color: #7D9029 } /* Name.Attribute */
.listingblock .pygments .tok-nb { color: #008000 } /* Name.Builtin */
.listingblock .pygments .tok-nc { color: #0000FF; font-weight: bold } /* Name.Class */
.listingblock .pygments .tok-no { color: #880000 } /* Name.Constant */
.listingblock .pygments .tok-nd { color: #AA22FF } /* Name.Decorator */
.listingblock .pygments .tok-ni { color: #999999; font-weight: bold } /* Name.Entity */
.listingblock .pygments .tok-ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.listingblock .pygments .tok-nf { color: #0000FF } /* Name.Function */
.listingblock .pygments .tok-nl { color: #A0A000 } /* Name.Label */
.listingblock .pygments .tok-nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.listingblock .pygments .tok-nt { color: #008000; font-weight: bold } /* Name.Tag */
.listingblock .pygments .tok-nv { color: #19177C } /* Name.Variable */
.listingblock .pygments .tok-ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.listingblock .pygments .tok-w { color: #bbbbbb } /* Text.Whitespace */
.listingblock .pygments .tok-mb { color: #666666 } /* Literal.Number.Bin */
.listingblock .pygments .tok-mf { color: #666666 } /* Literal.Number.Float */
.listingblock .pygments .tok-mh { color: #666666 } /* Literal.Number.Hex */
.listingblock .pygments .tok-mi { color: #666666 } /* Literal.Number.Integer */
.listingblock .pygments .tok-mo { color: #666666 } /* Literal.Number.Oct */
.listingblock .pygments .tok-sb { color: #BA2121 } /* Literal.String.Backtick */
.listingblock .pygments .tok-sc { color: #BA2121 } /* Literal.String.Char */
.listingblock .pygments .tok-sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.listingblock .pygments .tok-s2 { color: #BA2121 } /* Literal.String.Double */
.listingblock .pygments .tok-se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.listingblock .pygments .tok-sh { color: #BA2121 } /* Literal.String.Heredoc */
.listingblock .pygments .tok-si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.listingblock .pygments .tok-sx { color: #008000 } /* Literal.String.Other */
.listingblock .pygments .tok-sr { color: #BB6688 } /* Literal.String.Regex */
.listingblock .pygments .tok-s1 { color: #BA2121 } /* Literal.String.Single */
.listingblock .pygments .tok-ss { color: #19177C } /* Literal.String.Symbol */
.listingblock .pygments .tok-bp { color: #008000 } /* Name.Builtin.Pseudo */
.listingblock .pygments .tok-vc { color: #19177C } /* Name.Variable.Class */
.listingblock .pygments .tok-vg { color: #19177C } /* Name.Variable.Global */
.listingblock .pygments .tok-vi { color: #19177C } /* Name.Variable.Instance */
.listingblock .pygments .tok-il { color: #666666 } /* Literal.Number.Integer.Long */
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Servidores web y PaaS</h1>
<div class="details">
<span id="author" class="author">José Luis Zamora Sánchez</span><br>
<span id="email" class="email">&lt;<a href="mailto:joseluiszamora.jlz@gmail.com">joseluiszamora.jlz@gmail.com</a>&gt;</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Índice de contenidos</div>
<ul class="sectlevel1">
<li><a href="#sesion01">1. Introducción a los servidores de aplicaciones y a WildFly</a>
<ul class="sectlevel2">
<li><a href="#__qu%C3%A9_es_un_servidor_de_aplicaciones">1.1. ¿Qué es un servidor de aplicaciones?</a></li>
<li><a href="#_evoluci%C3%B3n_de_java_enterprise">1.2. Evolución de Java Enterprise</a></li>
<li><a href="#_introducci%C3%B3n_a_wildfly">1.3. Introducción a WildFly</a>
<ul class="sectlevel3">
<li><a href="#_instalaci%C3%B3n_de_wildfly">1.3.1. Instalación de WildFly</a></li>
<li><a href="#_definici%C3%B3n_de_dominio">1.3.2. Definición de dominio</a></li>
<li><a href="#_modos_de_trabajo_de_wildfly">1.3.3. Modos de trabajo de WildFly</a></li>
<li><a href="#_estructura_de_directorios_de_wildfly">1.3.4. Estructura de directorios de WildFly</a></li>
<li><a href="#_creaci%C3%B3n_de_un_usuario_administrador">1.3.5. Creación de un usuario administrador</a></li>
</ul>
</li>
<li><a href="#_herramientas_de_administraci%C3%B3n_de_wildfly">1.4. Herramientas de administración de WildFly</a>
<ul class="sectlevel3">
<li><a href="#_consola_de_administraci%C3%B3n_web">1.4.1. Consola de administración Web</a></li>
<li><a href="#_command_line_interface_cli">1.4.2. Command Line Interface (CLI)</a></li>
<li><a href="#_edici%C3%B3n_manual_de_los_ficheros_de_configuraci%C3%B3n">1.4.3. Edición manual de los ficheros de configuración</a></li>
</ul>
</li>
<li><a href="#_aplicaciones_java_enterprise">1.5. Aplicaciones Java Enterprise</a>
<ul class="sectlevel3">
<li><a href="#_empaquetado_de_aplicaciones">1.5.1. Empaquetado de aplicaciones</a></li>
<li><a href="#_despliegue_de_aplicaciones_en_wildfly">1.5.2. Despliegue de aplicaciones en WildFly</a></li>
</ul>
</li>
<li><a href="#_arquitecturas_basadas_en_microservicios">1.6. Arquitecturas basadas en microservicios</a>
<ul class="sectlevel3">
<li><a href="#_ventajas_de_una_arquitectura_basada_en_microservicios_sobre_una_monol%C3%ADtica">1.6.1. Ventajas de una arquitectura basada en Microservicios sobre una monolítica</a></li>
<li><a href="#_desventajas">1.6.2. Desventajas</a></li>
<li><a href="#_cu%C3%A1ndo_utilizar_microservicios">1.6.3. Cuándo utilizar microservicios</a></li>
<li><a href="#_java_ee_y_los_microservicios">1.6.4. Java EE Y los microservicios</a></li>
<li><a href="#_docker">1.6.5. Docker</a></li>
</ul>
</li>
<li><a href="#_referencias">1.7. Referencias</a></li>
<li><a href="#_ejercicios_de_introducci%C3%B3n_a_los_servidores_de_aplicaciones_y_a_wildfly">1.8. Ejercicios de Introducción a los servidores de aplicaciones y a WildFly</a>
<ul class="sectlevel3">
<li><a href="#_desarrollo_de_un_microservicio_0_3_puntos">1.8.1. Desarrollo de un microservicio  (0.3 Puntos)</a></li>
<li><a href="#_otras_formas_de_despliegue_0_3_puntos">1.8.2. Otras formas de despliegue  (0.3 Puntos)</a></li>
<li><a href="#_virtualizaci%C3%B3n_con_docker_0_6_puntos">1.8.3. Virtualización con Docker (0.6 Puntos)</a></li>
<li><a href="#_entrega">1.8.4. Entrega</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="sesion01">1. Introducción a los servidores de aplicaciones y a WildFly</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="__qué_es_un_servidor_de_aplicaciones">1.1. ¿Qué es un servidor de aplicaciones?</h3>
<div class="paragraph">
<p>Un servidor de aplicaciones es una plataforma que implementa los servicios definidos en la especificación de Java Enterprise.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/paas01/Java_ee72.png" alt="Java ee72" width="66%">
</div>
</div>
<div class="paragraph">
<p>Estos servicios van desde la ejecución de aplicaciones web sencillas, basadas en Servlets/JSP hasta aplicaciones distribuidas con soporte transaccional, basadas en Enterprise Java Beans (EJB) o servicios Web.</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 70%;">
<colgroup>
<col style="width: 71%;">
<col style="width: 14%;">
<col style="width: 14%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Especificación</th>
<th class="tableblock halign-left valign-top">Java EE 6</th>
<th class="tableblock halign-left valign-top">Java EE 7</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Servlet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JavaServer Pages (JSP)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.3</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unified Expression Language (EL)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Debugging Support for Other Languages (JSR-45)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JavaServer Pages Standard Tag Library (JSTL)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JavaServer Faces (JSF)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java API for RESTful Web Services (JAX-RS)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/a</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java API for WebSocket (WebSocket)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/a</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java API for JSON Processing (JSON-P)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">n/a</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Common Annotations for the Java Platform (JSR-250)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enterprise JavaBeans (EJB)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.1 Lite</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.2 Lite</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java Transaction API (JTA)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java Persistence API (JPA)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bean Validation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Managed Beans</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interceptors</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contexts and Dependency Injection (CDI)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.1</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">¿Se puede considerar Tomcat un servidor de aplicaciones?</div>
Tomcat implementa un contenedor Web que en su versión 8 cumple las especificaciones Servlet 3.1, JSP 2.3, y EL 3.0 y WebSockets, pero no incluye un contenedor de EJB&#8217;s o da soporte a otras APIs como JMS, por tanto no se puede considerar como un servidor de aplicaciones completo.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Sí que es cierto es que de la combinación de Tomcat con Spring, junto con otras librerías de terceros resulta en algo parecido a un servidor de aplicaciones. Es más, proyectos como Spring Boot o DropWizard permiten integrar dentro de un único fichero, tanto código de aplicación como los servicios que necesita para funcionar.</p>
</div>
<div class="paragraph">
<p>La principal ventaja de un servidor de aplicaciones es que integra todo los componentes necesarios para empezar a trabajar, permitiendo al programador centrarse en lo más importante que es el desarrollo de aplicaciones. Esto no quiere decir que no podamos utilizar las librerías que creamos oportunas, pero el producto ya nos ofrece una solución válida en conjunto.</p>
</div>
<div class="paragraph">
<p>Para un administrador de sistemas también es más sencillo pues al ser un producto estándar, puede trabajar sobre el servidor sin necesidad de conocer los entresijos de las aplicaciones que ejecutan.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">¿Debemos entonces debemos utilizar un servidor de aplicaciones para todo?</div>
No necesariamente, puesto que la administración y configuración de un Tomcat, Jetty u otros servidores es más sencilla, siempre y cuando nuestra aplicación no requiera de servicios más avanzados. Por otra parte si nuestro desarrollo es muy específico puede compensar el invertir tiempo y desarrollar una solución a medida con librerías y/o frameworks alternativos.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Lo que nos debe llevar a pensar en utilizar un servidor de aplicaciones es considerar que cuestiones como la <strong>estandarización, la alta disponibilidad, la monitorización del rendimiento, transaccionalidad y seguridad</strong> son importantes en nuestros desarrollos así como el poder centrarnos en resolver un problema abstrayéndonos de los servicios que vamos a utilizar.</p>
</div>
<div class="paragraph">
<p>La especificación Java EE 7 se publicó en mayo de 2013 pero no es hasta finales de 2015 cuando se puede considerar como instaurada. La propia Oracle certifica su producto comercial WebLogic en Octubre de 2015 y RedHat, a fecha de redacción de estos apuntes aún no ha publicado una versión comercial certificada.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/paas01/javaee_players.png" alt="javaee players">
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Los más importantes son</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Comerciales: Oracle WebLogic, IBM WebSphere, Red Hat JBoss EAP.</p>
</li>
<li>
<p>Open Source: Oracle GlassFish, RedHat WildFly.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<div class="title">¿Merece la pena pagar por un producto comercial?</div>
<p>Hace unos años la respuesta a esta pregunta era más sencilla, pero hoy en día con la cantidad de información disponible y la madurez de los productos Open Source actuales es complicado el amortizar los costes de licencias, sobre todo en el caso de nuevos desarrollos basados en Java EE 6 o 7.</p>
</div>
</div>
<div class="sect2">
<h3 id="_evolución_de_java_enterprise">1.2. Evolución de Java Enterprise</h3>
<div class="paragraph">
<p>Desde sus inicios, la especificación Java Enterprise ha intentado definir y estandarizar los servicios que una aplicación de negocio necesita, y a lo largo de sus primeras versiones fue añadiendo nuevas tecnologías, si bien el desarrollo de aplicaciones era bastante complejo.</p>
</div>
<div class="paragraph">
<p>Los primeros servidores de aplicaciones de algún modo emulaban el modelo de Mainframe ya conocido en aplicaciones de grandes empresas pero especializado en la ejecución de aplicaciones java y suponían un coste elevado en hardware y licencias.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/paas01/sun_server.png" alt="sun server">
</div>
</div>
<div class="paragraph">
<p>Esta situación llevó a que surgieran iniciativas como Spring que ofrecían la misma idea de estandarización pero sustentada en contenedores web ligeros, gratuita y sustentada en una gran comunidad de desarrolladores.</p>
</div>
<div class="paragraph">
<p>Proyectos como Spring sirvieron para que, primero Sun y ahora Oracle, entendiesen que el desarrollo debía evolucionar hacía una concepción más sencilla donde el desarrollo fuese lo más cercano posible a la escritura de POJO&#8217;s y los servidores de aplicaciones mucho más ligeros y optimizados. Y por qué no decirlo, se consiguió aceptando como estándar las mejores ideas de los competidores. Esto se consigue sobre todo a partir de la madurez en el mercado de Java EE 6.</p>
</div>
</div>
<div class="sect2">
<h3 id="_introducción_a_wildfly">1.3. Introducción a WildFly</h3>
<div class="paragraph">
<p>WildFly es el nuevo nombre que recibe el servidor de aplicaciones JBoss, desarrollado por Red Hat. Frente a las versiones anteriores (JBoss AS 7.1 y EAP6) presenta las siguientes novedades:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Compatible y optimizado para la JVM de Java SE 7. Esto se traduce en mejoras de rendimiento en Entrada/Salida, políticas de Garbage collector y concurrencia.</p>
</li>
<li>
<p>Certificado para Java EE 7 Web y Full Profile.</p>
</li>
<li>
<p>Roles definidos dentro de los usuarios administradores. Se puede delimitar con mayor detalle las tareas que puede realizar un usuario administrador.</p>
</li>
<li>
<p>Nuevo Servidor Web. Tradicionalmente se utilizaba Tomcat, pero en esta versión se sustituye por Undertow, que proporciona un mayor rendimiento.</p>
</li>
<li>
<p>Mejoras en las herramientas de administración (Consola, línea de comandos).</p>
</li>
<li>
<p>Reducción del número de puertos de escucha a solo 2, puerto de  trabajo y puerto de administración.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Si bien es interesante académicamente poder trabajar con la última especificación de Java EE, Red Hat no ofrece ninguna variante con soporte comercial, por tanto en el mundo de la empresa es más recomendable continuar con una versión anterior ya sea comercial u Open Source.</p>
</div>
<div class="sect3">
<h4 id="_instalación_de_wildfly">1.3.1. Instalación de WildFly</h4>
<div class="paragraph">
<p>La instalación del servidor es muy sencilla. Basta con conectarse a <a href="http://www.wildfly.org" class="bare">http://www.wildfly.org</a> y descargarse un fichero ZIP. Es recomendable establecer la variable de entorno JBOSS_HOME apuntando a la carpeta donde se vaya a descomprimir el servidor:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="console"><span class="tok-go">export JBOSS_HOME=/usr/share/wildfly-8.2.1</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_definición_de_dominio">1.3.2. Definición de dominio</h4>
<div class="paragraph">
<p>Un dominio define un conjunto de propiedades, recursos e instancias de servidores de aplicaciones. La definición de dominios permite flexibilizar y organizar la instalación de servidores de aplicaciones, ya que es posible asignar distintos dominios dentro de un mismo host a distintas organizaciones y administradores. Las aplicaciones y recursos instaladas en un dominio son independientes de los otros dominios. Para permitir que distintos dominios puedan estar en marcha al mismo tiempo, cada dominio utiliza distintos puertos de servicio y administración.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/paas01/dominio.png" alt="dominio">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_modos_de_trabajo_de_wildfly">1.3.3. Modos de trabajo de WildFly</h4>
<div class="sect4">
<h5 id="_standalone">Standalone</h5>
<div class="paragraph">
<p>Es el modo más sencillo y habitual. Permite ejecutar WildFly como un proceso independiente. Este modo de trabajo no es incompatible con una configuración HA, por lo que podemos tener configurados varios servidores independientes en clúster. Para iniciar WildFly en modo Standalone hay que ejecutar el script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="console"><span class="tok-go">standalone.sh</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_managed_domain">Managed Domain</h5>
<div class="paragraph">
<p>En este modo se permite iniciar uno o varios servidores de WildFly administrados de forma conjunta desde un único dominio.  La forma de iniciar un dominio WildFly es a través del script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="console"><span class="tok-go">domain.sh</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Este script iniciará un proceso denominado Host Controller, que se encargará de iniciar los servidores administrados del dominio. El siguiente diagrama describe un dominio WildFly:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/paas01/DC-HC-Server.png" alt="DC HC Server">
</div>
</div>
<div class="paragraph">
<p>Los conceptos de host y servidor ya los conocemos, pero tenemos nuevos elementos:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Host Controller</dt>
<dd>
<p>Al ejecutar el script <em>domain.sh</em>, se inicia un proceso denominado Host Controller cuya única misión es la de iniciar/parar los distintos servidores que se hayan definido en la máquina. Para ello se comunica con el proceso <em>Domain Controller</em> que definiremos a continuación.</p>
</dd>
<dt class="hdlist1">Domain Controller</dt>
<dd>
<p>Dentro de un dominio debe existir un proceso Host Controller configurado como el Domain Controller, es decir como almacén central de la configuración del dominio. Este proceso será el encargado de gestionar las políticas de administración, de sincronizar dichas políticas con el resto de Host Controllers del dominio</p>
</dd>
<dt class="hdlist1">Server Group</dt>
<dd>
<p>Un server group es un conjunto de instancias que deben ser administradas como si fueran una sola. En una configuración de dominio puede haber uno o varios grupos, y cada servidor de aplicaciones debe ser miembro de un grupo, aún en el caso de que sólo exista un servidor en el dominio. Es responsabilidad del Domain Controller y de los Host Controllers que todos los servidores dentro de un grupo tengan una configuración coherente y los mismos despliegues.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_estructura_de_directorios_de_wildfly">1.3.4. Estructura de directorios de WildFly</h4>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/paas01/estructura.PNG" alt="estructura">
</div>
</div>
<div class="paragraph">
<p>Las carpetas más importantes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>appclient</strong>: contiene ficheros de configuración y propios del contenedor de aplicaciones clientes.</p>
</li>
<li>
<p><strong>bin</strong>: contiene varios ficheros de configuración de arranque, jboss-client.jar para acceder crear una aplicación cliente Java.</p>
</li>
<li>
<p><strong>domain</strong>: Contiene los ficheros de configuración del modo <em>Managed Domain</em> y datos de ejecución del servidor en este modo.</p>
</li>
<li>
<p><strong>standalone</strong>: Similar la anterior, pero específica del modo <em>Standalone</em>.</p>
</li>
<li>
<p><strong>welcome-content</strong>: Contenido estático de la aplicación web por defecto.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_creación_de_un_usuario_administrador">1.3.5. Creación de un usuario administrador</h4>
<div class="paragraph">
<p>Para poder comenzar a trabajar con WildFly es necesario crear un usuario administrador y para ello utilizaremos el script <em>add-user.sh</em>.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/paas01/add-user.png" alt="add user">
</div>
</div>
<div class="paragraph">
<p>En este ejemplo, hemos creado el usuario <em>experto</em> como usuario administrador perteneciente al ManagementRealm. Es importante contestar SI a la última pregunta para indicar que el usuario se podrá conectar al domain controller. Se generará una password encriptada que se utilizará a la hora de configurar un dominio de servidores de aplicaciones.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_herramientas_de_administración_de_wildfly">1.4. Herramientas de administración de WildFly</h3>
<div class="sect3">
<h4 id="_consola_de_administración_web">1.4.1. Consola de administración Web</h4>
<div class="paragraph">
<p>Mediante la consola de administración podemos acometer las tareas más básicas de una forma amigable. El puerto de administración habitual es el 9990, y para acceder a la consola basta con abrir la dirección:</p>
</div>
<div class="paragraph">
<p><a href="http://localhost:9990/App.html" class="bare">http://localhost:9990/App.html</a></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/paas01/WebConsole.png" alt="WebConsole">
</div>
</div>
<div class="paragraph">
<p>Comparada con la consola de administración de otros servidores como WebLogic o incluso GlassFish es mas rudimentaria, si bien ha mejorado notablemente con respecto a versiones anteriores.</p>
</div>
</div>
<div class="sect3">
<h4 id="_command_line_interface_cli">1.4.2. Command Line Interface (CLI)</h4>
<div class="paragraph">
<p>Se trata de una herramienta de administración desde una pantalla de terminal. A esta consola se accede ejecutando el script <strong>jboss-cli.sh</strong></p>
</div>
<div class="paragraph">
<p>Desde esta consola se puede cambiar la configuración de un servidor local o remoto. Parámetros más importantes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="console"><span class="tok-gp">$</span> ./jboss-cli.sh <span class="tok-o">[</span>--help<span class="tok-o">]</span> <span class="tok-o">[</span>--version<span class="tok-o">]</span> <span class="tok-o">[</span>--connect<span class="tok-o">]</span> <span class="tok-o">[</span>--controller<span class="tok-o">]</span> <span class="tok-o">[</span>--commands<span class="tok-o">]</span> <span class="tok-o">[</span>--user<span class="tok-o">]</span> <span class="tok-o">[</span>--password<span class="tok-o">]</span> <span class="tok-o">[</span>--file<span class="tok-o">]</span></code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--help</dt>
<dd>
<p>Muestra un listado de comandos admitidos</p>
</dd>
<dt class="hdlist1">--version</dt>
<dd>
<p>Muestra información de la versión de WildFly y de la máquina.</p>
</dd>
<dt class="hdlist1">--connect</dt>
<dd>
<p>Comando utilizado para conectarnos al servidor e iniciar su administración</p>
</dd>
<dt class="hdlist1">--controller</dt>
<dd>
<p>Host:puerto al que nos queremos conectar</p>
</dd>
<dt class="hdlist1">--commands</dt>
<dd>
<p>Permite especificar una o varias instrucciones de administración.</p>
</dd>
<dt class="hdlist1">--user/password</dt>
<dd>
<p>Credenciales para conectarse a un servidor, utilizadas normalmente al acceder a un servidor remoto.</p>
</dd>
<dt class="hdlist1">--file</dt>
<dd>
<p>Permite ejecutar un script con múltiples instrucciones de administración.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Ejemplos de uso:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="console"><span class="tok-gp">#</span>Conexión a un servidor <span class="tok-nb">local</span> <span class="tok-o">(</span>localhost:9990<span class="tok-o">)</span>
<span class="tok-go">./jboss-cli.sh --connect</span>

<span class="tok-gp">#</span>Conexión a un host controller remoto
<span class="tok-go">./jboss-cli.sh --connect --controller=192.168.10.1 --user=admin1234 --pasword=pass1234</span>
<span class="tok-gp">#</span>Ejecutar una secuencia de comandos
<span class="tok-go">./jboss-cli.sh --commands=&quot;connect,deploy prueba.jar&quot;</span>
<span class="tok-gp">#</span>Ejecutar un script de administración
<span class="tok-go">./jboss-cli.sh --file=myscript.cli</span>
<span class="tok-gp">#</span>Parar el servidor
<span class="tok-go">./jboss-cli.sh --connect --command=shutdown</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Ejemplo de script:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="console"><span class="tok-gp">#</span> Connect to Wildfly instance
<span class="tok-go">connect</span>

<span class="tok-gp">#</span> Create Spring Batch Module

<span class="tok-go">module add \</span>
<span class="tok-go">    --name=org.springframework.batch \</span>
<span class="tok-go">    --dependencies=javax.api,javaee.api \</span>
<span class="tok-go">    --resources=${wildfly.module.classpath}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>En el caso de que tengamos algún problema con la configuración, que no permita operar normalmente al servidor, podemos recurrir al siguiente comando:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="console"><span class="tok-go">./standalone.sh --admin-only</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Este comando permite arrancar el servidor en modo administración, bloqueado excepto para tareas administrativas. De esta forma podremos acceder a CLI y corregir la configuración. Una vez hecho esto, podemos salir del modo administración con el siguiente comando:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="console"><span class="tok-go">[standalone@localhost:9990/]reload --admin-only=false</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Una vez estemos conectados a una instancia de WildFly podemos trabajar directamente sobre la configuración del servidor como si fuera un sistema de ficheros:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/paas01/jbosscli.png" alt="jbosscli">
</div>
</div>
<div class="paragraph">
<p>Por último, si queremos una interfaz más amigable, podemos ejecutar la consola en modo gráfico:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="console"><span class="tok-go">./jboss-cli.sh --gui</span></code></pre>
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/paas01/jbosscliGUI.png" alt="jbosscliGUI">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_edición_manual_de_los_ficheros_de_configuración">1.4.3. Edición manual de los ficheros de configuración</h4>
<div class="paragraph">
<p>Toda la configuración del servidor persiste en ficheros XML que se pueden editar manualmente. En la siguiente sesión veremos con más detalle la forma en la que WildFly almacena esta configuración pero hay que tener en cuenta que lo recomendable hacer cambios en la configuración mediante las herramientas de administración, sobre todo en servidores de producción.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_aplicaciones_java_enterprise">1.5. Aplicaciones Java Enterprise</h3>
<div class="sect3">
<h4 id="_empaquetado_de_aplicaciones">1.5.1. Empaquetado de aplicaciones</h4>
<div class="paragraph">
<p>Hasta ahora hemos utilizado dos tipos de ficheros para empaquetar aplicaciones Java: ficheros JAR y ficheros WAR. Además de estos tipos hay un tercero específico de las aplicaciones Java Enterprise: el EAR.</p>
</div>
<div class="paragraph">
<p>Los ficheros JAR empaquetan clases Java. Un fichero JAR contiene clases Java compiladas (ficheros .class) junto con un descriptor de la aplicación.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/paas01/jarwar.png" alt="jarwar">
</div>
</div>
<div class="paragraph">
<p>Cuando un fichero JAR se añade al classpath de una JVM (Máquina Virtual Java) las clases incluidas en él se ponen a disposición de cualquier aplicación Java que ejecute la JVM. De la misma forma, cuando un fichero JAR se define en el classpath del compilador Java, las clases incluidas en él pueden utilizarse en las clases que estamos compilando.</p>
</div>
<div class="paragraph">
<p>Una idea fundamental relacionada con el empaquetado de clases es que el compilador Java y la máquina virtual Java tienen distintos classpath, esto es, resuelven las dependencias utilizando distintos ficheros. Esto trasladado a una aplicación Java Enterprise permite que para compilar una aplicación estándar, únicamente necesitemos una dependencia:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span class="tok-nt">&lt;dependencies&gt;</span>
        <span class="tok-nt">&lt;dependency&gt;</span>
            <span class="tok-nt">&lt;groupId&gt;</span>javax<span class="tok-nt">&lt;/groupId&gt;</span>
            <span class="tok-nt">&lt;artifactId&gt;</span>javaee-api<span class="tok-nt">&lt;/artifactId&gt;</span>
            <span class="tok-nt">&lt;version&gt;</span>7.0<span class="tok-nt">&lt;/version&gt;</span>
            <span class="tok-nt">&lt;scope&gt;</span>provided<span class="tok-nt">&lt;/scope&gt;</span>
		<span class="tok-nt">&lt;/dependency&gt;</span>
<span class="tok-nt">&lt;/dependencies&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>El servidor de aplicaciones por su parte contendrá tanto la especificación como las librerías (jars) específicas que implementen la especificación.</p>
</div>
<div class="paragraph">
<p>Las aplicaciones web empaquetadas en ficheros WAR son más complejas puesto que pueden contener recursos estáticos, clases compiladas y librerías Jar. Al desplegar una aplicación web en un servidor de aplicaciones, las librerías contenidas pasan a formar parte del classpath de la aplicación exclusivamente.</p>
</div>
<div class="paragraph">
<p>¿Qué ocurre si queremos utilizar una misma librería en distintas aplicaciones Web desplegadas en un servidor? Si las incluimos en cada aplicación y son pesadas, penalizará el arranque del servidor y elevará el consumo de recursos innecesariamente. Para evitarlo tenemos varias formas:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Incluir la librería directamente en el classpath del servidor (¡No recomendado!)</p>
</li>
<li>
<p>Despliegue del jar como <em>librería compartida</em>, en el caso concreto de WildFly sería declararla como módulo global del servidor en ficheros de configuración.</p>
</li>
<li>
<p>Si son aplicaciones relacionadas empaquetarlas dentro de un fichero EAR.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Los ficheros EAR representan una aplicación empresarial formada por distintos módulos (aplicaciones web y ficheros JAR). Los ficheros JAR pueden ser librerías o <em>Enterprise JavaBeans</em> (EJB) usados por las aplicaciones web y estarán disponibles para cualquier aplicación contenida.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/paas01/ear.png" alt="ear" width="50%">
</div>
</div>
<div class="paragraph">
<p>Otra característica de los EAR es que permite el control unificado (arranque, despliegue, parada&#8230;&#8203;) del conjunto de las aplicaciones contenidas.</p>
</div>
<div class="paragraph">
<p>Físicamente, un fichero EAR es un fichero comprimido con el mismo formato que los ficheros JAR. Todos los comandos que se pueden utilizar con los ficheros JAR (jar -tvf mi-fichero.jar, etc.) sirven para los ficheros EAR. Los ficheros EAR llevan la extensión .ear. La estructura de un fichero EAR es sencilla, contiene un conjunto de ficheros WAR, un conjunto de ficheros JAR y el directorio <em>META-INF</em>, en el que se encuentra los distintos ficheros de configuración necesarios. Opcionalmente puede contener el descriptor de despliegue <em>application.xml</em> en el que se identifican los módulos que se incluyen en él.</p>
</div>
</div>
<div class="sect3">
<h4 id="_despliegue_de_aplicaciones_en_wildfly">1.5.2. Despliegue de aplicaciones en WildFly</h4>
<div class="paragraph">
<p>WildFly nos ofrece tres posibilidades:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Despliegue desde sistema de ficheros (sólo en modalidad standalone).</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="console"><span class="tok-go">	cp example.war /usr/local/wildfly-8.2.1.Final/standalone/deployments</span></code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Escáner de despliegue</div>
<p>WildFly distingue entre aplicaciones empaquetadas (Jar,War,Ear) o aplicaciones descomprimidas (exploded). Por defecto el autodeploy está habilitado para las aplicaciones empaquetadas pero no para las exploded. En el caso de que el despliegue sea manual, se controla mediante ficheros auxiliares llamados <em>markers</em>. Estos ficheros ficheros también aparecen cuando falla un despliegue por autodeploy (fichero application.FAILED). Si lo eliminamos, el escáner intentará deplegar la aplicación de nuevo.</p>
</div>
<div class="paragraph">
<p>La configuración del escáner de despliegues se realiza sobre el fichero standalone.xml o a través de CLI:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span class="tok-nt">&lt;deployment-scanner</span> <span class="tok-na">scan-interval=</span><span class="tok-s">&quot;5000&quot;</span> <span class="tok-na">relative-to=</span><span class="tok-s">&quot;jboss.server.base.dir&quot;</span>
   <span class="tok-na">path=</span><span class="tok-s">&quot;deployments&quot;</span> <span class="tok-na">auto-deploy-zipped=</span><span class="tok-s">&quot;true&quot;</span> <span class="tok-na">auto-deploy-exploded=</span><span class="tok-s">&quot;false&quot;</span><span class="tok-nt">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Para más detalles podéis consultar la documentación de WildFly:  <a href="https://docs.jboss.org/author/display/WFLY8/Application+deployment" class="bare">https://docs.jboss.org/author/display/WFLY8/Application+deployment</a></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Mediante las herramientas de administración</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="console"><span class="tok-go">[standalone@localhost:9990/]deploy example.war</span></code></pre>
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/paas01/deploy.png" alt="deploy">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Uso de herramientas de terceros como por ejemplo wildfly-maven-plugin</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml">		<span class="tok-nt">&lt;plugin&gt;</span>
                <span class="tok-nt">&lt;groupId&gt;</span>org.wildfly.plugins<span class="tok-nt">&lt;/groupId&gt;</span>
                <span class="tok-nt">&lt;artifactId&gt;</span>wildfly-maven-plugin<span class="tok-nt">&lt;/artifactId&gt;</span>
                <span class="tok-nt">&lt;version&gt;</span>1.0.2.Final<span class="tok-nt">&lt;/version&gt;</span>
                <span class="tok-nt">&lt;executions&gt;</span>
                    <span class="tok-nt">&lt;execution&gt;</span>
                        <span class="tok-nt">&lt;phase&gt;</span>install<span class="tok-nt">&lt;/phase&gt;</span>
                        <span class="tok-nt">&lt;goals&gt;</span>
                            <span class="tok-nt">&lt;goal&gt;</span>deploy<span class="tok-nt">&lt;/goal&gt;</span>
                        <span class="tok-nt">&lt;/goals&gt;</span>
                    <span class="tok-nt">&lt;/execution&gt;</span>
                <span class="tok-nt">&lt;/executions&gt;</span>
            <span class="tok-nt">&lt;/plugin&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="console"><span class="tok-go">	[standalone@localhost:9990/]mvn wildfly:deploy</span>
<span class="tok-go">	[standalone@localhost:9990/]mvn wildfly:redeploy</span>
<span class="tok-go">	[standalone@localhost:9990/]mvn wildfly:undeploy</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">Ejecutar aplicacion sin instalación previa de WildFly <em>wildfly:run</em></div>
Es una función interesente del plugin de maven de cara a realizar pruebas o ejecutar la aplicación en una máquina donde no tenemos configurada ninguna instancia de WildFly. Este comando Maven descarga automáticamente un servidor WildFly en modo standalone y despliega en el la aplicación compilada.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_arquitecturas_basadas_en_microservicios">1.6. Arquitecturas basadas en microservicios</h3>
<div class="paragraph">
<p><em>Una arquitectura basada en microservicios es una forma de entender las aplicaciones como un conjunto de pequeños servicios, cada uno ejecutándose como proceso independiente y comunicándose con el resto mediante mecanismos sencillos y "agnósticos", a menudo HTTP. Estos servicios se diseñan sobre funciones de negocio y siguen estrategias de de despliegue independientes. Aunque se trate de servicios independientes suele existir una pequeña lógica de administración común para estos servicios, que pueden estar construidos usando distintos lenguajes de programación y diferentes tecnologías de almacenamiento.</em></p>
</div>
<div class="paragraph">
<p><em>Martin Fowler (padre del término microservicio)</em></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/paas01/micro1.png" alt="micro1" width="66%">
</div>
</div>
<div class="paragraph">
<p>Este tipo de arquitectura nace en contraposición a las grandes aplicaciones <em>Monolíticas</em>. En el mundo Java, una aplicación monolítica podría ser un EAR con una serie de módulos y librerías dependientes que se gestiona como una unidad. En si mismo ésto no tiene porqué ser un problema (sigue siendo un modelo válido) hasta que la propia envergadura del proyecto o la dificultad para alcanzar requerimientos de escalabilidad o separación de responsabilidades evidencíen dificultades de gestión. En cierta medida microservicios trata más de organización del trabajo que de tecnologías concretas.</p>
</div>
<div class="paragraph">
<p>También hay que destacar que el término de "micro" no se refiere al tamaño del servicio si no a la funcionalidad que desempeña. Para definir correctamente un microservicio hay que apoyarse en buenas prácticas de programación ya establecidas como la alta cohesión y bajo acoplamiento o el Principio de Responsabilidad Única (Un subsistema, módulo o incluso clase sólo debe tener un motivo para cambiar).</p>
</div>
<div class="paragraph">
<p>Se podría entender como un SOA 2.0 (Arquitectura Orientada a Servicios) o un SOA pragmático donde se sustituyen protocolos pesados como SOAP y elementos como ESB&#8217;s donde se ejecutaba gran cantidad de lógica por servicios donde la inteligencia está en el propio servicio y no existe un control y persistencia centralizados.</p>
</div>
<div class="sect3">
<h4 id="_ventajas_de_una_arquitectura_basada_en_microservicios_sobre_una_monolítica">1.6.1. Ventajas de una arquitectura basada en Microservicios sobre una monolítica</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Facilidad para escalar el desarrollo</dt>
<dd>
<p>Permite dividir el trabajo entre equipos de trabajo reducidos, con conocimientos completos del stack de desarrollo y con una responsabilidad funcional acotada. (Two Pizza teams)</p>
</dd>
<dt class="hdlist1">Aislamiento ante fallos</dt>
<dd>
<p>Si un servicio tiene un fallo, es factible corregir dicho servicio y desplegarlo individualmente sin afectar al resto de la aplicación.</p>
</dd>
<dt class="hdlist1">Despliegues más rápidos</dt>
<dd>
<p>Poder desplegar por partes facilita el poder realizar despliegues a producción más frecuentes y con un riesgo menor.</p>
</dd>
<dt class="hdlist1">Elimina la dependencia a largo plazo de una tecnología</dt>
<dd>
<p>El utilizar mecanismo de comunicación agnósticos, permite que podamos utilizar la tecnología más adecuada para cada servicio, en contraposición al modelo de EAR donde se elige un único "stack" para toda la aplicación. Si en un momento decidimos cambiar de tecnología, podemos ir reemplazando paulatinamente los servicios afectados.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_desventajas">1.6.2. Desventajas</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Complejidad de un sistema distribuido</dt>
<dd>
<p>Servicios independientes requieren una monitorización independiente, recursos de ejecución adicionales, herramientas de descubrimiento, gestión de logs&#8230;&#8203; en definitiva costes y complejidad adicionales a las de un proyecto monolítico.</p>
</dd>
</dl>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/paas01/deathstar.png" alt="deathstar">
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Requieren cultura DevOps</dt>
<dd>
<p>Las iniciativas DevOps permiten automatizar los procesos de validación y despliegue de los nuevos servicios y allanar las dificultades anteriores. Comentaremos con más detalle qué es DevOps en sesiones posteriores.</p>
</dd>
<dt class="hdlist1">Falta de herramientas</dt>
<dd>
<p>Las herramientas tradicionales están orientados a desarrollos monolíticos y no tanto a proyectos complejos distribuidos.</p>
</dd>
<dt class="hdlist1">Comunicación y coordinación entre equipos</dt>
<dd>
<p>Si bien gestionar un equipo grande es complejo, el coordinar y compartir conocimiento entre equipos independientes también plantea retos.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_cuándo_utilizar_microservicios">1.6.3. Cuándo utilizar microservicios</h4>
<div class="paragraph">
<p>Según Martin Fowler no se debería considerar una arquitectura basada en microservicios hasta tener un sistema monolítico que sea demasiado complejo de mantener. Nosotros añadiríamos otro motivo: cuando las necesidades de escalabilidad del trabajo lo justifiquen o se necesite utilizar distintas tecnologías en distintas funciones de negocio.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/paas01/productivity.png" alt="productivity" width="66%">
</div>
</div>
<div class="paragraph">
<p>Para un desarrollo ya existente, un enfoque muy aceptado es asegurar en primer lugar una que tenemos una aplicación monolítica correcta en términos de arquitectura:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Separación de funciones.</p>
</li>
<li>
<p>Alta cohesión y bajo acoplamiento utilizando APIs bien definidas.</p>
</li>
<li>
<p>Sin redundancias.</p>
</li>
<li>
<p>Diseño dirigido por el Dominio (DDD).</p>
</li>
<li>
<p>Lo demás "sobra".</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>De forma progresiva, se puede ir identificando las distintas funciones de negocio y separarlas en serivicios siguiendo el <em>principio de responsabilidad única</em> (SPR). Una vez definidos los servicios más básicos, las aplicaciones harán uso de ellos combinándolos según diferentes patrones (Ver referencias).</p>
</div>
<div class="paragraph">
<p>Una vez definidos los servicios básicos las aplicaciones harán uso de ellos combinándolos siguiendo distintos patrones:</p>
</div>
</div>
<div class="sect3">
<h4 id="_java_ee_y_los_microservicios">1.6.4. Java EE Y los microservicios</h4>
<div class="paragraph">
<p>El estado de evolución actual de la especificación Java EE permite afrontar el desarrollo de aplicaciones basados en nuevas arquitecturas. Hoy en día, es razonable utilizar un servidor de aplicaciones para desplegar un único servicio basado en Java EE sin incurrir en un consumo excesivo de recursos y beneficiándonos de años de estandarización y una amplia gama de servicios.</p>
</div>
<div class="paragraph">
<p>En cifras, usar un servidor de aplicaciones completo hoy en día puede suponer un sobrecoste de unos 30-50Mb de RAM sobre una aplicación java standalone , así como unos 100Mb de espacio en disco y el tiempo de arranque puede ser de 1-3 segundos de tiempo. En una aplicación empresarial con un número de servicios limitado esto no supone un problema. De hecho, resulta curioso ver cómo se ha ido reduciendo el consumo de recursos en la parte servidora y sin embargo hemos sobrepasado el consumo de las aplicaciones de escritorio pesadas en el lado del cliente (Vease Chrome, por ejemplo).</p>
</div>
<div class="paragraph">
<p>Sólo en el caso de aplicaciones altamente escalables y orientadas a internet (al nivel de Google, Netflix, etc.), merece la pena invertir esfuerzos en reducir al máximo las librerías necesarias para que un servicio funcione. Aún así puede ser más ventajoso aprovechar la modularidad de los servidores de aplicaciones que construir una solución desde cero.</p>
</div>
<div class="paragraph">
<p>Hay ponentes como Adam Bien que plantean un modelo minimalista de aplicación Java EE con las siguientes características:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">1 servidor de aplicaciones, 1 dominio y 1 WAR</dt>
<dd>
<p>El concepto de servicio quedaría constituido por un servidor de aplicaciones que ofrezca todo el API Java EE (Full Profile) a una aplicación desplegada como WAR que implemente un servicio.</p>
</dd>
<dt class="hdlist1">WARs ligeras</dt>
<dd>
<p>El tamaño de un fichero WAR y su complejidad interna influye negativamente en los tiempos de despliegue y arranque de una aplicación. Para conseguir mejores resultados Adam Bien propone los siguientes cambios sobre el modelo de desarrollo de aplicaciones Web:</p>
<div class="ulist">
<ul>
<li>
<p>Utilizar preferentemente las librerías que proporciona el servidor de aplicaciones, en lugar de incluirlas en la aplicación. Esto ya puede suponer pasar de trabajar con un fichero de varios megabytes a unos pocos Kilobytes.</p>
</li>
<li>
<p>Aplicaciones Autocontenidas: toda la lógica del servicio debe estar incluida dentro del War.</p>
</li>
<li>
<p>Reducir o eliminar los módulos JAR internos. Ya hemos comentado que es habitual trabajar con aplicaciones WAR que contienen a su vez librerías JAR con clases diversas y EJB&#8217;s. Este esquema ralentiza las compilaciones y despliegues y en realidad la aplicación siempre se compila o despliega como un todo, por lo que la división interna en librerías no aporta ventajas en muchos casos.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Estructura del código</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>No utilizar interfaces. Únicamente los utilizaremos cuando sepamos que vamos a tener diferentes implementaciones para una misma funcionalidad, pero hasta entonces no complicar el código innecesariamente.</p>
</li>
<li>
<p>Centrarnos en el código de negocio. Java EE permite que las aplicaciones estén compuestas básicamente por POJOS y permite abstraer la complejidad de los servicios. El trabajar con objetos pojo tiene el beneficio adicional de facilitar las pruebas unitarias</p>
</li>
<li>
<p>Pocas anotaciones (Convención sobre declaración): Evitar declarar propiedades que ya tengan el mismo valor por defecto dentro de su especificación.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Ejemplo de microservicio <em>minimalista</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span class="tok-nd">@Path</span><span class="tok-o">(</span><span class="tok-s">&quot;cursos&quot;</span><span class="tok-o">)</span>
<span class="tok-kd">public</span> <span class="tok-kd">class</span> <span class="tok-nc">CursosResource</span> <span class="tok-o">{</span>

    <span class="tok-nd">@GET</span>
    <span class="tok-nd">@Produces</span><span class="tok-o">(</span><span class="tok-s">&quot;application/json&quot;</span><span class="tok-o">)</span>
    <span class="tok-kd">public</span> <span class="tok-n">JsonObject</span> <span class="tok-nf">all</span><span class="tok-o">(){</span>
        <span class="tok-k">return</span> <span class="tok-n">Json</span><span class="tok-o">.</span><span class="tok-na">createObjectBuilder</span><span class="tok-o">().</span><span class="tok-na">add</span><span class="tok-o">(</span><span class="tok-s">&quot;cursos&quot;</span><span class="tok-o">,</span><span class="tok-s">&quot;JavaEE, JavaScript, MongoDB&quot;</span><span class="tok-o">).</span><span class="tok-na">build</span><span class="tok-o">();</span>
    <span class="tok-o">}</span>

<span class="tok-o">}</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_docker">1.6.5. Docker</h4>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/paas01/Docker_logo.png" alt="Docker logo">
</div>
</div>
<div class="paragraph">
<p>Docker ha supuesto el salto a la fama del concepto de <em>contenerización</em> de servicios y viene a ser una mezcla de máquina virtual con control de versiones tipo Subversion. Permite desplegar todo el stack de una aplicación o servicio en una máquina con un simple comando <em>pull</em> como si fuera un único paquete. Se apoya los conceptos básicos de <em>imagen</em> y <em>contenedor</em>:</p>
</div>
<div class="paragraph">
<p>Una <strong>imagen</strong> se puede considerar como un sistema de archivos en el que podemos añadir lo que la aplicación necesite para funcionar, como una máquina virtual de Java o la instalación de un servidor de aplicaciones. Una característica fundamental es que está formado por capas, que funcionan como los <em>commit</em> de Git o SVN. Cada vez que se añade una capa, se superponen nuevos ficheros sobre la imagen inicial. En este caso es fundamental dejar en la última capa el despliegue de la aplicación para que cuando ésta se modifique, la imagen conserve todas sus capas y sustituya únicamente la última (que tendrá el tamaño del WAR desplegado). Aquí tenemos una importante mejor en el caso de las aplicaciones Java ligeras que proponemos, especialmente si la comparamos con las basadas en Java StandAlone (o FAT Jars).</p>
</div>
<div class="paragraph">
<p>Llamamos <strong>contenedor</strong> a la instancia en ejecución de una imagen. Apoyándose en los mecanismos de seguridad de Linux, el container se ejecuta en un espacio de memoria separado, con lo que es tarea del programador el definir la comunicación entre los procesos del container y el resto de la máquina (gestionando los puertos o montando directorios físicos fundamentalmente). Hay que tener siempre presente que cada vez que se inicia un contenedor, se parte de la imagen definida por lo que cualquier cambio que se realice sobre el sistema de ficheros propio del contenedor NO se almacenará en la imagen y por tanto se perderá.</p>
</div>
<div class="paragraph">
<p>Entender Docker es mucho más sencillo en la práctica, así que en los ejercicios veremos un pequeño ejemplo.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_referencias">1.7. Referencias</h3>
<div class="ulist">
<ul>
<li>
<p>Información sobre Roles Java EE <a href="http://docs.oracle.com/javaee/6/tutorial/doc/bnaca.html" class="bare">http://docs.oracle.com/javaee/6/tutorial/doc/bnaca.html</a> .</p>
</li>
<li>
<p>Wiki con los distintos servidores de aplicaciones y sus especificaciones <a href="http://en.wikipedia.org/wiki/Java_Platform,_Enterprise_Edition" class="bare">http://en.wikipedia.org/wiki/Java_Platform,_Enterprise_Edition</a> .</p>
</li>
<li>
<p>Información sobre WildFly <a href="http://wildfly.org/about/" class="bare">http://wildfly.org/about/</a> .</p>
</li>
<li>
<p>Guia de iniciación <a href="https://docs.jboss.org/author/display/WFLY8/Getting+Started+Guide" class="bare">https://docs.jboss.org/author/display/WFLY8/Getting+Started+Guide</a> .</p>
</li>
<li>
<p>Guía completa de administración <a href="https://docs.jboss.org/author/display/WFLY8/Admin+Guide#AdminGuide-Examplesinthisguide" class="bare">https://docs.jboss.org/author/display/WFLY8/Admin+Guide#AdminGuide-Examplesinthisguide</a> .</p>
</li>
<li>
<p>Despliegues desde sistema de ficheros <a href="https://docs.jboss.org/author/display/WFLY8/Application+deployment" class="bare">https://docs.jboss.org/author/display/WFLY8/Application+deployment</a></p>
</li>
<li>
<p>WildFly Maven Plugin <a href="https://docs.jboss.org/wildfly/plugins/maven/latest/index.html" class="bare">https://docs.jboss.org/wildfly/plugins/maven/latest/index.html</a></p>
</li>
<li>
<p>Java EE 7 Examples <a href="https://github.com/javaee-samples/javaee7-samples" class="bare">https://github.com/javaee-samples/javaee7-samples</a></p>
</li>
<li>
<p>Spring Boot <a href="http://projects.spring.io/spring-boot/" class="bare">http://projects.spring.io/spring-boot/</a></p>
</li>
<li>
<p>Dropwizard <a href="http://www.dropwizard.io/" class="bare">http://www.dropwizard.io/</a></p>
</li>
<li>
<p>WildFly Swarm <a href="http://wildfly.org/swarm/" class="bare">http://wildfly.org/swarm/</a></p>
</li>
<li>
<p>Payara <a href="http://www.payara.co.uk/about" class="bare">http://www.payara.co.uk/about</a></p>
</li>
<li>
<p>WAS Liberty <a href="https://developer.ibm.com/wasdev/" class="bare">https://developer.ibm.com/wasdev/</a></p>
</li>
<li>
<p>Desarrollo con WildFly y Docker <a href="http://tools.jboss.org/blog/2015-03-03-docker-and-wildfly-2.html" class="bare">http://tools.jboss.org/blog/2015-03-03-docker-and-wildfly-2.html</a></p>
</li>
<li>
<p>Introducción a los microservicios <a href="http://microservices.io/patterns/microservices.html" class="bare">http://microservices.io/patterns/microservices.html</a></p>
</li>
<li>
<p>Patrones de diseño para microservicios <a href="http://blog.arungupta.me/microservice-design-patterns/" class="bare">http://blog.arungupta.me/microservice-design-patterns/</a></p>
</li>
<li>
<p>Docker <a href="https://www.docker.com/" class="bare">https://www.docker.com/</a></p>
</li>
<li>
<p>Simulador online de Docker <a href="http://dockersim.com/" class="bare">http://dockersim.com/</a></p>
</li>
<li>
<p>Docker Maven plugin <a href="https://github.com/spotify/docker-maven-plugin/tree/master" class="bare">https://github.com/spotify/docker-maven-plugin/tree/master</a></p>
</li>
<li>
<p>ECB Model <a href="http://www.cs.sjsu.edu/~pearce/modules/patterns/enterprise/ecb/ecb.htm" class="bare">http://www.cs.sjsu.edu/~pearce/modules/patterns/enterprise/ecb/ecb.htm</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_ejercicios_de_introducción_a_los_servidores_de_aplicaciones_y_a_wildfly">1.8. Ejercicios de Introducción a los servidores de aplicaciones y a WildFly</h3>
<div class="paragraph">
<p>Al ser los primero ejercicios del módulo de PaaS debéis hacer un fork del repositorio <em>ejercicios_paas</em>. En el debéis almacenar todos los ejercicios del módulo Servidores Web y PaaS independientemente de que luego en IntelliJ se gestionen en proyectos separados. De hecho, en las sesiones OpenShift trabajaremos con repositorios Git independientes por aplicación.</p>
</div>
<div class="paragraph">
<p>Además de este repositorio, tenéis los ejemplos de cada sesión dentro de la carpeta <em>ejemplos</em> del mismo repositorio, por si queréis probarlos con más detalle.</p>
</div>
<div class="sect3">
<h4 id="_desarrollo_de_un_microservicio_0_3_puntos">1.8.1. Desarrollo de un microservicio  (0.3 Puntos)</h4>
<div class="paragraph">
<p>Partiendo de que ya habéis trabajado con WildFly en sesiones anteriores vamos a centrarnos en el desarrollo de una aplicación Java EE, de nombre <em>cursos</em>, que sirva para practicar los distintos tipos de despliegue que admite el servidor tanto como instalación local como virtualizada a partir de una imagen de Docker.</p>
</div>
<div class="paragraph">
<p>Para crear el proyecto utilizaremos Maven y un arquetipo elaborado por Adam Bien, que ofrece una aplicación web similar al arquetipo estándar <em>webapp-javaee7</em> pero con una única dependencia que permite referenciar todo el API de Java EE. Básicamente es un proyecto web minimalista con todo lo necesario para desarrollar.</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 70%;">
<colgroup>
<col style="width: 42%;">
<col style="width: 42%;">
<col style="width: 14%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">GroupID</th>
<th class="tableblock halign-left valign-top">Artefacto</th>
<th class="tableblock halign-left valign-top">Versión</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">com.airhacks</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">javaee7-essentials-archetype</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.3</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="_pasos_a_seguir">Pasos a seguir</h5>
<div class="paragraph">
<p>1.- Crearemos un nuevo módulo Maven dentro del proyecto de ejercicios a partir de este arquetipo y lo denominaremos cursos. Las propiedades completas del nuevo artefacto serán:</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 70%;">
<colgroup>
<col style="width: 42%;">
<col style="width: 42%;">
<col style="width: 14%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">GroupID</th>
<th class="tableblock halign-left valign-top">Artefacto</th>
<th class="tableblock halign-left valign-top">Versión</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">org.expertojava.paas</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cursos</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.0</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Por último indicaremos que el nuevo módulo dentro de IntelliJ se llamará <em>cursos</em> así como el directorio dentro del proyecto principal.</p>
</div>
<div class="paragraph">
<p>2.- Renombraremos el paquete <em>com.airhacks</em> del proyecto generado a <em>es.ua.expertojava.paas.cursos</em> mediante la herramienta <em>Refactor</em> de IntelliJ. Tambien eliminaremos el paquete <em>com</em> que queda vacío tras el proceso anterior.</p>
</div>
<div class="paragraph">
<p>3.- Dentro del repositorio de ejercicios hay una carpeta <em>sesion1</em> con subcarpetas de nombre: boundary, control y entity. Debéis copiar las tres carpetas a dentro de la carpeta es/ua/expertojava/paas/cursos/ del proyecto. Al hacerlo IntelliJ automáticamente importará las clases Java contenidas en dichas carpetas. La estructura del proyecto debe quedar de la siguiente forma:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/paas01/ejer1.png" alt="ejer1">
</div>
</div>
<div class="paragraph">
<p>Lo que estamos haciendo es dividir una funcion de negocio "cursos" en tres paquetes distintos con diferentes cometidoas:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Boundary</dt>
<dd>
<p>Contiene las clases que definen la interfaz entre la función de negocio y el exterior.</p>
</dd>
<dt class="hdlist1">Control</dt>
<dd>
<p>Son las clases que definen la ejecución del servicio e interactuan con las otras dos capas.</p>
</dd>
<dt class="hdlist1">Entity</dt>
<dd>
<p>Son las clases que gestionan elementos de información persistentes, de mayor o menor granularidad pero con significado propio.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Esta forma de trabajar se llama patrón Entity-Control-Boundary y es una variación del MVC orientado a servicios.</p>
</div>
<div class="paragraph">
<p>4.- Añadir la unidad de persistencia al proyecto. Para ello basta con copiar la carpeta META-INF del directorio <em>sesion1</em> a la ruta /src/main/resources del proyecto.</p>
</div>
<div class="paragraph">
<p>5.- Crear la configuración de despliegue en IntelliJ para poder desplegar la aplicación en nuestra instancia de WildFly.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Si la configuración de ejecución os muestra un mensaje de error indicando que no está definida la versión del JDK a utilizar, ésta se puede establecer desde File-&#8594; Project Structure -&#8594; Project JDK. En nuestro caso trabajaremos con JDK 1.8.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>6.- Una vez desplegada la aplicación comprobar que funciona correctamente mediante la herramienta <em>curl</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="console"><span class="tok-gp">#</span>Dar de alta un curso
<span class="tok-go">curl -H &quot;Content-Type: application/json&quot; -X POST -d &#39;{&quot;nombre&quot;:&quot;Curso de prueba&quot;}&#39; http://localhost:8080/cursos/resources/cursos</span>

<span class="tok-gp">#</span>Obtener la lista de curso almacenada
<span class="tok-go">curl -X GET http://localhost:8080/cursos/resources/cursos</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>7.- Realizar el undeploy desde IntelliJ</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/paas01/undeploy.png" alt="undeploy">
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_otras_formas_de_despliegue_0_3_puntos">1.8.2. Otras formas de despliegue  (0.3 Puntos)</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Indicar en el fichero <strong>soluciones.txt</strong>, dentro de vuestro proyecto de <em>ejercicios_paas</em>, los pasos a seguir para realizar las siguientes tareas:</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Desplegar la aplicación mediante Autodeploy.</p>
</li>
<li>
<p>Desplegar la aplicación mediante CLI.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Crear un script de CLI, de nombre <strong>script.cli</strong>, que liste las aplicaciones desplegadas, elimine la aplicación cursos.war y que pare el servidor.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_virtualización_con_docker_0_6_puntos">1.8.3. Virtualización con Docker (0.6 Puntos)</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Nota</div>
Este ejercicio será una demostración <em>guiada</em> para que os familiaricéis con Docker, y sentar las bases para quien quiera profundizar más en el tema.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>La principal diferencia entre una aplicación desplegada en una máquina virtual con respecto a Docker es que el conjunto de capas sobre las que se apoya la aplicación es más reducido:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/paas01/vmvscontainer.png" alt="vmvscontainer">
</div>
</div>
<div class="paragraph">
<p>Los contenedores se ejecutan en el espacio de memoria del Sistema operativo Host (debidamente aislados) y no requieren disponer de un sistema de archivos tan complejo como el de un sistema operativo, si no que puede apoyarse en las herramientas específicas necesarias. El resultado es que trabajamos con imágenes más pequeñas y tiempos de arranque mucho más rápidos. También hay que recordar que las imágenes están compuestas por capas apiladas por lo que un cambio en la aplicación desplegada puede suponer sustituir una sola capa, si la imagen está bien estructurada (si se tiene que modificar una capa intermedia, se reemplazan todas las capas dependientes).</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/paas01/docker-layered-filesystem.png" alt="docker layered filesystem" width="50%">
</div>
</div>
<div class="paragraph">
<p>La composición en capas de una imagen se define paso a paso en un fichero denominado <em>Dockerfile</em>. Un ejemplo:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="console"><span class="tok-go">FROM jboss/wildfly:8.2.1.Final</span>
<span class="tok-go">MAINTAINER José Luis Zamora Sánchez joseluiszamora@jlz.gmail.com</span>
<span class="tok-go">EXPOSE 8080 9990</span>
<span class="tok-go">RUN /opt/jboss/wildfly/bin/add-user.sh expertojava expertojava --silent</span>
<span class="tok-go">COPY target/cursos.war /opt/jboss/wildfly/standalone/deployments/</span>
<span class="tok-go">CMD [&quot;/opt/jboss/wildfly/bin/standalone.sh&quot;, &quot;-b&quot;, &quot;0.0.0.0&quot;, &quot;-bmanagement&quot;,&quot;0.0.0.0&quot;]</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Lo primero que se indica es la capa base que vamos a utilizar, y para ello podemos utilizar una imagen que ya tengamos instalada, o bien una imagen que nos descarguemos de un repositorio. El repositorio por defecto de Docker es <strong>Docker-Hub</strong>, con un planteamiento muy similar a Git Hub. En este repositorio es donde se suelen publicar las imágenes oficiales de todos los proyectos Open Source.</p>
</div>
<div class="paragraph">
<p>También debemos indicar quien será el responsable mantener esta imagen y cómo contactar con él.</p>
</div>
<div class="paragraph">
<p>La comunicación entre el contenedor y el sistema operativo host se realiza mediante conexiones de red, de forma muy similar a otras soluciones como VirtualBox, si bien la definición se realiza en dos partes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Desde el fichero Dockerfile donde se indica que puertos serán accesibles desde el exterior con el comando EXPOSE.</p>
</li>
<li>
<p>Al iniciar el contenedor donde podemos mapear puertos del Host con puertos del contenedor.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A continuación veréis una serie de comandos que realizan operaciones sobre el sistema de archivos como RUN, COPY que realmente se ejecutan en el momento de generar la imagen, no al iniciarse. Es importante indicar que cada línea del fichero Dockerfile supone una capa, por lo que si agrupamos varios comandos en una línea, físicamente se agruparán en una capa. Si os fijáis, con el comando RUN estamos definiciendo quien será el usuario administrador de la instancia de WildFly.</p>
</div>
<div class="paragraph">
<p>Esto es muy útil, por ejemplo, si copiamos un fichero ZIP con un servidor de aplicaciones, lo descomprimimos y lo eliminamos en la misma fila. Si lo hacemos así, sólo se almacenarán las diferencias, es decir la nueva carpeta descomprimida del servidor. Si lo hacemos paso a paso, tendremos una capa intermedia con el ZIP completo, que tendremos que descargar para luego eliminarlo en capas posteriores.</p>
</div>
<div class="paragraph">
<p>Por último, con el comando CMD estamos indicando qué se tiene que ejecutar por defecto al iniciar un contenedor.</p>
</div>
<div class="sect4">
<h5 id="_cliente_docker">Cliente docker</h5>
<div class="paragraph">
<p>Para trabajar con imágenes y contenedores, necesitamos una herramienta cliente, y en nuestro caso es el comando <em>docker</em>. En este enlace tenéis una "chuleta" con comandos útiles para trabajar con imágenes y con contenedores:</p>
</div>
<div class="paragraph">
<p><a href="https://github.com/javaee-samples/docker-java/blob/master/chapters/docker-commands.adoc" class="bare">https://github.com/javaee-samples/docker-java/blob/master/chapters/docker-commands.adoc</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_objetivos">Objetivos</h5>
<div class="paragraph">
<p>Vamos a crear una imagen independiente que despliegue nuestro servicio, para ello seguiremos los siguientes pasos:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Abrir una cuenta gratuita en Docker Hub</p>
<div class="paragraph">
<p>La idea es que vuestra imagen quede publicada y que nosotros podamos validarla directamente a partir del repositorio, con lo que debéis acceder a la página de Docker Hub y registraros como usuarios. Posteriormente configuraréis vuestro cliente de Docker para que se conecte a Docker Hub utilizando vuestra cuenta:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="console"><span class="tok-gp">expertojava@expertojava:~/IdeaProjects/cursos$</span> docker login

<span class="tok-go">Username: &lt;vuestro usuario&gt;</span>
<span class="tok-go">Password:</span>
<span class="tok-go">Email: &lt;vuestro correo&gt;</span>
<span class="tok-go">WARNING: login credentials saved in /home/expertojava/.docker/config.json</span>
<span class="tok-go">Login Succeeded</span></code></pre>
</div>
</div>
</li>
<li>
<p>Simular cómo se actualizaría y desplegaría un servicio en producción:</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="console"><span class="tok-go">docker run -it --name=miservicio -p 8080:8080 -p 9990:9990 djbyte1977/wildfly  # Para crear un nuevo contenedor</span>
<span class="tok-go">docker pull djbyte1977/wildfly # Para actualizar la imagen</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Con estos comandos os descargaréis la última versión de la imagen wildfly de ejemplo que hemos preparado con la aplicación cursos.war ya desplegada y preparada para funcionar. También estamos mapeando los puertos 8080 y 9090 con sus equivalentes en el contenedor. El fichero Dockerfile utilizado para crear esta imagen es el que tenéis de ejemplo, por lo que si se modifica la aplicación cursos.war no tendreis que volver a descargar las capas anteriores (WildFly base + creación del usuario administrador).</p>
</div>
<div class="paragraph">
<p>El comando <em>run -it</em> crea un contenedo con el servidor de aplicaciones en modo interactivo, por lo que será análogo a lanzar un servidor directamente desde un CMD. Alternativamente sería posible lanzarlo en background con el comando:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="console"><span class="tok-go">docker run -d --name=miservicio -p 8080:8080 -p 9990:9990 djbyte1977/wildfly</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>El comando run realmente crea y ejecuta un contenedor por lo que si se ha usado previamente y se ha especificado un nombre, en la siguiente ejecución nos dará un error indicando que ya existe un contenedor con ese nombre .Una vez ya se ha asignado un nombre al contenedor se puede ejecutar simplemente:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="console"><span class="tok-go">docker start miservicio    #-i modo interactivo</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Para enumerar los contenedores existentes tenemos el comando:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="console"><span class="tok-go">docker ps    # Lista los controles en ejecución</span>
<span class="tok-go">docker ps -a # Lista todos los controles</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Una vez hemos lanzado un contenedor en background, lo podemos gestionar mediante los comandos de docker específicos. Ejemplo:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="console"><span class="tok-gp">#</span> Conectarse a la salida estándar del contenedor
<span class="tok-go">docker attach --sig-proxy=false miservicio</span>

<span class="tok-gp">#</span> Parar el contenedor
<span class="tok-go">docker stop miservicio</span>
<span class="tok-gp">#</span> Matar el contenedor vía SIGKILL
<span class="tok-go">docker kill miservicio</span></code></pre>
</div>
</div>
</li>
<li>
<p>Empaquetar el WAR cursos en una imagen Docker</p>
<div class="paragraph">
<p>Lo primero que tenéis que hacer es crear un fichero Dockerfile con los mismos pasos indicados en el ejemplo y dejarlo en la carpeta donde tengáis vuestro proyecto:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="console"><span class="tok-gp">expertojava@expertojava:~/IdeaProjects/cursos$</span> ls
<span class="tok-go">cursos.iml  Dockerfile  pom.xml  README.md  src  target  WEB-INF</span>
<span class="tok-gp">expertojava@expertojava:~/IdeaProjects/cursos$</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Con la aplicación ya compilada, ejecutaréis el siguiente comando:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="console"><span class="tok-go">docker build -t &lt;usuario&gt;/wildfly .</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Con este comando habreis creado una nueva imagen asociada a vuestro usuario, pero que únicamente existe en el repositorio local. Si queremos compartirla, la debemos subir a Docker Hub, para ello ejecutaréis:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="console"><span class="tok-go">docker push &lt;usuario&gt;/wildfly</span></code></pre>
</div>
</div>
</li>
<li>
<p>Repetir el primer paso pero indicando la imagen que habéis creado y dándole un nombre distinto al del ejemplo. Si lo ejecutáis desde vuestra máquina no os descargaréis ninguna capa del repositorio, sin embargo si el servicio estuviera desplegado en otra máquina, al ejecutar un <em>pull</em> se descargaría la capa correspondiente al nuevo WAR.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Importante</div>
La entrega final de este ejercicio constará del código fuente del proyecto, incluyendo el nuevo Dockerfile, y el nombre del repositorio asociado en Docker Hub para que podamos descargar y probar el servicio. El nombre del repositorio se indicará en el fichero <strong>soluciones.txt</strong>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_entrega">1.8.4. Entrega</h4>
<div class="paragraph">
<p>En esta sesión debeis entregar el código fuente del proyecto cursos, el fichero script.cli, y el fichero soluciones.txt actualizado con la información solicitada en los ejercicios.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2015-10-16 22:32:33 CEST
</div>
</div>
</body>
</html>