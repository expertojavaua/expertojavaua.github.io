<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>Ejercicios de la sesi&oacute;n JDBC 1</title>
                
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <link rel="stylesheet" href="../../../apuntes.css" type="text/css">
</head>
 <body>
<h1>Introducci&oacute;n a JDBC </h1>
<p><b>1.</b> Vamos a realizar una clase que contendr&aacute; los datos de la conexi&oacute;n 
  con la base de datos. Al tener esta clase por separado nos permitir&aacute; 
  tener centralizado los datos de la conexi&oacute;n en un &uacute;nico sitio 
  y realizar el resto de la aplicaci&oacute;n independiente de dichos datos. Vamos 
  a utilizar el SGBD MySQL. La base de datos a utilizar ya est&aacute; creada. 
  Esta base de datos trata, de forma simplificada, de gestionar los vuelos de 
  una agencia de viajes. La estructura de la BD es la siguiente:</p>
<center>
  <img src="ejercicio1.jpg" width="560" height="259"> 
</center>
<p class="caption">Figura 1. Tablas y relaciones en la base de datos a utilizar.</p>
<p>Si quer&eacute;is utilizarla en vuestra casa deb&eacute;is seguir los siguientes 
  pasos:</p>
<ul>
  <li>Descargad el fichero <i>Viajes.tgz</i> </li>
  <li>Lo descomprim&iacute;s en el directorio donde se encuentren las bases de 
    datos de MySQL. Por defecto est&aacute; en <i>/var/lib/mysql</i>. Para descomprimir 
    cambiad al siguiente directorio <i>cd /var/lib/mysql</i> y descomprim&iacute;s 
    con <i>tar -xvzf Viajes.tgz</i></li>
  <li>La base de datos ya est&aacute; activa y se puede utilizar normalmente.</li>
</ul>
<center>
</center>
<p>Ten&eacute;is disponible la misma base de datos en Access. Aqu&iacute; os dejo 
  instrucciones de c&oacute;mo pod&eacute;is configurar el gestor de ODBC para 
  acceder a estos datos.</p>
<ul>
  <li>Copiad el fichero <i>viajes.mdb</i> a cualquier directorio de vuestro ordenador.</li>
  <li>Configurad ODBC para que sepa d&oacute;nde est&aacute; este fichero: 
    <ul>
      <li>Id a <i>Panel de Control</i> y abrid <i>Fuentes de datos ODBC</i>.</li>
      <li>Agregad una nueva DSN (nombre de fuentes de datos) de usuario, que nos 
        permitir&aacute; acceder a nuestra BD.</li>
      <li>Seleccionad el driver para acceder a Access. Pulsad en <i>Finalizar.</i></li>
      <li>Dad el nombre <i>Viajes</i> y si lo dese&aacute;is una descripci&oacute;n. 
        Pinchad en <i>Seleccionar...</i> y seleccionad el fichero <i>viajes.mdb</i> 
        de vuestro ordenador.</li>
      <li>Pinchad en <i>Aceptar</i>. Esta BD ya est&aacute; disponible para su 
        uso mediante ODBC.<br>
        <br>
      </li>
    </ul>
  </li>
</ul>
<p>Para este primer ejercicio utilizad el fichero <i>Consulta.java</i>. Deb&eacute;is 
  rellenar los m&eacute;todos descritos. Capturar tambi&eacute;n las excepciones. 
</p>
<p><b>2.</b> Haciendo uso de la clase anterior nos disponemos a realizar una clase 
  que se conecte a la BD y realice un listado de todos los vuelos y usuarios (con 
  toda la informaci&oacute;n para cada registro). Pod&eacute;is utilizar la plantilla 
  del fichero <i>EjJDBC1.java</i> para realizar el ejercicio. Observad que no 
  s&oacute;lo deb&eacute;is rellenad los m&eacute;todos, tambi&eacute;n deb&eacute;is 
  incluir la clase <b>Conecta</b> y llamar a los m&eacute;todos correspondientes. 
  Realizad, por &uacute;ltimo, un nuevo m&eacute;todo que liste la tabla <i>Disponibilidad</i> 
  ordenada por precio.</p>
<p><b>3.</b> Ahora vamos a practicar con las consultas en varias tablas. Vais 
  a realizar los siguientes m&eacute;todos, incorpor&aacute;ndolos a la clase 
  desarrollada:</p>
<ul>
  <li>Un m&eacute;todo que le pasemos como par&aacute;metro una cadena que se 
    corresponder&aacute; con el primer apellido de un cliente y devolver&aacute; 
    un<b> ResultSet</b> como resultado de realizar una consulta a la BD preguntando 
    por todos los vuelos reservados por dicho cliente.<br>
    <br>
  </li>
  <li>Un m&eacute;todo que reciba dos par&aacute;metros de entrada, el aeropuerto 
    de partida y el final. El m&eacute;todo devolver&aacute; el resultado de consultar 
    la BD dici&eacute;ndonos la disponibilidad de vuelos para ese par de aeropuertos. 
    El m&eacute;todo tambi&eacute;n listar&aacute; los siguientes datos: una primera 
    l&iacute;nea con el aeropuerto inicio, aeropuerto fin, hora salida y hora 
    fin; en las siguientes l&iacute;neas y ordenado por el campo <i>clase</i>, 
    la clase, el n&uacute;mero de plazas disponibles, el n&uacute;mero m&aacute;ximo 
    de plazas y el precio.<br>
  </li>
</ul>
<ul>
  <li>Por &uacute;ltimo, un m&eacute;todo que devuelva y muestre por pantalla 
    todos los posibles recorridos a realizar entre un par de aeropuertos. Pasando 
    como par&aacute;metros dos aeropuertos, el m&eacute;todo ir&aacute; interrogando 
    a la BD para comprobar qu&eacute; posibles combinaciones se pueden realizar. 
    Tened en cuenta que las horas de salida y llegada han de tenerse en cuenta 
    para aceptar ese tramo. </li>
</ul>
</body>
</html>
