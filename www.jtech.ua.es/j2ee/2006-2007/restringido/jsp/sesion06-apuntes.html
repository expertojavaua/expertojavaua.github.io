<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta content="Apache Forrest" name="Generator">
<meta name="Forrest-version" content="0.7">
<meta name="Forrest-skin-name" content="pelt">
<title>JSP B&aacute;sico</title>
<link type="text/css" href="skin/basic.css" rel="stylesheet">
<link media="screen" type="text/css" href="skin/screen.css" rel="stylesheet">
<link media="print" type="text/css" href="skin/print.css" rel="stylesheet">
<link type="text/css" href="skin/profile.css" rel="stylesheet">
<script src="skin/getBlank.js" language="javascript" type="text/javascript"></script><script src="skin/getMenu.js" language="javascript" type="text/javascript"></script><script src="skin/fontsize.js" language="javascript" type="text/javascript"></script>
<link rel="shortcut icon" href="">
</head>
<body onload="init()">
<script type="text/javascript">ndeSetTextSize();</script>
<div id="top">
<div class="header">
<div class="grouplogo">
<a href="http://www.jtech.ua.es/j2ee"><img class="logoImage" alt="J2EE" src="images/baner_j2ee_izq.gif" title="Curso Especialista Universitario J2EE"></a>
</div>
<div class="projectlogoA1">
<a href="http://www.dccia.ua.es/"><img class="logoImage" alt="Servlets y JSP" src="images/baner_j2ee_der.gif" title="Servlets y JSP"></a>
</div>
<ul id="tabs">
<li>
<a class="base-not-selected" href="../index.html">M&oacute;dulos</a>
</li>
<li class="current">
<a class="base-selected" href="index.html">Servlets y JSP</a>
</li>
</ul>
</div>
</div>
<div id="main">
<div id="publishedStrip">
<div id="level2tabs"></div>
<script type="text/javascript"><!--
document.write("<text>Last Published:</text> " + document.lastModified);
//  --></script>
</div>
<div class="breadtrail">
             
             &nbsp;
           </div>
<div id="menu">
<div onclick="SwitchMenu('menu_selected_1.1', 'skin/')" id="menu_selected_1.1Title" class="menutitle" style="background-image: url('skin/images/chapter_open.gif');">Servlets y JSP</div>
<div id="menu_selected_1.1" class="selectedmenuitemgroup" style="display: block;">
<div class="menuitem">
<a href="index.html" title="Servlets y JSP">&Iacute;ndice</a>
</div>
<div onclick="SwitchMenu('menu_selected_1.1.2', 'skin/')" id="menu_selected_1.1.2Title" class="menutitle" style="background-image: url('skin/images/chapter_open.gif');">Teor&iacute;a</div>
<div id="menu_selected_1.1.2" class="selectedmenuitemgroup" style="display: block;">
<div class="menuitem">
<a href="sesion01-apuntes.html">Sesion 1</a>
</div>
<div class="menuitem">
<a href="sesion02-apuntes.html">Sesion 2</a>
</div>
<div class="menuitem">
<a href="sesion03-apuntes.html">Sesion 3</a>
</div>
<div class="menuitem">
<a href="sesion04-apuntes.html">Sesion 4</a>
</div>
<div class="menuitem">
<a href="sesion05-apuntes.html">Sesion 5</a>
</div>
<div class="menupage">
<div class="menupagetitle">Sesion 6</div>
</div>
<div class="menuitem">
<a href="sesion07-apuntes.html">Sesion 7</a>
</div>
<div class="menuitem">
<a href="sesion08-apuntes.html">Sesion 8</a>
</div>
<div class="menuitem">
<a href="sesion09-apuntes.html">Sesion 9</a>
</div>
<div class="menuitem">
<a href="sesion10-apuntes.html">Sesion 10</a>
</div>
<div class="menuitem">
<a href="sesion11-apuntes.html">Sesion 11</a>
</div>
<div class="menuitem">
<a href="sesion12-apuntes.html">Sesion 12</a>
</div>
<div class="menuitem">
<a href="roadmap-apuntes.html">Roadmap</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.3', 'skin/')" id="menu_1.1.3Title" class="menutitle">Ejercicios</div>
<div id="menu_1.1.3" class="menuitemgroup">
<div class="menuitem">
<a href="sesion01-ejercicios.html">Sesion 1</a>
</div>
<div class="menuitem">
<a href="sesion02-ejercicios.html">Sesion 2</a>
</div>
<div class="menuitem">
<a href="sesion03-ejercicios.html">Sesion 3</a>
</div>
<div class="menuitem">
<a href="sesion04-ejercicios.html">Sesion 4</a>
</div>
<div class="menuitem">
<a href="sesion05-ejercicios.html">Sesion 5</a>
</div>
<div class="menuitem">
<a href="sesion06-ejercicios.html">Sesion 6</a>
</div>
<div class="menuitem">
<a href="sesion07-ejercicios.html">Sesion 7</a>
</div>
<div class="menuitem">
<a href="sesion08-ejercicios.html">Sesion 8</a>
</div>
<div class="menuitem">
<a href="sesion09-ejercicios.html">Sesion 9</a>
</div>
<div class="menuitem">
<a href="sesion10-ejercicios.html">Sesion 10</a>
</div>
<div class="menuitem">
<a href="sesion11-ejercicios.html">Sesion 11</a>
</div>
<div class="menuitem">
<a href="sesion12-ejercicios.html">Sesion 12</a>
</div>
</div>
</div>
<div id="credit"></div>
<div id="roundbottom">
<img style="display: none" class="corner" height="15" width="15" alt="" src="skin/images/rc-b-l-15-1body-2menu-3menu.png"></div>
<div id="credit2"></div>
</div>
<div id="content">
<div title="Portable Document Format" class="pdflink">
<a class="dida" href="sesion06-apuntes.pdf"><img alt="PDF -icon" src="skin/images/pdfdoc.gif" class="skin"><br>
        PDF</a>
</div>
<h1>JSP B&aacute;sico</h1>
<div id="minitoc-area">
<ul class="minitoc">
<li>
<a href="#Introducci%C3%B3n+a+JSP">Introducci&oacute;n a JSP</a>
</li>
<li>
<a href="#Traducci%C3%B3n+de+los+JSP+a+servlets">Traducci&oacute;n de los JSP a servlets</a>
</li>
<li>
<a href="#Elementos+de+JSP">Elementos de JSP </a>
</li>
<li>
<a href="#Inserci%C3%B3n+de+c%C3%B3digo+en+p%C3%A1ginas+JSP">Inserci&oacute;n de c&oacute;digo en p&aacute;ginas JSP</a>
<ul class="minitoc">
<li>
<a href="#Expresiones">Expresiones</a>
</li>
<li>
<a href="#">Scriptlets</a>
</li>
<li>
<a href="#Declaraciones">Declaraciones</a>
</li>
<li>
<a href="#Objetos+impl%C3%ADcitos+de+JSP">Objetos impl&iacute;citos de JSP </a>
</li>
</ul>
</li>
<li>
<a href="#Directivas+de+p%C3%A1gina">Directivas de p&aacute;gina </a>
<ul class="minitoc">
<li>
<a href="#La+directiva">La directiva page</a>
</li>
</ul>
</li>
<li>
<a href="#Acciones">Acciones</a>
<ul class="minitoc">
<li>
<a href="#La+directiva-N10390">La directiva include</a>
</li>
<li>
<a href="#La+acci%C3%B3n">La acci&oacute;n &lt;jsp:include&gt; </a>
</li>
<li>
<a href="#La+acci%C3%B3n-N103EB">La acci&oacute;n &lt;jsp:plugin&gt;</a>
</li>
<li>
<a href="#La+acci%C3%B3n-N103FA">La acci&oacute;n &lt;jsp:forward&gt;</a>
</li>
</ul>
</li>
<li>
<a href="#Servlets+y+JSPs">Servlets y JSPs</a>
</li>
</ul>
</div>


<a name="N1000C"></a><a name="Introducci%C3%B3n+a+JSP"></a>
<h2 class="underlined_10">Introducci&oacute;n a JSP</h2>
<div class="section">
<p>JSP (<strong>JavaServer Pages</strong>) es una tecnolog&iacute;a que permite
incluir c&oacute;digo Java en p&aacute;ginas web. El denominado <em>contenedor
JSP</em> (que ser&iacute;a un componente del servidor web) es el
encargado de tomar la p&aacute;gina, sustituir el c&oacute;digo Java
que contiene por el resultado de su ejecuci&oacute;n, y enviarla al
cliente. As&iacute;, se pueden dise&ntilde;ar f&aacute;cilmente
p&aacute;ginas con partes fijas y partes variables. El siguiente es un
ejemplo muy sencillo de p&aacute;gina JSP:</p>
<pre class="code">&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Mi primera p&aacute;gina JSP&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt; Hoy es: 
&lt;%= new java.util.Date() %&gt; 
&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
<p>Para ejecutar la p&aacute;gina basta con colocarla en una
aplicaci&oacute;n web (por ejemplo, en Tomcat, dentro de <span class="codefrag">webapps/ROOT</span>).
No es necesario que sea en un directorio espec&iacute;fico como ocurre
con los servlets, sino que puede ir en cualquier directorio en el que
se colocar&iacute;a normalmente un HTML.</p>
<p> La &uacute;ltima versi&oacute;n de la especificaci&oacute;n JSP es
la 2.0, aunque es de reciente aparici&oacute;n (Tomcat 4.x implementa
la versi&oacute;n anterior, la 1.2). Como se ver&aacute;, es una
especificaci&oacute;n paralela al API de servlets, concretamente a la
versi&oacute;n 2.3.</p>
<p>Aunque JSP y servlets parecen a primera vista tecnolog&iacute;as
distintas, en realidad el servidor web traduce internamente el JSP a un
servlet, lo compila y finalmente lo ejecuta cada vez que el cliente
solicita la p&aacute;gina JSP. Por ello, en principio, JSPs y servlets
ofrecen la misma funcionalidad, aunque sus caracter&iacute;sticas los
hacen apropiados para distinto tipo de tareas. Los JSP son mejores para
generar p&aacute;ginas con gran parte de contenido est&aacute;tico. Un
servlet que realice la misma funci&oacute;n debe incluir gran cantidad
de sentencias del tipo <span class="codefrag">out.println()</span> para producir el
HTML. Por el contrario, los servlets son mejores en tareas que generen
poca salida, datos binarios o p&aacute;ginas con gran parte de
contenido variable. En proyectos m&aacute;s complejos, lo recomendable
es combinar ambas tecnolog&iacute;as: los servlets para el
procesamiento de informaci&oacute;n y los JSP para presentar los datos
al cliente.</p>
</div>

<a name="N1002F"></a><a name="Traducci%C3%B3n+de+los+JSP+a+servlets"></a>
<h2 class="underlined_10">Traducci&oacute;n de los JSP a servlets</h2>
<div class="section">
<p>Como se ha comentado, la primera vez que se solicita una
p&aacute;gina JSP, el servidor genera el servlet equivalente, lo
compila y lo ejecuta. Para las siguientes solicitudes, solo es
necesario ejecutar el c&oacute;digo compilado. El servlet generado de
manera autom&aacute;tica tiene un m&eacute;todo <span class="codefrag">_jspService</span>
que es el equivalente al <span class="codefrag">service</span> de los servlets
"generados manualmente". En este m&eacute;todo es donde se genera el
c&oacute;digo HTML, mediante instrucciones <span class="codefrag">println</span> y
donde se ejecuta el c&oacute;digo Java insertado en la p&aacute;gina.
Por ejemplo, la p&aacute;gina <strong>primera.jsp</strong> podr&iacute;a generar
un servlet con estructura similar al siguiente:</p>
<pre class="code">public void _jspService(HttpServletRequest request, 
                        HttpServletResponse  response)
                        throws java.io.IOException, ServletException {
   JspWriter out = null;
   response.setContentType("text/html;ISO-8859-1");
   out.println("&lt;!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0        
                Transitional//EN\"&gt;);
   out.println("&lt;html&gt;");
   out.println("&lt;head&gt;");
   out.println("&lt;title&gt;Mi primera pagina JSP&lt;/title&gt;");
   out.println("&lt;/head&gt;");
   out.println("&lt;body&gt;");
   out.print("Hoy es ");
   out.println(new java.util.Date());
   out.println("&lt;/body&gt;");
   out.println("&lt;/html&gt;");
}</pre>
<p>
El directorio donde se coloca el servlet generado, as&iacute; como su
nombre, dependen del servidor web. Por ejemplo, Tomcat utiliza su
directorio <span class="codefrag">work/Catalina/localhost/</span><em><span class="codefrag">aplicacion_web</span></em>.
En caso de que la p&aacute;gina est&eacute; en <span class="codefrag">ROOT</span>, el
nombre de la aplicaci&oacute;n se sustituye por un car&aacute;cter de
subrayado (<span class="codefrag">_</span>).
</p>
</div>

<a name="N10058"></a><a name="Elementos+de+JSP"></a>
<h2 class="underlined_10">Elementos de JSP </h2>
<div class="section">
<p> Existen tres tipos de elementos JSP que podemos insertar en una
p&aacute;gina web:
</p>
<ul>
  
<li>
<strong>C&oacute;digo</strong>: podemos "incrustar" c&oacute;digo Java de
distintos tipos (declaraciones de variables y/o m&eacute;todos,
expresiones, sentencias) para que lo ejecute el contenedor JSP.</li>
  
<li>
<strong>Directivas</strong>: permiten controlar distintos par&aacute;metros
del servlet resultante de la traducci&oacute;n autom&aacute;tica del JSP</li>
  
<li>
<strong>Acciones</strong>: normalmente sirven para alterar el flujo normal
de ejecuci&oacute;n de la p&aacute;gina (p.ej. redirecciones), aunque
tienen usos variados.</li>

</ul>
<p>Se pueden poner comentarios en una p&aacute;gina JSP entre los
s&iacute;mbolos <span class="codefrag">&lt;%--</span> y <span class="codefrag">--%&gt;</span>. El
contenedor JSP ignorar&aacute; todo lo contenido entre ambos. Dentro de
los fragmentos de c&oacute;digo Java tambi&eacute;n se pueden colocar
comentarios siguiendo la sintaxis habitual del lenguaje.
</p>
</div>

<a name="N1007D"></a><a name="Inserci%C3%B3n+de+c%C3%B3digo+en+p%C3%A1ginas+JSP"></a>
<h2 class="underlined_10">Inserci&oacute;n de c&oacute;digo en p&aacute;ginas JSP</h2>
<div class="section">
<p>
Hay tres formas de insertar c&oacute;digo Java en una p&aacute;gina
JSP:
</p>
<ul>
  
<li>
<strong>Expresiones</strong> de la forma <span class="codefrag">&lt;%= </span><em><span class="codefrag">expresi&oacute;n</span></em><span class="codefrag">
%&gt;</span>: en este caso, la expresi&oacute;n se eval&uacute;a, su
resultado se convierte a <span class="codefrag">String</span> y se inserta en la
salida. </li>
  
<li>
<strong>Scriptlets</strong> de la forma <span class="codefrag">&lt;% </span><em><span class="codefrag">c&oacute;digo</span></em><span class="codefrag">
%&gt;</span> : el c&oacute;digo se ejecuta dentro del m&eacute;todo <span class="codefrag">_jspService</span>
del servlet generado.</li>
  
<li>
<strong>Declaraciones</strong> de la forma <span class="codefrag">&lt;%! </span><em><span class="codefrag">c&oacute;digo</span></em><span class="codefrag">
%&gt;</span>: se insertan en el cuerpo del servlet generado, fuera de
sus m&eacute;todos. </li>

</ul>
<a name="N100B6"></a><a name="Expresiones"></a>
<h3 class="underlined_5">Expresiones</h3>
<p>
Como se ha visto, se eval&uacute;an, su resultado se convierte a un <span class="codefrag">String</span>
y se escriben en la salida (el objeto predefinido <span class="codefrag">out</span>).
La forma de traducir una expresi&oacute;n a c&oacute;digo de servlet es
imprimi&eacute;ndola en <span class="codefrag">out</span> (mediante una sentencia <span class="codefrag">out.write(</span><em><span class="codefrag">expresion</span></em><span class="codefrag">)</span>)
o similar.
</p>
<a name="N100D1"></a>
<h3 class="underlined_5">Scriptlets</h3>
<p>
Permiten ejecutar c&oacute;digo arbitrario, cuyo resultado no es
necesario enviar a la salida. Si desde un <em>scriptlet</em> se desea
escribir algo en &eacute;sta, bastar&aacute; con utilizar el objeto
predefinido <span class="codefrag">out</span>. Un uso com&uacute;n de los <em>scriptlets</em>
es hacer que ciertas partes de c&oacute;digo HTML aparezcan o no en
funci&oacute;n de una condici&oacute;n. Por ejemplo:
</p>
<pre class="code">
<strong>&lt;%
  java.util.Calendar ahora = java.util.Calendar.getInstance();
  int hora = ahora.get(java.util.Calendar.HOUR_OF_DAY);
%&gt;</strong>
&lt;b&gt; Hola mundo, &lt;i&gt;
<strong>&lt;% if ((hora&gt;20)||(hora&lt;6)) { %&gt; </strong>
     buenas noches
<strong>&lt;% }  
   else if ((hora&gt;=6)&amp;&amp;(hora&lt;=12)) { %&gt;</strong>
          buenos d&iacute;as
<strong>&lt;%      }
	else { %&gt; </strong>
          buenas tardes
<strong>&lt;%      } %&gt;</strong>
&lt;/i&gt; &lt;/b&gt;</pre>
<a name="N100F7"></a><a name="Declaraciones"></a>
<h3 class="underlined_5">Declaraciones</h3>
<p>
Permiten definir variables o m&eacute;todos que se insertar&aacute;n
dentro del cuerpo del servlet generado. Esto da la posibilidad de
sobreescribir los m&eacute;todos <span class="codefrag">jspInit</span> y <span class="codefrag">jspDestroy</span>
que son el equivalente en JSP del <span class="codefrag">init</span> y <span class="codefrag">destroy</span>
de los servlets. Las variables declaradas conservar&aacute;n su valor
entre sucesivas llamadas a la p&aacute;gina, ya que son variables
miembro del servlet y no locales al m&eacute;todo <span class="codefrag">jspService</span>.
Esto nos permite, por ejemplo, crear un contador de accesos a la
p&aacute;gina:
</p>
<pre class="code">&lt;%! private int accesos = 0; %&gt;
&lt;h1&gt; Visitas: &lt;%= ++accesos %&gt; &lt;/h1&gt;</pre>
<a name="N10114"></a><a name="Objetos+impl%C3%ADcitos+de+JSP"></a>
<h3 class="underlined_5">Objetos impl&iacute;citos de JSP </h3>
<p>En cualquiera de estas tres formas, se puede hacer referencia a una
serie de <em> objetos impl&iacute;citos </em>, que se corresponden
con objetos &uacute;tiles del API de servlets (petici&oacute;n,
respuesta, ...) y que en realidad son variables instanciadas de manera
autom&aacute;tica en el servlet generado a partir del JSP. Los objetos
predefinidos en JSP se referencian en la tabla 1.
</p>
<table class="ForrestTable" cellspacing="1" cellpadding="4">
    
<tr>
      
<th colspan="1" rowspan="1">Objeto</th>
      <th colspan="1" rowspan="1">Significado</th>
    
</tr>
    
<tr>
      
<td colspan="1" rowspan="1"><strong><span class="codefrag">request</span></strong></td>
      <td colspan="1" rowspan="1">el objeto <span class="codefrag">HttpServletRequest</span> asociado con la
petici&oacute;n</td>
    
</tr>
    
<tr>
      
<td colspan="1" rowspan="1"><strong><span class="codefrag">response</span></strong></td>
      <td colspan="1" rowspan="1">el objeto <span class="codefrag">HttpServletResponse</span> asociado con la
respuesta</td>
    
</tr>
    
<tr>
      
<td colspan="1" rowspan="1"><strong><span class="codefrag">out</span></strong></td>
      <td colspan="1" rowspan="1">el <span class="codefrag">Writer</span> empleado para enviar la salida al
cliente. La salida de los JSP emplea un <em>buffer</em> que permite
que se env&iacute;en cabeceras HTTP o c&oacute;digos de estado aunque
ya se haya empezado a escribir en la salida (<span class="codefrag">out</span> no es un <span class="codefrag">PrintWriter</span>
sino un objeto de la clase especial <span class="codefrag">JspWriter</span>).</td>
    
</tr>
    
<tr>
      
<td colspan="1" rowspan="1"><strong><span class="codefrag">session</span></strong></td>
      <td colspan="1" rowspan="1">el objeto <span class="codefrag">HttpSession</span> asociado con la
petici&oacute;n actual. En JSP, las sesiones se crean
autom&aacute;ticamente, de modo que este objeto est&aacute; instanciado
aunque no se cree expl&iacute;citamente una sesi&oacute;n.</td>
    
</tr>
    
<tr>
      
<td colspan="1" rowspan="1"><strong><span class="codefrag">application</span></strong></td>
      <td colspan="1" rowspan="1">el objeto <span class="codefrag">ServletContext</span>, com&uacute;n a todos
los servlets de la aplicaci&oacute;n web.</td>
    
</tr>
    
<tr>
      
<td colspan="1" rowspan="1"><strong><span class="codefrag">config</span></strong></td>
      <td colspan="1" rowspan="1">el objeto <span class="codefrag">ServletConfig</span>, empleado para leer
par&aacute;metros de inicializaci&oacute;n. </td>
    
</tr>
    
<tr>
      
<td colspan="1" rowspan="1"><strong><span class="codefrag">pageContext</span></strong></td>
      <td colspan="1" rowspan="1">permite acceder desde un &uacute;nico objeto a todos los
dem&aacute;s objetos impl&iacute;citos </td>
    
</tr>
    
<tr>
      
<td colspan="1" rowspan="1"><strong><span class="codefrag">page</span></strong></td>
      <td colspan="1" rowspan="1">referencia al propio servlet generado (tiene el
mismo valor que <span class="codefrag">this</span>).Como tal, en Java no tiene
demasiado sentido utilizarla, pero est&aacute; pensada para el caso en
que se utilizara un lenguaje de programaci&oacute;n distinto.</td>
    
</tr>
    
<tr>
      
<td colspan="1" rowspan="1"><strong><span class="codefrag">exception</span></strong></td>
      <td colspan="1" rowspan="1">Representa un error producido en la
aplicaci&oacute;n. Solo es accesible si la p&aacute;gina se ha
designado como p&aacute;gina de error (mediante la directiva <span class="codefrag">page
isErrorPage</span>).</td>
    
</tr>
 

</table>
</div>

<a name="N101DF"></a><a name="Directivas+de+p%C3%A1gina"></a>
<h2 class="underlined_10">Directivas de p&aacute;gina </h2>
<div class="section">
<p> Las <em>directivas</em> influyen en la estructura que tendr&aacute;
el servlet generado a partir de la p&aacute;gina JSP. Hay tres tipos de
directivas: </p>
<ul>
  
<li>
<span class="codefrag">page</span>: tiene varios usos: importar clases de Java,
fijar el tipo MIME de la respuesta, controlar el <em>buffer</em> de
salida,...</li>
  
<li>
<span class="codefrag">include</span>: sirve para incluir c&oacute;digo en la
p&aacute;gina <em>antes de que se realice la compilaci&oacute;n del JSP</em>.</li>
  
<li>
<span class="codefrag">taglib</span>: se emplea cuando el JSP hace uso de
etiquetas definidas por el usuario.</li>

</ul>
<p>El formato gen&eacute;rico de una directiva es:</p>
<pre class="code">&lt;%@ directiva atributo="valor" %&gt;</pre>
<p> algunas directivas admiten m&aacute;s de un atributo.</p>
<a name="N1020D"></a><a name="La+directiva"></a>
<h3 class="underlined_5">La directiva page</h3>
<p>La tabla 2 recoge los distintos atributos que admite la directiva <span class="codefrag">page</span>
y su significado.</p>
<table class="ForrestTable" cellspacing="1" cellpadding="4">
 
    
<tr>
<th colspan="1" rowspan="1"></th><th colspan="1" rowspan="1"></th><th colspan="1" rowspan="1"></th><th colspan="1" rowspan="1"></th><th colspan="1" rowspan="1"></th><th colspan="1" rowspan="1"></th>
</tr>
    
<tr>
      
<th colspan="1" rowspan="1">Atributo</th>
      <th colspan="2" rowspan="1">Significado</th>
      <th colspan="3" rowspan="1">Ejemplo</th>
    
</tr>
    
<tr>
      
<td colspan="1" rowspan="1"><span class="codefrag">import</span></td>
      <td colspan="2" rowspan="1">el equivalente a una sentencia <span class="codefrag">import</span>
de Java</td>
      <td colspan="3" rowspan="1"><span class="codefrag">&lt;%@ page import="java.util.Date" %&gt;</span></td>
    
</tr>
    
<tr>
      
<td colspan="1" rowspan="1"><span class="codefrag">contentType</span></td>
      <td colspan="2" rowspan="1">genera una cabecera HTTP <span class="codefrag">Content-Type</span></td>
      <td colspan="3" rowspan="1"><span class="codefrag">&lt;%@ page contentType="text/plain" %&gt;</span></td>
    
</tr>
    
<tr>
      
<td colspan="1" rowspan="1"><span class="codefrag">isThreadSafe</span></td>
      <td colspan="2" rowspan="1">si es <span class="codefrag">false</span>, el servlet generado
implementar&aacute; el interface <span class="codefrag">SingleThreadModel</span>
(&uacute;n &uacute;nico hilo para todas las peticiones). Por defecto,
el valor es <span class="codefrag">true</span>.</td>
      <td colspan="3" rowspan="1">&nbsp;</td>
    
</tr>
    
<tr>
      
<td colspan="1" rowspan="1"><span class="codefrag">session</span></td>
      <td colspan="2" rowspan="1">Si es <span class="codefrag">false</span>, no se crear&aacute; un
objeto <span class="codefrag">session</span> de manera autom&aacute;tica. Por defecto,
es <span class="codefrag">true</span>.</td>
      <td colspan="3" rowspan="1">&nbsp;</td>
    
</tr>
    
<tr>
      
<td colspan="1" rowspan="1"><span class="codefrag">buffer</span></td>
      <td colspan="2" rowspan="1">Define el tama&ntilde;o del <em>buffer</em> para
la salida (en kb), o <span class="codefrag">none</span> si no se desea <em>buffer</em>.
Su existencia permite generar cabeceras HTTP o c&oacute;digos de estado
aunque ya se haya comenzado a escribir la salida.</td>
      <td colspan="3" rowspan="1"><span class="codefrag">&lt;%@ page buffer="64kb" %&gt;</span></td>
    
</tr>
    
<tr>
      
<td colspan="1" rowspan="1"><span class="codefrag">autoflush</span></td>
      <td colspan="2" rowspan="1">Si es <span class="codefrag">true</span> (valor por defecto), el
buffer se env&iacute;a autom&aacute;ticamente a la salida al llenarse.
Si es <span class="codefrag">false</span>, al llenarse el buffer se genera una
excepci&oacute;n.</td>
      <td colspan="3" rowspan="1">&nbsp;</td>
    
</tr>
    
<tr>
      
<td colspan="1" rowspan="1"><span class="codefrag">extends</span></td>
      <td colspan="2" rowspan="1">Permite especificar de qu&eacute; clase debe
descender el servlet generado a partir de la p&aacute;gina JSP. No es
habitual cambiarlo.</td>
      <td colspan="3" rowspan="1">&nbsp;</td>
    
</tr>
    
<tr>
      
<td colspan="1" rowspan="1"><span class="codefrag">info</span></td>
      <td colspan="2" rowspan="1">define una cadena que puede obtenerse a
trav&eacute;s del m&eacute;todo <span class="codefrag">getServletInfo</span></td>
      <td colspan="3" rowspan="1"><span class="codefrag">&lt;%@ page info="carro de la compra" %&gt;</span></td>
    
</tr>
    
<tr>
      
<td colspan="1" rowspan="1"><span class="codefrag">errorPage</span></td>
      <td colspan="2" rowspan="1">especifica la p&aacute;gina JSP que debe procesar
los errores generados y no capturados en la actual.</td>
      <td colspan="3" rowspan="1"><span class="codefrag">&lt;%@ page errorPage="error.jsp" %&gt;</span></td>
    
</tr>
    
<tr>
      
<td colspan="1" rowspan="1"><span class="codefrag">isErrorPage</span></td>
      <td colspan="2" rowspan="1">Si es <span class="codefrag">true</span>, indica que la
p&aacute;gina act&uacute;a como p&aacute;gina de error para otro JSP.
El valor por defecto es <span class="codefrag">false</span>.</td>
      <td colspan="3" rowspan="1">&nbsp;</td>
    
</tr>
    
<tr>
      
<td colspan="1" rowspan="1"><span class="codefrag">language</span></td>
      <td colspan="2" rowspan="1">Permite especificar el lenguaje de
programaci&oacute;n usado en el JSP. En la pr&aacute;ctica, el lenguaje
siempre es Java, por lo que esta directiva no se usa.</td>
      <td colspan="3" rowspan="1">&nbsp;</td>
    
</tr>
    
<tr>
      
<td colspan="1" rowspan="1"><span class="codefrag">pageEncoding</span></td>
      <td colspan="2" rowspan="1">define el juego de caracteres que usa la
p&aacute;gina. El valor por defecto es <span class="codefrag">ISO-8859-1</span>.</td>
      <td colspan="3" rowspan="1">&nbsp;</td>
    
</tr>

</table>
</div>

<a name="N10362"></a><a name="Acciones"></a>
<h2 class="underlined_10">Acciones</h2>
<div class="section">
<p>En JSP existen varios mecanismos para incluir elementos externos en
la p&aacute;gina actual o redirigir la petici&oacute;n hacia otra
p&aacute;gina</p>
<ul>
  
<li>
<strong>La directiva <span class="codefrag">include</span></strong> permite insertar
c&oacute;digo en la p&aacute;gina antes de que &eacute;sta se
transforme en un servlet. De este modo se pueden reutilizar fragmentos
de c&oacute;digo JSP o HTML. </li>
  
<li>
<strong>La acci&oacute;n <span class="codefrag">&lt;jsp:include&gt;</span></strong>
permite insertar la salida de otra p&aacute;gina JSP. N&oacute;tese que
se incluye la <em>salida</em> generada por el c&oacute;digo JSP, no el
c&oacute;digo propiamente dicho. </li>
  
<li>
<strong>La acci&oacute;n <span class="codefrag">&lt;jsp:plugin&gt;</span></strong>
permite incluir <em>applets</em> que hagan uso de Java 2. </li>
  
<li>
<strong>La acci&oacute;n <span class="codefrag">&lt;jsp:forward&gt;</span></strong> sirve
para redirigir la petici&oacute;n a otra p&aacute;gina JSP</li>

</ul>
<a name="N10390"></a><a name="La+directiva-N10390"></a>
<h3 class="underlined_5">La directiva include</h3>
<p>Es el equivalente al <span class="codefrag">#include</span> del lenguaje C. su
sintaxis es: </p>
<pre class="code">&lt;%@ include file="<em>fichero</em>" %&gt;</pre>
<p> Como el c&oacute;digo se incluye en el servlet generado, los
fragmentos de c&oacute;digo incluidos pueden tener efecto sobre la
p&aacute;gina actual. As&iacute;, se puede utilizar esta directiva para
definir constantes, generar cabeceras HTTP, ... </p>
<p> El problema de esta directiva es que el est&aacute;ndar no exige
que el contenedor JSP detecte de manera autom&aacute;tica los cambios
en los ficheros incluidos, de manera que si cambia uno de ellos puede
ser necesario forzar la recompilaci&oacute;n de las p&aacute;ginas JSP
que los incluyan. </p>
<p> La especificaci&oacute;n JSP recomienda que si la p&aacute;gina
incluida no es una p&aacute;gina JSP v&aacute;lida por s&iacute; sola
(por ejemplo, porque utiliza variables que se conf&iacute;a que se
hayan declarado previamente) se utilice la extensi&oacute;n
"est&aacute;ndar" <span class="codefrag">.jspf </span>(JSP fragment) y se coloque en
un directorio no p&uacute;blico del contenedor JSP (por ejemplo,
WEB-INF, que no es accesible desde el cliente, pero s&iacute; desde la
directiva). </p>
<a name="N103B2"></a><a name="La+acci%C3%B3n"></a>
<h3 class="underlined_5">La acci&oacute;n &lt;jsp:include&gt; </h3>
<p> Esta acci&oacute;n incluye en una p&aacute;gina la salida generada
por otra perteneciente a la misma aplicaci&oacute;n web. La
petici&oacute;n se redirige a la p&aacute;gina incluida, y la respuesta
que genera se incluye en la generada por la principal. Su sintaxis es: </p>
<pre class="code">&lt;jsp:include page="<em>URL relativa</em>" flush="<em>true</em>|<em>false</em>"/&gt;</pre>
<p> El atributo <span class="codefrag">flush</span> especifica si el flujo de salida de
la p&aacute;gina principal deber&iacute;a ser enviado al cliente antes
de enviar el de la p&aacute;gina incluida. En JSP 1.2 este atributo es
optativo, y su valor por defecto es <span class="codefrag">false</span>. En JSP 1.1 es
obligatorio y siempre deb&iacute;a valer <span class="codefrag">true</span> (el forzar
el vaciado de buffer era problem&aacute;tico porque una vez que ha
sucedido esto no se pueden hacer redirecciones ni ir a p&aacute;ginas
de error, ya que ya se han terminado de escribir las cabeceras). </p>
<p> Esta acci&oacute;n presenta la ventaja sobre la directiva del mismo
nombre de que cambios en la p&aacute;gina incluida no obligan a
recompilar la "principal". No obstante, la p&aacute;gina incluida solo
tiene acceso al <span class="codefrag">JspWriter</span> de la "principal" y no puede
generar cabeceras (por ejemplo, no puede crear <em>cookies</em>). </p>
<p> Por defecto, la petici&oacute;n que se le pasa a la p&aacute;gina
incluida es la original, pero se le pueden agregar par&aacute;metros
adicionales, mediante la etiqueta <span class="codefrag">jsp:param</span>. Por ejemplo:
</p>
<pre class="code">&lt;jsp:include page="cabecera.jsp"&gt;
   &lt;jsp:param name="color" value="YELLOW" /&gt;
&lt;/jsp:include&gt;</pre>
<a name="N103EB"></a><a name="La+acci%C3%B3n-N103EB"></a>
<h3 class="underlined_5">La acci&oacute;n &lt;jsp:plugin&gt;</h3>
<p> Esta acci&oacute;n sirve para incluir, de manera portable e
independiente del navegador, <em>applets</em> que utilicen alguna
librer&iacute;a de Java 2 (Swing, colecciones, Java 2D, ...), ya que
las m&aacute;quinas virtuales Java distribuidas con algunos navegadores
relativamente antiguos (Explorer 5.x, Netscape 4.x,...) son de una
versi&oacute;n anterior a Java 2. </p>
<a name="N103FA"></a><a name="La+acci%C3%B3n-N103FA"></a>
<h3 class="underlined_5">La acci&oacute;n &lt;jsp:forward&gt;</h3>
<p> Esta acci&oacute;n se utiliza para redirigir la petici&oacute;n
hacia otra p&aacute;gina JSP que est&eacute; en la misma
aplicaci&oacute;n web que la actual. Un ejemplo de su sintaxis
b&aacute;sica es: </p>
<pre class="code">&lt;jsp:forward page="principal.jsp"/&gt;</pre>
<p>La salida generada hasta el momento por la p&aacute;gina actual se
descarta (se borra el buffer). En caso de que no se utilizara buffer de
salida, se producir&iacute;a una excepci&oacute;n.</p>
<p>Al igual que en el caso de <span class="codefrag">&lt;jsp:include&gt;</span>, se
pueden a&ntilde;adir par&aacute;metros a la petici&oacute;n original
para que los reciba la nueva p&aacute;gina JSP: </p>
<pre class="code">&lt;jsp:forward page="principal.jsp"&gt;
   &lt;jsp:param name="privilegios" value="root" /&gt;
&lt;/jsp:forward&gt;</pre>
</div>


<a name="N10418"></a><a name="Servlets+y+JSPs"></a>
<h2 class="underlined_10">Servlets y JSPs</h2>
<div class="section">
<p>Los servlets y los JSPs son tecnolog&iacute;as complementar&iacute;as.
  Cada    una de ellas es m&aacute;s apropiada para realizar ciertas tareas.
  Por lo tanto,    lo m&aacute;s adecuado ser&aacute; integrar ambas tecnolog&iacute;as,
  y realizar    con cada una las tareas m&aacute;s apropiadas para ella.</p>
<p>Los servlets ser&aacute;n adecuados cuando se requiere mucha programaci&oacute;n.
     Por el contrario, los JSPs ser&aacute;n m&aacute;s apropiados para generar la 
     presentaci&oacute;n en HTML. Por lo tanto, ser&aacute; conveniente combinar ambas tecnolog&iacute;as
     para separar el c&oacute;digo y la presentaci&oacute;n.</p>
<p>Podremos integrar ambas tecnolog&iacute;as, realizando la programaci&oacute;n
     en el servlet, y redirigiendo al JSP adecuado para que produzca la presentaci&oacute;n,
     utilizando el <span class="codefrag">RequestDispatcher</span> visto anteriormente, bien por
el  m&eacute;todo <span class="codefrag">forward</span> o <span class="codefrag">include</span>.</p>
<p>Puede ser necesario que el servlet proporcione cierta informaci&oacute;n
  al    JSP, ya que el servlet en el procesamiento puede haber producido
 ciertos datos    que el JSP deber&aacute; presentar. Una forma para proporcionar
 estos datos    es establecerlos como atributos en el objeto <span class="codefrag">ServletRequest</span>:</p>
<pre class="code">MiClase valor = generaDatos();
<strong>request</strong>.setAttribute("nombre", valor);</pre>
<p>Este valor podr&aacute; ser cualquier objeto Java (<span class="codefrag">Object</span>). En
el JSP    podremos obtener dicho objeto de la petici&oacute;n:</p>
<pre class="code">&lt;% MiClase valor = (MiClase)<strong>request</strong>.getAttribute("nombre"); %&gt;</pre>
<p>De esta forma pasaremos los datos para &uacute;nicamente una petici&oacute;n determinada. 
Si queremos que estos datos est&eacute;n disponibles para todas las peticiones que haga un 
mismo cliente a la aplicaci&oacute;n, deberemos incluirlos en el &aacute;mbito de la sesi&oacute;n. 
Esto lo haremos en el <em>servlet</em> de la siguiente forma:</p>
<pre class="code">HttpSession session = request.getSession();
session.setAttribute("nombre", valor);</pre>
<p>Este objeto podr&aacute; ser importado por el JSP mediante el objeto <span class="codefrag">session</span>:</p>
<pre class="code">&lt;% MiClase valor = (MiClase)<strong>session</strong>.getAttribute("nombre"); %&gt;</pre>
<p>Podemos tambi&eacute;n incluir estos datos en &aacute;mbito del contexto
  de la aplicaci&oacute;n si queremos que estos datos
  est&eacute;n disponibles para todas las peticiones que se realicen a la aplicaci&oacute;n 
  de forma global. En este caso deberemos incluirlos en el &aacute;mbito del contexto de
  la siguiente forma dentro de nuestro <em>servlet</em>:</p>
<pre class="code">ServletContext context = getServletContext();
context.setAttribute("nombre", valor);</pre>
<p>Este objeto podr&aacute; ser importado por el JSP mediante el objeto <span class="codefrag">application</span>:</p>
<pre class="code">&lt;% MiClase valor = (MiClase)<strong>application</strong>.getAttribute("nombre"); %&gt;</pre>
</div>             


<p class="pageBreakAfter"></p>


</div>
<div class="clearboth">&nbsp;</div>
</div>
<div id="footer">
<div class="lastmodified">
<script type="text/javascript"><!--
document.write("<text>Last Published:</text> " + document.lastModified);
//  --></script>
</div>
<div class="copyright">
        Copyright &copy;
         2006 Depto. CCIA</div>
</div>
</body>
</html>
