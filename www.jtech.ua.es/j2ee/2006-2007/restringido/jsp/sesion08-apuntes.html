<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta content="Apache Forrest" name="Generator">
<meta name="Forrest-version" content="0.7">
<meta name="Forrest-skin-name" content="pelt">
<title>Introducci&oacute;n a las librer&iacute;as de tags</title>
<link type="text/css" href="skin/basic.css" rel="stylesheet">
<link media="screen" type="text/css" href="skin/screen.css" rel="stylesheet">
<link media="print" type="text/css" href="skin/print.css" rel="stylesheet">
<link type="text/css" href="skin/profile.css" rel="stylesheet">
<script src="skin/getBlank.js" language="javascript" type="text/javascript"></script><script src="skin/getMenu.js" language="javascript" type="text/javascript"></script><script src="skin/fontsize.js" language="javascript" type="text/javascript"></script>
<link rel="shortcut icon" href="">
</head>
<body onload="init()">
<script type="text/javascript">ndeSetTextSize();</script>
<div id="top">
<div class="header">
<div class="grouplogo">
<a href="http://www.jtech.ua.es/j2ee"><img class="logoImage" alt="J2EE" src="images/baner_j2ee_izq.gif" title="Curso Especialista Universitario J2EE"></a>
</div>
<div class="projectlogoA1">
<a href="http://www.dccia.ua.es/"><img class="logoImage" alt="Servlets y JSP" src="images/baner_j2ee_der.gif" title="Servlets y JSP"></a>
</div>
<ul id="tabs">
<li>
<a class="base-not-selected" href="../index.html">M&oacute;dulos</a>
</li>
<li class="current">
<a class="base-selected" href="index.html">Servlets y JSP</a>
</li>
</ul>
</div>
</div>
<div id="main">
<div id="publishedStrip">
<div id="level2tabs"></div>
<script type="text/javascript"><!--
document.write("<text>Last Published:</text> " + document.lastModified);
//  --></script>
</div>
<div class="breadtrail">
             
             &nbsp;
           </div>
<div id="menu">
<div onclick="SwitchMenu('menu_selected_1.1', 'skin/')" id="menu_selected_1.1Title" class="menutitle" style="background-image: url('skin/images/chapter_open.gif');">Servlets y JSP</div>
<div id="menu_selected_1.1" class="selectedmenuitemgroup" style="display: block;">
<div class="menuitem">
<a href="index.html" title="Servlets y JSP">&Iacute;ndice</a>
</div>
<div onclick="SwitchMenu('menu_selected_1.1.2', 'skin/')" id="menu_selected_1.1.2Title" class="menutitle" style="background-image: url('skin/images/chapter_open.gif');">Teor&iacute;a</div>
<div id="menu_selected_1.1.2" class="selectedmenuitemgroup" style="display: block;">
<div class="menuitem">
<a href="sesion01-apuntes.html">Sesion 1</a>
</div>
<div class="menuitem">
<a href="sesion02-apuntes.html">Sesion 2</a>
</div>
<div class="menuitem">
<a href="sesion03-apuntes.html">Sesion 3</a>
</div>
<div class="menuitem">
<a href="sesion04-apuntes.html">Sesion 4</a>
</div>
<div class="menuitem">
<a href="sesion05-apuntes.html">Sesion 5</a>
</div>
<div class="menuitem">
<a href="sesion06-apuntes.html">Sesion 6</a>
</div>
<div class="menuitem">
<a href="sesion07-apuntes.html">Sesion 7</a>
</div>
<div class="menupage">
<div class="menupagetitle">Sesion 8</div>
</div>
<div class="menuitem">
<a href="sesion09-apuntes.html">Sesion 9</a>
</div>
<div class="menuitem">
<a href="sesion10-apuntes.html">Sesion 10</a>
</div>
<div class="menuitem">
<a href="sesion11-apuntes.html">Sesion 11</a>
</div>
<div class="menuitem">
<a href="sesion12-apuntes.html">Sesion 12</a>
</div>
<div class="menuitem">
<a href="roadmap-apuntes.html">Roadmap</a>
</div>
</div>
<div onclick="SwitchMenu('menu_1.1.3', 'skin/')" id="menu_1.1.3Title" class="menutitle">Ejercicios</div>
<div id="menu_1.1.3" class="menuitemgroup">
<div class="menuitem">
<a href="sesion01-ejercicios.html">Sesion 1</a>
</div>
<div class="menuitem">
<a href="sesion02-ejercicios.html">Sesion 2</a>
</div>
<div class="menuitem">
<a href="sesion03-ejercicios.html">Sesion 3</a>
</div>
<div class="menuitem">
<a href="sesion04-ejercicios.html">Sesion 4</a>
</div>
<div class="menuitem">
<a href="sesion05-ejercicios.html">Sesion 5</a>
</div>
<div class="menuitem">
<a href="sesion06-ejercicios.html">Sesion 6</a>
</div>
<div class="menuitem">
<a href="sesion07-ejercicios.html">Sesion 7</a>
</div>
<div class="menuitem">
<a href="sesion08-ejercicios.html">Sesion 8</a>
</div>
<div class="menuitem">
<a href="sesion09-ejercicios.html">Sesion 9</a>
</div>
<div class="menuitem">
<a href="sesion10-ejercicios.html">Sesion 10</a>
</div>
<div class="menuitem">
<a href="sesion11-ejercicios.html">Sesion 11</a>
</div>
<div class="menuitem">
<a href="sesion12-ejercicios.html">Sesion 12</a>
</div>
</div>
</div>
<div id="credit"></div>
<div id="roundbottom">
<img style="display: none" class="corner" height="15" width="15" alt="" src="skin/images/rc-b-l-15-1body-2menu-3menu.png"></div>
<div id="credit2"></div>
</div>
<div id="content">
<div title="Portable Document Format" class="pdflink">
<a class="dida" href="sesion08-apuntes.pdf"><img alt="PDF -icon" src="skin/images/pdfdoc.gif" class="skin"><br>
        PDF</a>
</div>
<h1>Introducci&oacute;n a las librer&iacute;as de tags</h1>
<div id="minitoc-area">
<ul class="minitoc">
<li>
<a href="#Conceptos+b%C3%A1sicos+sobre+librer%C3%ADas+de+tags">Conceptos b&aacute;sicos sobre librer&iacute;as de tags</a>
<ul class="minitoc">
<li>
<a href="#El+gestor+de+tags">El gestor de tags</a>
</li>
<li>
<a href="#El+descriptor+de+la+librer%C3%ADa+de+tags">El descriptor de la librer&iacute;a de tags</a>
</li>
<li>
<a href="#Carga+de+taglibs+en+ficheros+JSP">Carga de taglibs en ficheros JSP</a>
</li>
<li>
<a href="#Ejemplo">Ejemplo</a>
</li>
</ul>
</li>
<li>
<a href="#Ejemplo+de+librer%C3%ADa%3A+request">Ejemplo de librer&iacute;a: request</a>
<ul class="minitoc">
<li>
<a href="#Uso+de+la+librer%C3%ADa">Uso de la librer&iacute;a</a>
</li>
<li>
<a href="#Algunos+tags+de+la+librer%C3%ADa">Algunos tags de la librer&iacute;a</a>
</li>
<li>
<a href="#Ejemplo+de+uso">Ejemplo de uso</a>
</li>
</ul>
</li>
<li>
<a href="#Ejemplo+de+librer%C3%ADa%3A+dbtags">Ejemplo de librer&iacute;a: dbtags</a>
<ul class="minitoc">
<li>
<a href="#Uso+de+la+librer%C3%ADa-N104B4">Uso de la librer&iacute;a</a>
</li>
<li>
<a href="#Algunos+tags+de+la+librer%C3%ADa-N104F9">Algunos tags de la librer&iacute;a</a>
</li>
<li>
<a href="#Ejemplo+de+uso-N105DB">Ejemplo de uso</a>
</li>
</ul>
</li>
<li>
<a href="#Otras+consideraciones+acerca+de+las+librer%C3%ADas+de+tags">Otras consideraciones acerca de las librer&iacute;as de tags</a>
<ul class="minitoc">
<li>
<a href="#Uso+de+los+tags">Uso de los tags</a>
</li>
<li>
<a href="#Comunicaci%C3%B3n+entre+JSP+y+las+taglibs">Comunicaci&oacute;n entre JSP y las taglibs</a>
</li>
<li>
<a href="#M%C3%A1s+informaci%C3%B3n">M&aacute;s informaci&oacute;n</a>
</li>
</ul>
</li>
</ul>
</div>

<a name="N1000C"></a><a name="Conceptos+b%C3%A1sicos+sobre+librer%C3%ADas+de+tags"></a>
<h2 class="underlined_10">Conceptos b&aacute;sicos sobre librer&iacute;as de tags</h2>
<div class="section">
<p>Las <strong>librer&iacute;as de tags</strong> (<em>taglibs</em>) son conjuntos de etiquetas HTML personalizadas que permiten encapsular determinadas acciones, mediante un c&oacute;digo Java subyacente. Es decir, se define lo que va a ejecutar la etiqueta mediante c&oacute;digo Java, y luego se le da un nombre a la etiqueta para llamarla desde las p&aacute;ginas JSP, estableciendo la relaci&oacute;n entre el nombre de la etiqueta y el c&oacute;digo Java que la implementa.</p>
<p>Por ejemplo, una p&aacute;gina JSP que hace uso de librer&iacute;as de tags podr&iacute;a tener este aspecto: </p>
<pre class="code">&lt;%@ taglib uri="ejemplo" prefix="ej" %&gt;
&lt;html&gt;
&lt;body&gt;
&lt;h1&gt;Ejemplo de librerias de tags&lt;/h1&gt;
&lt;ej:mitag&gt;Hola a todos&lt;/ej:mitag&gt;
&lt;br&gt;
&lt;ej:otrotag/&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
<p>donde se utiliza una librer&iacute;a llamada <span class="codefrag">ejemplo</span>, que se simplifica con el prefijo <span class="codefrag">ej</span>, de forma que todos los tags de dicha librer&iacute;a se referencian con dicho prefijo y dos puntos, teniendo la forma <span class="codefrag">ej:tag</span>. Se utilizan as&iacute; los tags <span class="codefrag">mitag</span> y <span class="codefrag">otrotag</span>. </p>
<p>Para poder utilizar las taglibs necesitamos tener una versi&oacute;n de JSP 1.1 o superior. Veremos a continuaci&oacute;n aspectos generales sobre las librer&iacute;as de tags, para pasar despu&eacute;s a ver dos ejemplos concretos de librer&iacute;as ya hechas. M&aacute;s adelante veremos c&oacute;mo crear nuestras propias librer&iacute;as de tags.</p>
<a name="N10037"></a><a name="El+gestor+de+tags"></a>
<h3 class="underlined_5">El gestor de tags</h3>
<p>Cuando escribimos un tag (etiqueta) de una librer&iacute;a en una p&aacute;gina JSP, un gestor de tags se pone en funcionamiento en el servidor para interactuar entre la p&aacute;gina JSP y los objetos relacionados con dicho tag y su librer&iacute;a.</p>
<p>Existen dos interfaces principales que describen un gestor de tags, en el paquete <strong>javax.servlet.jsp.tagext</strong>. Cada tag que se cree implementar&aacute; una de las dos: </p>
<ul>
			
<li>
<strong>Tag</strong>: para tags simples, que no manejan el contenido de los mismos</li>
			
<li>
<strong>BodyTag</strong>: una extensi&oacute;n del anterior que permite manipular el contenido (cuerpo) de los tags</li>
		
</ul>
<p>El gestor se encarga de llamar a su m&eacute;todo <strong>doStartTag()</strong> cuando comienza el mismo. Este m&eacute;todo puede devolver tres valores: </p>
<ul>
			
<li>
<span class="codefrag">EVAL_BODY_INCLUDE</span>: explora el cuerpo del tag, para tags de tipo <span class="codefrag">Tag</span>
</li>
			
<li>
<span class="codefrag">EVAL_BODY_TAG</span>: explora el cuerpo del tag, para tags del tipo <span class="codefrag">BodyTag.</span> Con esto podremos manipular el cuerpo del tag.</li>
			
<li>
<span class="codefrag">SKIP_BODY</span>: no explora el cuerpo del tag</li>
		
</ul>
<p>Cuando se termina el tag, se llama al m&eacute;todo<strong> doEndTag()</strong> que puede devolver: </p>
<ul>
			
<li>EVAL_PAGE: para continuar evaluando la p&aacute;gina</li>
			
<li>SKIP_PAGE: para no continuar evaluando la p&aacute;gina</li>
		
</ul>
<p>Estos valores devueltos permiten al contenedor JSP decidir c&oacute;mo evaluar el resto de la p&aacute;gina JSP. </p>
<p>Para los gestores de tipo <span class="codefrag">BodyTag</span>, se tienen los m&eacute;todos <strong>doInitBody()</strong> y <strong>doAfterBody()</strong> para poder manipular el cuerpo del tag al procesarlo. </p>
<p>Los gestores de tags que se tengan deber&aacute;n colocarse en el <strong>directorio <span class="codefrag">WEB-INF/classes</span> o <span class="codefrag">WEB-INF/lib</span></strong> de la aplicaci&oacute;n donde se utilicen (dependiendo de si son ficheros <span class="codefrag">.class</span> sueltos o est&aacute;n empaquetados en ficheros JAR).</p>
<a name="N1009D"></a><a name="El+descriptor+de+la+librer%C3%ADa+de+tags"></a>
<h3 class="underlined_5">El descriptor de la librer&iacute;a de tags</h3>
<p>El <strong>descriptor de la librer&iacute;a de tags (TLD)</strong> es un fichero utilizado para interpretar p&aacute;ginas que incluyan dicha librer&iacute;a. Contiene directivas que describen la librer&iacute;a, para poderla utilizar. Es un fichero XML que mapea acciones con clases de tags. </p>
<p>
<strong>1. Definici&oacute;n del fichero TLD en el descriptor de despliegue (web.xml)</strong> 
</p>
<p>Para encontrar y utilizar este fichero TLD, se utiliza una etiqueta de tipo <span class="codefrag">taglib</span> en el fichero descriptor de despliegue (<span class="codefrag">web.xml</span>) de nuestra aplicaci&oacute;n. As&iacute;, para cada taglib que se emplee en la aplicaci&oacute;n se tendr&aacute; un grupo de texto de este tipo en dicho fichero: </p>
<pre class="code">&lt;taglib&gt;
	&lt;taglib-uri&gt;identificador&lt;/taglib-uri&gt;
	&lt;taglib-location&gt;fichero.tld&lt;/taglib-location&gt;
&lt;/taglib&gt;</pre>
<ul>
			
<li>
<strong><span class="codefrag">taglib-uri</span></strong> es un nombre identificativo de la librer&iacute;a</li>
			
<li>
<strong><span class="codefrag">taglib-location</span></strong> indica d&oacute;nde se encuentra el fichero TLD (por ejemplo, en <span class="codefrag">/WEB-INF/fichero.tld</span>)</li>
		
</ul>
<p>
<strong>2. Contenido del fichero TLD</strong> 
</p>
<p>Por otra parte, el fichero TLD de la librer&iacute;a tiene un contenido como: </p>
<pre class="code">&lt;?xml version="1.0" encoding="ISO-8859-1" ?&gt;
&lt;!DOCTYPE taglib PUBLIC "-//Sun Microsystems, 
 Inc.//DTD JSP Tag Library 1.1//EN" 
 "http://java.sun.com/j2ee/dtds/web-jsptaglibrary_1_1.dtd"&gt; 

&lt;taglib&gt; 

	&lt;tlibversion&gt;1.0&lt;/tlibversion&gt; 
	&lt;jspversion&gt;1.1&lt;/jspversion&gt;
	&lt;shortname&gt;pt&lt;/shortname&gt;
	&lt;uri&gt;pruebatags&lt;/uri&gt;
	&lt;info&gt;Librer&iacute;a de prueba&lt;/info&gt; 

	&lt;tag&gt; 
		&lt;name&gt;prueba&lt;/name&gt; 
		&lt;tagclass&gt;Prueba&lt;/tagclass&gt;
		&lt;bodycontent&gt;empty&lt;/bodycontent&gt;
		&lt;info&gt;Tag de prueba&lt;/info&gt;
		&lt;attribute&gt; 
			&lt;name&gt;nombre&lt;/name&gt;
			&lt;required&gt;false&lt;/required&gt;
			&lt;rtexprvalue&gt;false&lt;/rtexprvalue&gt;
		&lt;/attribute&gt; 	
	&lt;/tag&gt;
&lt;/taglib&gt;</pre>
<p>Se especifica al principio que es un fichero XML, y el DOCTYPE del mismo. La etiqueta ra&iacute;z del documento es <span class="codefrag">taglib</span>, y puede tener como subetiquetas: </p>
<ul>
			
<li>
<strong><span class="codefrag">tlibversion</span></strong>: con la versi&oacute;n de la librer&iacute;a</li>
			
<li>
<strong><span class="codefrag">jspversion</span></strong>: versi&oacute;n requerida de JSP para utilizar la librer&iacute;a</li>
			
<li>
<strong><span class="codefrag">shortname</span></strong>: nombre corto para referenciar a la librer&iacute;a desde JSP</li>
			
<li>
<strong><span class="codefrag">uri</span></strong>: identificador de la librer&iacute;a (el mismo que el indicado en el fichero <span class="codefrag">web.xml</span>)</li>
			
<li>
<strong><span class="codefrag">info</span></strong>: cadena descriptiva de la librer&iacute;a</li>
		
</ul>
<p>Tras las etiquetas anteriores, tendremos una etiqueta de tipo <strong>tag</strong> por cada tag<span class="codefrag"> </span>de la librer&iacute;a. Esta etiqueta puede tener como subetiquetas: </p>
<ul>
			
<li>
<strong><span class="codefrag">name</span></strong>: nombre de la etiqueta, para llamarla desde JSP</li>
			
<li>
<strong><span class="codefrag">tagclass</span></strong>: clase Java que implementa la etiqueta</li>
			
<li>
<strong><span class="codefrag">teiclass</span></strong>: para etiquetas TEI (no las veremos) (opcional)</li>
			
<li>
<strong><span class="codefrag">bodycontent</span></strong>: tipo de contenido del cuerpo de la etiqueta: <strong>empty</strong> (sin contenido), <strong>tagdependent</strong> (cuerpo evaluado por la propia clase que implementa el tag), o <strong>jsp</strong> (cuerpo evaluado por el contenedor JSP que procesa la p&aacute;gina)</li>
			
<li>
<strong><span class="codefrag">info</span></strong>: informaci&oacute;n sobre el tag (opcional)</li>
			
<li>
				
<p>
<strong><span class="codefrag">attribute</span></strong>: atributos o par&aacute;metros del tag. Puede tener como subetiquetas:</p>
				
<ul>
					
<li>
<strong><span class="codefrag">name</span></strong>: nombre del atributo</li>
					
<li>
<strong><span class="codefrag">required</span></strong>: indica si el atributo es requerido (<span class="codefrag">true</span>) o no (<span class="codefrag">false</span>)</li>
					
<li>
<strong><span class="codefrag">rtexprvalue</span></strong>: indica si se pueden asignar valores din&aacute;micos, como expresiones JSP (<span class="codefrag">true</span>), o no (<span class="codefrag">false</span>). Por defecto es <span class="codefrag">false</span>.</li>
				
</ul>
			
</li>
		
</ul>
<a name="N10164"></a><a name="Carga+de+taglibs+en+ficheros+JSP"></a>
<h3 class="underlined_5">Carga de taglibs en ficheros JSP</h3>
<p>Para poder utilizar taglibs en ficheros JSP, se colocan al principio del fichero (antes de cualquier acci&oacute;n) directivas del tipo: </p>
<pre class="code">&lt;%@ taglib uri="identificador" prefix="prefijo" %&gt;</pre>
<p>donde: </p>
<ul>
			
<li>
<strong><span class="codefrag">uri</span></strong> es el identificador de la librer&iacute;a (indicado tambi&eacute;n en el fichero descriptor de despliegue (<span class="codefrag">web.xml</span>)). Normalmente cada librer&iacute;a tiene una URI que es la que se recomienda utilizar, y en algunos casos utilizar esa URI evita tener que disponer del fichero TLD en nuestra aplicaci&oacute;n</li>
			
<li>
<strong><span class="codefrag">prefix</span></strong><span class="codefrag"> </span>es un prefijo para llamar a los tags de la librer&iacute;a</li>
		
</ul>
<a name="N10189"></a><a name="Ejemplo"></a>
<h3 class="underlined_5">Ejemplo</h3>
<p>Veremos ahora c&oacute;mo utilizar una librer&iacute;a de tags. Supongamos que tenemos una librer&iacute;a llamada <span class="codefrag">prueba</span>, de forma que las clases Java que la implementan (los gestores de tags) est&aacute;n en un fichero <span class="codefrag">prueba.jar</span>, y el fichero descriptor es <span class="codefrag">prueba.tld</span>. Supongamos que el identificador (el <span class="codefrag">uri</span>) de la librer&iacute;a es <span class="codefrag">prueba</span>,<span class="codefrag"> </span>y<span class="codefrag"> </span>supongamos que la librer&iacute;a tiene un tag, llamado <span class="codefrag">hola</span>, sin cuerpo, que saca por pantalla el texto "hola a todos". </p>
<p>Para utilizar esta librer&iacute;a en una aplicaci&oacute;n web, seguimos los pasos: </p>
<ul>
			
<li>Copiar el fichero JAR en el directorio <span class="codefrag">WEB-INF/lib</span> de la aplicaci&oacute;n</li>
    	    
<li>Copiar el fichero TLD en el directorio <span class="codefrag">WEB-INF</span> de la aplicaci&oacute;n</li>
			
<li>
				
<p>A&ntilde;adir en el descriptor de despliegue (<span class="codefrag">web.xml</span>) el bloque <span class="codefrag">&lt;taglib&gt;</span> correspondiente para la librer&iacute;a:</p>

<pre class="code">&lt;taglib&gt;
	&lt;taglib-uri&gt;prueba&lt;/taglib-uri&gt;
	&lt;taglib-location&gt;
		/WEB-INF/prueba.tld
	&lt;/taglib-location&gt;
&lt;/taglib&gt;</pre>
			
</li>
			
<li>
				
<p>A&ntilde;adir al principio de cada p&aacute;gina JSP donde vayamos a utilizar la librer&iacute;a la l&iacute;nea:</p>
				
<pre class="code">&lt;%@ taglib uri="prueba" prefix="pr" %&gt;</pre>
				
<p>donde el <span class="codefrag">prefix</span> puede ser el que queramos.</p>
			
</li>
		
</ul>
<p>Con esto, por ejemplo, podemos utilizar la librer&iacute;a as&iacute;: </p>
<pre class="code">&lt;%@ taglib uri="prueba" prefix="pr" %&gt;
&lt;html&gt;
&lt;body&gt;
&lt;pr:hola/&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
<p>Vemos que el prefijo se utiliza para anteponerlo al nombre de cada tag de la librer&iacute;a, en la forma <strong>prefijo:tag</strong>. </p>
</div>


<a name="N101EB"></a><a name="Ejemplo+de+librer%C3%ADa%3A+request"></a>
<h2 class="underlined_10">Ejemplo de librer&iacute;a: request</h2>
<div class="section">
<p>La librer&iacute;a <strong>request</strong> es una librer&iacute;a desarrollada en el proyecto Jakarta (los autores de los servidores Apache y Tomcat), y que permite acceder a la informaci&oacute;n acerca de una petici&oacute;n HTTP realizada. De esta forma podremos acceder a los par&aacute;metros de entrada de una petici&oacute;n GET o POST, a las cabeceras HTTP, cookies, etc. </p>
<p>Se tiene informaci&oacute;n detallada sobre esta librer&iacute;a en:</p>
<p>
<a href="http://jakarta.apache.org/taglibs/doc/request-doc/intro.html">http://jakarta.apache.org/taglibs/doc/request-doc/intro.html</a>
</p>
<a name="N101FF"></a><a name="Uso+de+la+librer%C3%ADa"></a>
<h3 class="underlined_5">Uso de la librer&iacute;a</h3>
<p>Para utilizar la librer&iacute;a <span class="codefrag">request</span> en una aplicaci&oacute;n web, seguimos los pasos: </p>
<ul>
			
<li>Copiar el fichero <strong>TLD</strong> (<span class="codefrag">request.tld</span>) en el directorio <span class="codefrag">WEB-INF</span> de la aplicaci&oacute;n</li>
			
<li>Copiar el fichero <strong>JAR</strong> con la implementaci&oacute;n de los tags (<span class="codefrag">request.jar</span>) en el directorio <span class="codefrag">WEB-INF/lib</span> de la aplicaci&oacute;n</li>
			
<li>
				
<p>A&ntilde;adir al descriptor de despliegue de la aplicaci&oacute;n (<span class="codefrag">web.xml</span>) una marca <span class="codefrag">taglib</span> con informaci&oacute;n sobre la librer&iacute;a: </p>

<pre class="code">&lt;taglib&gt;
	&lt;taglib-uri&gt;
	http://jakarta.apache.org/taglibs/request-1.0
	&lt;/taglib-uri&gt;
	&lt;taglib-location&gt;
	/WEB-INF/request.tld
	&lt;/taglib-location&gt;
&lt;/taglib&gt;</pre>
			
</li>
			
<li>
				
<p>Finalmente, en las p&aacute;ginas JSP donde vayamos a utilizar la librer&iacute;a, se a&ntilde;ade al principio la l&iacute;nea:</p>

<pre class="code">&lt;%@ taglib 
uri="http://jakarta.apache.org/taglibs/request-1.0" 
prefix="req" %&gt;</pre>
				
<p>donde el prefijo puede ser el que queramos</p>
			
</li>
		
</ul>
<a name="N10244"></a><a name="Algunos+tags+de+la+librer%C3%ADa"></a>
<h3 class="underlined_5">Algunos tags de la librer&iacute;a</h3>
<p>Veremos ahora algunos de los tags con los que cuenta esta librer&iacute;a. Para los ejemplos que se ver&aacute;n, suponemos que se ha indicado un prefijo (<span class="codefrag">prefix</span>) "req": </p>
<p>
<strong>1. Informaci&oacute;n de la petici&oacute;n</strong> 
</p>
<p>
<strong><em>request</em></strong>
</p>
<p>Para obtener informaci&oacute;n sobre la petici&oacute;n HTTP.</p>
<p>ATRIBUTOS</p>
<ul>
			
<li>
				
<p>
<strong>id</strong>: permite luego obtener los datos de la petici&oacute;n con el mismo <span class="codefrag">id</span>. Los datos de la petici&oacute;n se obtienen mediante tags <span class="codefrag">jsp:getProperty</span> donde:</p>
				
<ul>
					
<li>como par&aacute;metro <span class="codefrag">name</span>  se pasa el <span class="codefrag">id</span>  asignado al tag</li>
					
<li>
						
<p>como par&aacute;metro <span class="codefrag">property </span>se pasa la propiedad que se quiere obtener, que por ejemplo puede ser:</p>
						
<ul>
							
<li>
<span class="codefrag">remoteUser</span>: obtiene el login del usuario que realiz&oacute; la petici&oacute;n</li>
							
<li>
<span class="codefrag">contentLength</span>: obtiene la longitud en bytes de la petici&oacute;n</li>
							
<li>
<span class="codefrag">remoteHost</span>: obtiene el nombre del cliente que realiz&oacute; la petici&oacute;n, o la IP si no puede determinarse el nombre</li>
							
<li>...etc.</li>
						
</ul>
					
</li>
				
</ul>
			
</li>
		
</ul>
<p>EJEMPLO</p>
<pre class="code">&lt;req:request id="req"&gt;
	Tama&ntilde;o peticion: 
	&lt;jsp:getProperty name="req" 
	 property="contentLength"/&gt;
	&lt;br&gt;
	Direccion cliente: 
	&lt;jsp:getProperty name="req" 
	 property="remoteHost"/&gt;
&lt;/req:request&gt;</pre>
<p>
<strong>2. Toma de par&aacute;metros</strong> 
</p>
<p>
<strong><em>parameter</em></strong>
</p>
<p>Obtiene el valor de un par&aacute;metro determinado. No tiene cuerpo.</p>
<p>ATRIBUTOS</p>
<ul>
			
<li>
<strong>name</strong>: nombre del par&aacute;metro del que se quiere su valor. </li>
		
</ul>
<p>EJEMPLO</p>
<pre class="code">&lt;req:parameter name="param1"/&gt;</pre>
<p>
<strong><em>parameters</em></strong> 
</p>
<p>Recorre toda la lista de par&aacute;metros</p>
<p>ATRIBUTOS</p>
<ul>
			
<li>
<strong>name</strong>: para buscar los valores para un par&aacute;metro de nombre determinado. Este atributo es opcional.</li>
			
<li>
				
<p>
<strong>id</strong>: permite luego obtener los datos de la petici&oacute;n con el mismo <span class="codefrag">id</span>. Los datos de la petici&oacute;n se obtienen mediante tags <span class="codefrag">jsp:getProperty</span> donde:</p>
				
<ul>
					
<li>como par&aacute;metro <span class="codefrag">name</span>  se pasa el <span class="codefrag">id</span>  asignado al tag</li>
					
<li>
						
<p>como par&aacute;metro <span class="codefrag">property </span>se pasa la propiedad que se quiere obtener, que pueden ser:</p>
						
<ul>
							
<li>
<span class="codefrag">name</span>: obtiene el nombre del par&aacute;metro</li>
							
<li>
<span class="codefrag">value</span>: obtiene el valor del par&aacute;metro</li>
						
</ul>
					
</li>
				
</ul>
			
</li>
		
</ul>
<p>EJEMPLO</p>
<pre class="code">&lt;req:parameters id="id1"&gt;
	Nombre: 
	&lt;jsp:getProperty name="id1" 
	 property="name"/&gt;
	&lt;br&gt;
	Valor: 
	&lt;jsp:getProperty name="id1" 
	 property="value"/&gt;
	&lt;br&gt;
&lt;/req:parameters&gt;</pre>
<pre class="code">&lt;req:parameters id="id1" name="param1"&gt;
	Valor: 
	&lt;jsp:getProperty name="id1" 
	 property="value"/&gt;
	&lt;br&gt;
&lt;/req:parameters&gt;</pre>
<p>
<strong><em>parameterValues</em></strong>
</p>
<p>Recorre la lista de valores para un par&aacute;metro con m&uacute;ltiples valores. Debe estar incluido dentro de un tag <span class="codefrag">parameters</span>, recorriendo as&iacute; los valores del par&aacute;metro que se est&eacute; explorando.</p>
<p>ATRIBUTOS</p>
<ul>
			
<li>
				
<p>
<strong>id</strong>: permite luego obtener los datos de la petici&oacute;n con el mismo <span class="codefrag">id</span>. Los datos de la petici&oacute;n se obtienen mediante tags <span class="codefrag">jsp:getProperty</span> donde:</p>
				
<ul>
					
<li>como par&aacute;metro <span class="codefrag">name</span>  se pasa el <span class="codefrag">id</span>  asignado al tag</li>
					
<li>como par&aacute;metro <span class="codefrag">property </span>se pasa <span class="codefrag">value</span>, que obtiene el valor del par&aacute;metro</li>
				
</ul>
			
</li>
		
</ul>
<p>EJEMPLO</p>
<pre class="code">&lt;req parameters id="id1" name="param1"&gt;
	&lt;req:parameterValues id="id2"&gt;
		Valor: 
		&lt;jsp:getProperty name="id2" 
		 property="value"/&gt;
		&lt;br&gt;
	&lt;/req:parameterValues&gt;
&lt;/req:parameters&gt;</pre>
<p>
<strong><em>equalsParameter</em></strong>
</p>
<p>Comprueba si el valor del par&aacute;metro coincide con un determinado valor</p>
<p>ATRIBUTOS</p>
<ul>
			
<li>
<strong>name</strong>: nombre del par&aacute;metro que se compara</li>
			
<li>
<strong>match</strong>: <span class="codefrag"> </span> cadena con la que tiene que coincidir</li>
			
<li>
<strong>value</strong> indica si deben coincidir (<span class="codefrag">true</span>) o no (<span class="codefrag">false</span>) (por defecto es <span class="codefrag">true</span>). Este par&aacute;metro es opcional.</li>
			
<li>
<strong>ignoreCase</strong>: <span class="codefrag"> </span>si deben coincidir may&uacute;sculas y min&uacute;sculas (<span class="codefrag">false</span>, valor por defecto) o no (<span class="codefrag">true</span>). Este par&aacute;metro es opcional.</li>
		
</ul>
<p>EJEMPLO</p>
<pre class="code">&lt;req:equalsParameter name="param1" 
 match="hola" value="false"&gt;
	El parametro no coincide
&lt;/req:equalsParameter&gt;
&lt;req:equalsParameter name="param1" 
 match="hola"&gt;
	El parametro si coincide
&lt;/req:equalsParameter&gt;</pre>
<p>
<strong><em>existsParameter</em></strong>
</p>
<p>Comprueba si existe un determinado par&aacute;metro </p>
<p>ATRIBUTOS</p>
<ul>
			
<li>
<strong>name</strong>: nombre del par&aacute;metro que se busca</li>
			
<li>
<strong>value</strong>: indica si debe existir (<span class="codefrag">true</span>) o no (<span class="codefrag">false</span>) (por defecto es <span class="codefrag">true</span>). Este par&aacute;metro es opcional</li>
		
</ul>
<p>EJEMPLO</p>
<pre class="code">&lt;req:existsParameter name="param1" 
 value="false"&gt;
	El parametro no existe
&lt;/req:existsParameter&gt;</pre>
<p>
<strong>3. Cookies</strong> 
</p>
<p>
<strong><em>cookie</em></strong>
</p>
<p>Obtiene el valor de una cookie determinada. Similar a <span class="codefrag">parameter.</span>
</p>
<pre class="code">&lt;req:cookie name="nombre"/&gt;</pre>
<p>
<strong><em>cookies</em></strong>
</p>
<p>Recorre toda la lista de cookies</p>
<p>ATRIBUTOS</p>
<ul>
			
<li>
<strong>name</strong>: para buscar los valores para una cookie de nombre determinado. Este par&aacute;metro es opcional.</li>
			
<li>
				
<p>
<strong>id</strong>: permite luego obtener los datos de la petici&oacute;n con el mismo <span class="codefrag">id</span>. Los datos de la petici&oacute;n se obtienen mediante tags <span class="codefrag">jsp:getProperty</span> donde:</p>
				
<ul>
					
<li>como par&aacute;metro <span class="codefrag">name</span> se pasa el <span class="codefrag">id</span> asignado al tag</li>
					
<li>
						
<p>como par&aacute;metro <span class="codefrag">property </span>se pasa la propiedad que se quiere obtener, que pueden ser, por ejemplo:</p>
						
<ul>
							
<li>
<span class="codefrag">name</span>: obtiene el nombre de la cookie</li>
							
<li>
<span class="codefrag">value</span>: obtiene el valor de la cookie</li>
							
<li>
<span class="codefrag">maxAge</span>: obtiene el tiempo de expiraci&oacute;n</li>
						
</ul>
					
</li>
				
</ul>
			
</li>
		
</ul>
<p>EJEMPLO</p>
<pre class="code">&lt;req:cookies id="id1"&gt;
	Nombre: 
	&lt;jsp:getProperty name="id1" 
	 property="name"/&gt;
	&lt;br&gt;
	Valor: 
	&lt;jsp:getProperty name="id1" 
	 property="value"/&gt;
	&lt;br&gt;
	Max tiempo: 
	&lt;jsp:getProperty name="id1" 
	 property="maxAge"/&gt;
	&lt;br&gt;
&lt;/req:cookies&gt;</pre>
<p>
<strong><em>equalsCookie</em></strong>
</p>
<p>Obtiene si el valor de una cookie coincide con una cadena dada (similar a <span class="codefrag">equalsParameter</span>)</p>
<p>
<strong><em>existsCookie</em></strong>
</p>
<p>Obtiene si existe una cookie dada (similar a <span class="codefrag">existsParameter</span>)</p>
<p>
<strong>4. Cabeceras</strong> 
</p>
<p>
<strong><em>header</em></strong>
</p>
<p>Obtiene el valor de una cabecera determinada (similar a <span class="codefrag">cookie</span> o a <span class="codefrag">parameter</span>)</p>
<pre class="code">&lt;req:header name="nombre"/&gt;</pre>
<p>
<strong><em>headerValues</em></strong>
</p>
<p>Obtiene todos los valores de una cabecera con m&uacute;ltiples valores (similar a <span class="codefrag">parameterValues</span>)</p>
<p>
<strong><em>headers</em></strong>
</p>
<p>Recorre toda la lista de cabeceras. Similar a <span class="codefrag">parameters</span>.</p>
<p>
<strong><em>equalsHeader</em></strong>
</p>
<p>Obtiene si el valor de una cabecera coincide con una cadena dada (similar a <span class="codefrag">equalsParameter</span>)</p>
<p>
<strong><em>existsHeader</em></strong>
</p>
<p>Obtiene si existe una cabecera dada (similar a <span class="codefrag">existsParameter</span>)</p>
<a name="N1046D"></a><a name="Ejemplo+de+uso"></a>
<h3 class="underlined_5">Ejemplo de uso</h3>
<p>Dado el siguiente formulario <span class="codefrag">index.html</span>:</p>
<pre class="code">&lt;html&gt;
&lt;body&gt;
	&lt;form action="request.jsp"&gt;
		Nombre: 
		&lt;input type="text" name="nombre"&gt;
		&lt;br&gt;
		Descripcion: 
		&lt;input type="text" name="descripcion"&gt;
		&lt;br&gt;
		&lt;input type="submit" value="Enviar"&gt;
	&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
<p>Al validarlo cargamos la p&aacute;gina <span class="codefrag">request.jsp</span>, donde tenemos un ejemplo de c&oacute;mo obtener los valores de los par&aacute;metros del formulario:</p>
<pre class="code">&lt;%@ taglib 
uri="http://jakarta.apache.org/taglibs/request-1.0" 
prefix="req" %&gt;

&lt;html&gt;
&lt;body&gt;
	Nombre: 
	&lt;req:parameter name="nombre"/&gt;
	&lt;br&gt;
	&lt;req:existsParameter name="descripcion" value="true"&gt;
		Descripcion: 
		&lt;req:parameter name="descripcion"/&gt;
	&lt;/req:existsParameter&gt;
	&lt;br&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
<p>Para probarlo, deber&iacute;amos utilizar los ficheros TLD y JAR de la librer&iacute;a <span class="codefrag">request</span>, copiados ya en <span class="codefrag">WEB-INF </span>y <span class="codefrag">WEB-INF/lib</span>, respectivamente.<span class="codefrag">  </span>Podemos probar el ejemplo con:</p>
<pre class="code">http://localhost:8080/apptaglibs/indexrequest.html</pre>
</div>


<a name="N1049C"></a><a name="Ejemplo+de+librer%C3%ADa%3A+dbtags"></a>
<h2 class="underlined_10">Ejemplo de librer&iacute;a: dbtags</h2>
<div class="section">
<p>La librer&iacute;a <strong>dbtags</strong> es otra librer&iacute;a desarrollada en el proyecto Jakarta que permite manipular bases de datos SQL. Requiere al menos la versi&oacute;n 1.2 de JSP (aunque en algunos servidores como Tomcat funciona con la 1.1). Tambi&eacute;n necesita objetos <span class="codefrag">DataSource</span>, que no son parte de JDK est&aacute;ndar (SE). Para poderlos utilizar, tenemos que trabajar tambi&eacute;n con JDK Enterprise Edition, o bien utilizar la API para JDBC que corresponda. </p>
<p>Se tiene informaci&oacute;n detallada sobre esta librer&iacute;a en:</p>
<p>
<a href="http://jakarta.apache.org/taglibs/doc/dbtags-doc/index.html">http://jakarta.apache.org/taglibs/doc/dbtags-doc/index.html</a> 
</p>
<a name="N104B4"></a><a name="Uso+de+la+librer%C3%ADa-N104B4"></a>
<h3 class="underlined_5">Uso de la librer&iacute;a</h3>
<p>Para utilizar la librer&iacute;a <span class="codefrag">dbtags</span> en una aplicaci&oacute;n web, seguimos los pasos: </p>
<ul>
			
<li>Copiar el fichero <strong>TLD</strong> (<span class="codefrag">dbtags.tld</span>) en el directorio <span class="codefrag">WEB-INF</span> de la aplicaci&oacute;n</li>
			
<li>Copiar el fichero <strong>JAR</strong> con la implementaci&oacute;n de los tags (<span class="codefrag">dbtags.jar</span>) en el directorio <span class="codefrag">WEB-INF/lib</span> de la aplicaci&oacute;n</li>
			
<li>
				
<p>A&ntilde;adir al descriptor de despliegue de la aplicaci&oacute;n (<span class="codefrag">web.xml</span>) una marca <span class="codefrag">taglib</span> con informaci&oacute;n sobre la librer&iacute;a: </p>

<pre class="code">&lt;taglib&gt;
	&lt;taglib-uri&gt;
	http://jakarta.apache.org/taglibs/dbtags
	&lt;/taglib-uri&gt;
	&lt;taglib-location&gt;
	/WEB-INF/dbtags.tld
	&lt;/taglib-location&gt;
&lt;/taglib&gt;</pre>
			
</li>
			
<li>
				
<p>Finalmente, en las p&aacute;ginas JSP donde vayamos a utilizar la librer&iacute;a, se a&ntilde;ade al principio la l&iacute;nea:</p>

<pre class="code">&lt;%@ taglib 
uri="http://jakarta.apache.org/taglibs/dbtags" 
prefix="sql" %&gt;</pre>
				
<p>donde el prefijo puede ser el que queramos</p>
			
</li>
		
</ul>
<a name="N104F9"></a><a name="Algunos+tags+de+la+librer%C3%ADa-N104F9"></a>
<h3 class="underlined_5">Algunos tags de la librer&iacute;a</h3>
<p>Veremos ahora algunos de los tags con los que cuenta esta librer&iacute;a. Para los ejemplos que se ver&aacute;n, suponemos que se ha indicado un prefijo (<span class="codefrag">prefix</span>) "sql": </p>
<p>
<strong>1. Conexi&oacute;n / Desconexi&oacute;n a la base de datos</strong> 
</p>
<p>
<strong><em>connection</em></strong>
</p>
<p>Este tag permite conectar a una base de datos, bien a trav&eacute;s de una URL, o un objeto <span class="codefrag">DataSource</span>. Veremos el primer caso, por ser m&aacute;s com&uacute;n.</p>
<p>ATRIBUTOS</p>
<ul>
			
<li>
<strong>id</strong>: para identificar la conexi&oacute;n. </li>
		
</ul>
<p>Luego, dentro, se tienen cuatro <span class="codefrag">subtags</span>: </p>
<ul>
			
<li>
<strong>url</strong>: indica la URL de la base de datos a la que conectar. En este caso, una base de datos MySQL llamada <span class="codefrag">prueba</span>. Es el &uacute;nico <span class="codefrag">subtag</span> que hay que indicar obligatoriamente</li>
			
<li>
<strong>driver</strong>: driver para conectar con la base de datos (opcional)</li>
			
<li>
<strong>userId</strong>: login del usuario que conecta (opcional)</li>
			
<li>
<strong>password</strong>: password del usuario que conecta (opcional)</li>
		
</ul>
<p>EJEMPLO</p>
<pre class="code">&lt;sql:connection id="con1"&gt;
	&lt;sql:url&gt;
	jdbc:mysql://localhost/prueba
	&lt;/sql:url&gt;
	&lt;sql:driver&gt;
	org.gjt.mm.mysql.Driver
	&lt;/sql:driver&gt;
	&lt;sql:userId&gt;root&lt;/sql:userId&gt;
	&lt;sql:password&gt;mysql&lt;/sql:password&gt;
&lt;/sql:connection&gt;</pre>
<p>
<strong><em>closeConnection</em></strong>
</p>
<p>Desconecta de una base de datos</p>
<p>ATRIBUTOS</p>
<ul>
			
<li>
<strong>conn</strong> <span class="codefrag"> </span>el <span class="codefrag">id </span>de la conexi&oacute;n que se hubiera abierto y queremos cerrar.</li>
		
</ul>
<p>EJEMPLO</p>
<pre class="code">&lt;sql:closeConnection conn="con1"/&gt;</pre>
<p>
<strong>2. Sentencias SQL</strong> 
</p>
<p>
<strong><em>statement</em></strong>
</p>
<p>Este tag permite crear una sentencia SQL para lanzarla a la base de datos.</p>
<p>ATRIBUTOS</p>
<ul>
			
<li>
<strong>id</strong>: para identificar la sentencia SQL</li>
			
<li>
<strong>conn</strong>:<span class="codefrag"> </span>el <span class="codefrag">id </span>de la conexi&oacute;n (abierta previamente) con que nos conectamos a la base de datos. </li>
		
</ul>
<p>Luego, dentro, se tienen los <span class="codefrag">subtags</span>: </p>
<ul>
			
<li>
<strong>query</strong>: para indicar la query SQL que se va a ejecutar</li>
			
<li>
<strong>execute</strong>: para ejecutar la sentencia (caso de sentencias INSERT, UPDATE, DELETE)</li>
			
<li>
				
<p>
<strong>resultSet</strong>: para obtener y explorar los resultados de una sentencia SELECT. El contenido del tag <span class="codefrag">resultSet</span> se ejecuta una vez para cada registro que se haya obtenido con el SELECT. Podemos utilizar en este bucle los tags:</p>
				
<ul>
					
<li>
<strong>getColumn</strong>: permite obtener los valores de cada columna de un registro, bien por el nombre de la columna (atributo <span class="codefrag">colName</span>), bien por la posici&oacute;n (atributo <span class="codefrag">position</span>). Existen tags similares, como <span class="codefrag">getNumber</span>, <span class="codefrag">getTime</span>, etc, para obtener columnas con un tipo de datos espec&iacute;fico.</li>
					
<li>
<strong>wasEmpty</strong>: acciones a realizar si la consulta SELECT no devuelve ning&uacute;n registro. Es una etiqueta relacionada con <span class="codefrag">resultset</span>, aunque se utiliza fuera de esta etiqueta.</li>
					
<li>
<strong>wasNotEmpty</strong>: acciones a realizar si la consulta SELECT devuelve alg&uacute;n registro. Es una etiqueta relacionada con <span class="codefrag">resultset</span>, aunque se utiliza fuera de esta etiqueta.</li>
				
</ul>
			
</li>
		
</ul>
<p>EJEMPLO</p>
<pre class="code">&lt;sql:statement id="s1" conn="con1"&gt;
	&lt;sql:query&gt;
	INSERT INTO datos(nombre, desc) 
	VALUES('nombre1','descripcion1')
	&lt;/sql:query&gt;
	&lt;sql:execute/&gt;
&lt;/sql:statement&gt;</pre>
<pre class="code">&lt;sql:statement id="s1" conn="con1"&gt;
	&lt;sql:query&gt;
		SELECT * FROM datos
	&lt;/sql:query&gt;
	&lt;sql:resultSet id="rs1"&gt;
		Nombre:
		&lt;sql:getColumn colName="id"/&gt;
		&lt;br&gt;
		Descripcion:
		&lt;sql:getColumn position="2"/&gt;
		&lt;br&gt;
	&lt;/sql:resultSet&gt;
	&lt;sql:wasEmpty&gt;
		No hay resultados que mostrar
	&lt;/sql:wasEmpty&gt;
	&lt;sql:wasNotEmpty&gt;
		Hay resultados que mostrar
	&lt;/sql:wasNotEmpty&gt;
&lt;/sql:statement&gt;</pre>
<a name="N105DB"></a><a name="Ejemplo+de+uso-N105DB"></a>
<h3 class="underlined_5">Ejemplo de uso</h3>
<p>El siguiente ejemplo completo, tomando los fragmentos anteriores, se conecta a una base de datos MySQL para obtener todos los nombres y descripciones de su tabla <span class="codefrag">datos</span>:</p>
<pre class="code">&lt;%@ taglib 
uri="http://jakarta.apache.org/taglibs/dbtags" 
prefix="sql" %&gt;

&lt;html&gt;
&lt;body&gt;
	&lt;sql:connection id="con1"&gt;
		&lt;sql:url&gt;
		jdbc:mysql://localhost/prueba
		&lt;/sql:url&gt;
		&lt;sql:driver&gt;
		org.gjt.mm.mysql.Driver
		&lt;/sql:driver&gt;
		&lt;sql:userId&gt;root&lt;/sql:userId&gt;
		&lt;sql:password&gt;mysql&lt;/sql:password&gt;
	&lt;/sql:connection&gt;

	&lt;sql:statement id="s1" conn="con1"&gt;
		&lt;sql:query&gt;
			SELECT * FROM datos
		&lt;/sql:query&gt;
		&lt;sql:resultSet id="rs1"&gt;
			Nombre:
			&lt;sql:getColumn colName="nombre"/&gt;
			&lt;br&gt;
			Descripcion:
			&lt;sql:getColumn position="2"/&gt;
			&lt;br&gt;
		&lt;/sql:resultSet&gt;
		&lt;sql:wasEmpty&gt;
			No hay resultados que mostrar
		&lt;/sql:wasEmpty&gt;
	&lt;/sql:statement&gt;

	&lt;sql:closeConnection conn="con1"/&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
<p>Para probar el ejemplo (una vez instalada la base de datos y establecida la contrase&ntilde;a de acceso al servidor), cargar&iacute;amos la p&aacute;gina JSP con:</p>
<pre class="code">http://localhost:8080/apptaglibs/dbtags.jsp</pre>
</div>


<a name="N105F4"></a><a name="Otras+consideraciones+acerca+de+las+librer%C3%ADas+de+tags"></a>
<h2 class="underlined_10">Otras consideraciones acerca de las librer&iacute;as de tags</h2>
<div class="section">
<a name="N105FA"></a><a name="Uso+de+los+tags"></a>
<h3 class="underlined_5">Uso de los tags</h3>
<p>Se pueden colocar tags en varios lugares de nuestra p&aacute;gina JSP. Podemos por ejemplo utilizar un tag <span class="codefrag">request</span> para obtener un valor de par&aacute;metro que utilizar en la sentencia SQL de un <span class="codefrag">dbtag</span>: </p>
<pre class="code">&lt;sql:statement id="s1" conn="con1"&gt;
	&lt;sql:query&gt;
		SELECT * FROM datos WHERE 
		nombre = '&lt;req:parameter name="nombre"/&gt;'
	&lt;/sql:query&gt;
	&lt;sql:execute/&gt;
&lt;/sql:statement&gt;</pre>
<p>O establecer un enlace en funci&oacute;n de un par&aacute;metro: </p>
<pre class="code">&lt;a href="http://&lt;req:parameter name="url"/&gt;"&gt;Enlace dinamico&lt;/a&gt;</pre>
<a name="N10615"></a><a name="Comunicaci%C3%B3n+entre+JSP+y+las+taglibs"></a>
<h3 class="underlined_5">Comunicaci&oacute;n entre JSP y las taglibs</h3>
<p>En ocasiones nos puede interesar comunicar c&oacute;digo JSP con c&oacute;digo de taglibs: obtener dentro de JSP el valor de una taglib, o al rev&eacute;s, por ejemplo.  </p>
<p>Si queremos utilizar c&oacute;digo JSP en una taglib, podemos hacerlo sin problemas. Por ejemplo, el siguiente c&oacute;digo obtiene las 3 primeras columnas de cada registro de una SELECT: </p>
<pre class="code">&lt;sql:statement id="s1" conn="con1"&gt;
	&lt;sql:query&gt;
		SELECT * FROM datos
	&lt;/sql:query&gt;
	&lt;sql:resultSet id="rs1"&gt;
		&lt;% for (int i = 1; i &lt;= 3; i++) { %&gt;
<strong>		Valor:&lt;sql:getColumn position="&lt;%=i%&gt;"/&gt;
</strong>		&lt;br&gt;
		&lt;% } %&gt;
	&lt;/sql:resultSet&gt;
&lt;/sql:statement&gt;</pre>
<p>
<strong>NOTA</strong>: algunos atributos de ciertas etiquetas no admiten que se utilicen <span class="codefrag">scriptlets</span> en ellos. </p>
<p>El caso contrario, obtener valores de taglibs dentro de c&oacute;digo JSP, es m&aacute;s complejo de tratar. Algunas etiquetas instancian c&oacute;digo Java que es directamente accesible desde JSP, con el nombre que se les da en la etiqueta. Por ejemplo, para saber si una conexi&oacute;n est&aacute; cerrada, podemos hacerlo con: </p>
<pre class="code">&lt;sql:connection id="con1"&gt;
	&lt;sql:url&gt;jdbc:mysql://localhost/prueba&lt;/sql:url&gt;
	&lt;sql:driver&gt;org.gjt.mm.mysql.Driver&lt;/sql:driver&gt;
&lt;/sql:connection&gt;
...
<strong>&lt;% if (con1.getClosed()) { %&gt;
</strong>	La conexion esta cerrada
&lt;% } %&gt;</pre>
<p>En otros casos la comunicaci&oacute;n no es tan directa, y hay que ver en la documentaci&oacute;n del tag en cuesti&oacute;n c&oacute;mo podemos acceder a su valor. Por ejemplo, para la etiqueta <span class="codefrag">getColumn</span> , podemos utilizar un atributo <span class="codefrag">to</span> para indicar un nombre de variable donde guardar su valor. Luego, desde JSP, utilizando el m&eacute;todo <span class="codefrag">getAttribute()</span> del objeto <span class="codefrag">pageContext</span> podemos acceder a dicho valor. Por ejemplo: </p>
<pre class="code">&lt;sql:getColumn colName="nombre" to="nombrePersona"/&gt;
...
<strong>&lt;% if (pageContext.getAttribute("nombrePersona").equals("Pepe")) { %&gt;
</strong>	Hola Pepe
&lt;% } %&gt;</pre>
<a name="N10651"></a><a name="M%C3%A1s+informaci%C3%B3n"></a>
<h3 class="underlined_5">M&aacute;s informaci&oacute;n</h3>
<p>Podemos encontrar informaci&oacute;n detallada sobre las librer&iacute;as de tags del proyecto Jakarta en:</p>
<p>
<a href="http://jakarta.apache.org/taglibs/index.html">http://jakarta.apache.org/taglibs/index.html</a>
</p>
</div>

<p class="pageBreakAfter"></p>

</div>
<div class="clearboth">&nbsp;</div>
</div>
<div id="footer">
<div class="lastmodified">
<script type="text/javascript"><!--
document.write("<text>Last Published:</text> " + document.lastModified);
//  --></script>
</div>
<div class="copyright">
        Copyright &copy;
         2006 Depto. CCIA</div>
</div>
</body>
</html>
